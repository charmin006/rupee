"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/surrealdb";
exports.ids = ["vendor-chunks/surrealdb"];
exports.modules = {

/***/ "(ssr)/./node_modules/surrealdb/dist/index.mjs":
/*!***********************************************!*\
  !*** ./node_modules/surrealdb/dist/index.mjs ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbstractEngine: () => (/* binding */ AbstractEngine),\n/* harmony export */   AuthController: () => (/* binding */ AuthController),\n/* harmony export */   BoundExcluded: () => (/* binding */ BoundExcluded),\n/* harmony export */   BoundIncluded: () => (/* binding */ BoundIncluded),\n/* harmony export */   CborBreak: () => (/* binding */ CborBreak),\n/* harmony export */   CborError: () => (/* binding */ CborError),\n/* harmony export */   CborFillMissing: () => (/* binding */ CborFillMissing),\n/* harmony export */   CborInvalidMajorError: () => (/* binding */ CborInvalidMajorError),\n/* harmony export */   CborNumberError: () => (/* binding */ CborNumberError),\n/* harmony export */   CborPartialDisabled: () => (/* binding */ CborPartialDisabled),\n/* harmony export */   CborRangeError: () => (/* binding */ CborRangeError),\n/* harmony export */   ConnectionStatus: () => (/* binding */ ConnectionStatus),\n/* harmony export */   ConnectionUnavailable: () => (/* binding */ ConnectionUnavailable),\n/* harmony export */   DEFAULT_RECONNECT_OPTIONS: () => (/* binding */ DEFAULT_RECONNECT_OPTIONS),\n/* harmony export */   Decimal: () => (/* binding */ Decimal),\n/* harmony export */   Duration: () => (/* binding */ Duration),\n/* harmony export */   Emitter: () => (/* binding */ Emitter),\n/* harmony export */   EngineAuth: () => (/* binding */ EngineAuth),\n/* harmony export */   EngineDisconnected: () => (/* binding */ EngineDisconnected),\n/* harmony export */   FeatureUnavailableForEngine: () => (/* binding */ FeatureUnavailableForEngine),\n/* harmony export */   Future: () => (/* binding */ Future),\n/* harmony export */   Gap: () => (/* binding */ Gap),\n/* harmony export */   Geometry: () => (/* binding */ Geometry),\n/* harmony export */   GeometryCollection: () => (/* binding */ GeometryCollection),\n/* harmony export */   GeometryLine: () => (/* binding */ GeometryLine),\n/* harmony export */   GeometryMultiLine: () => (/* binding */ GeometryMultiLine),\n/* harmony export */   GeometryMultiPoint: () => (/* binding */ GeometryMultiPoint),\n/* harmony export */   GeometryMultiPolygon: () => (/* binding */ GeometryMultiPolygon),\n/* harmony export */   GeometryPoint: () => (/* binding */ GeometryPoint),\n/* harmony export */   GeometryPolygon: () => (/* binding */ GeometryPolygon),\n/* harmony export */   HttpConnectionError: () => (/* binding */ HttpConnectionError),\n/* harmony export */   InvalidURLProvided: () => (/* binding */ InvalidURLProvided),\n/* harmony export */   MissingNamespaceDatabase: () => (/* binding */ MissingNamespaceDatabase),\n/* harmony export */   NoActiveSocket: () => (/* binding */ NoActiveSocket),\n/* harmony export */   NoConnectionDetails: () => (/* binding */ NoConnectionDetails),\n/* harmony export */   NoDatabaseSpecified: () => (/* binding */ NoDatabaseSpecified),\n/* harmony export */   NoNamespaceSpecified: () => (/* binding */ NoNamespaceSpecified),\n/* harmony export */   NoTokenReturned: () => (/* binding */ NoTokenReturned),\n/* harmony export */   NoURLProvided: () => (/* binding */ NoURLProvided),\n/* harmony export */   PreparedQuery: () => (/* binding */ PreparedQuery),\n/* harmony export */   Range: () => (/* binding */ Range),\n/* harmony export */   ReconnectFailed: () => (/* binding */ ReconnectFailed),\n/* harmony export */   ReconnectIterationError: () => (/* binding */ ReconnectIterationError),\n/* harmony export */   RecordId: () => (/* binding */ RecordId),\n/* harmony export */   RecordIdRange: () => (/* binding */ RecordIdRange),\n/* harmony export */   ResponseError: () => (/* binding */ ResponseError),\n/* harmony export */   StringRecordId: () => (/* binding */ StringRecordId),\n/* harmony export */   Surreal: () => (/* binding */ Surreal),\n/* harmony export */   SurrealDbError: () => (/* binding */ SurrealDbError),\n/* harmony export */   Table: () => (/* binding */ Table),\n/* harmony export */   UnexpectedConnectionError: () => (/* binding */ UnexpectedConnectionError),\n/* harmony export */   UnexpectedResponse: () => (/* binding */ UnexpectedResponse),\n/* harmony export */   UnexpectedServerResponse: () => (/* binding */ UnexpectedServerResponse),\n/* harmony export */   UnsupportedEngine: () => (/* binding */ UnsupportedEngine),\n/* harmony export */   UnsupportedVersion: () => (/* binding */ UnsupportedVersion),\n/* harmony export */   Uuid: () => (/* binding */ Uuid),\n/* harmony export */   VersionRetrievalFailure: () => (/* binding */ VersionRetrievalFailure),\n/* harmony export */   cbor: () => (/* binding */ cbor_exports),\n/* harmony export */   convertAuth: () => (/* binding */ convertAuth),\n/* harmony export */   d: () => (/* binding */ d),\n/* harmony export */   decodeCbor: () => (/* binding */ decodeCbor),\n/* harmony export */   \"default\": () => (/* binding */ Surreal),\n/* harmony export */   defaultVersionCheckTimeout: () => (/* binding */ defaultVersionCheckTimeout),\n/* harmony export */   encodeCbor: () => (/* binding */ encodeCbor),\n/* harmony export */   equals: () => (/* binding */ equals),\n/* harmony export */   escapeIdent: () => (/* binding */ escapeIdent),\n/* harmony export */   escapeNumber: () => (/* binding */ escapeNumber),\n/* harmony export */   escape_ident: () => (/* binding */ escape_ident),\n/* harmony export */   getIncrementalID: () => (/* binding */ getIncrementalID),\n/* harmony export */   isLiveResult: () => (/* binding */ isLiveResult),\n/* harmony export */   isVersionSupported: () => (/* binding */ isVersionSupported),\n/* harmony export */   jsonify: () => (/* binding */ jsonify),\n/* harmony export */   liveActions: () => (/* binding */ liveActions),\n/* harmony export */   r: () => (/* binding */ r),\n/* harmony export */   retrieveRemoteVersion: () => (/* binding */ retrieveRemoteVersion),\n/* harmony export */   s: () => (/* binding */ s),\n/* harmony export */   supportedSurrealDbVersionMin: () => (/* binding */ supportedSurrealDbVersionMin),\n/* harmony export */   supportedSurrealDbVersionRange: () => (/* binding */ supportedSurrealDbVersionRange),\n/* harmony export */   supportedSurrealDbVersionUntil: () => (/* binding */ supportedSurrealDbVersionUntil),\n/* harmony export */   surql: () => (/* binding */ surrealql),\n/* harmony export */   surrealql: () => (/* binding */ surrealql),\n/* harmony export */   toSurrealqlString: () => (/* binding */ toSurrealqlString),\n/* harmony export */   u: () => (/* binding */ u),\n/* harmony export */   versionCheck: () => (/* binding */ versionCheck)\n/* harmony export */ });\n/* harmony import */ var uuidv7__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuidv7 */ \"(ssr)/./node_modules/uuidv7/dist/index.js\");\n/* harmony import */ var isows__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! isows */ \"(ssr)/./node_modules/isows/_esm/index.js\");\nvar __defProp=Object.defineProperty;var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})};var Emitter=class{collectable={};listeners={};interceptors;constructor({interceptors}={}){this.interceptors=interceptors??{}}subscribe(event,listener,historic=!1){if(this.listeners[event]||(this.listeners[event]=[]),!this.isSubscribed(event,listener)&&(this.listeners[event]?.push(listener),historic&&this.collectable[event])){let buffer=this.collectable[event];delete this.collectable[event];for(let args of buffer)listener(...args)}}async subscribeOnce(event,historic=!1){if(historic&&this.collectable[event]){let args=this.collectable[event]?.shift();if(this.collectable[event]?.length===0&&delete this.collectable[event],args)return args}return new Promise(resolve=>{let resolved=!1,listener=(...args)=>{resolved||(resolved=!0,this.unSubscribe(event,listener),resolve(args))};this.subscribe(event,listener,!1)})}unSubscribe(event,listener){if(this.listeners[event]){let index=this.listeners[event]?.findIndex(v=>v===listener);index>=0&&(this.listeners[event]?.splice(index,1),this.listeners[event]?.length===0&&delete this.listeners[event])}}isSubscribed(event,listener){return!!this.listeners[event]?.includes(listener)}async emit(event,args,collectable=!1){let interceptor=this.interceptors[event],computedArgs=interceptor?await interceptor(...args):args;(collectable&&!this.listeners[event]||this.listeners[event]?.length===0)&&(this.collectable[event]||(this.collectable[event]=[]),this.collectable[event]?.push(args));for(let listener of this.listeners[event]??[])listener(...computedArgs)}reset({collectable,listeners}){if(Array.isArray(collectable))for(let k of collectable)delete this.collectable[k];else typeof collectable==\"string\"?delete this.collectable[collectable]:collectable!==!1&&(this.collectable={});if(Array.isArray(listeners))for(let k of listeners)delete this.listeners[k];else typeof listeners==\"string\"?delete this.listeners[listeners]:listeners!==!1&&(this.listeners={})}scanListeners(filter){let listeners=Object.keys(this.listeners);return filter&&(listeners=listeners.filter(filter)),listeners}};var Gap=class{args=[];constructor(...args){this.args=args}fill(value){return[this,value]}hasDefault(){return this.args.length===1}get default(){return this.args[0]}};var cbor_exports={};__export(cbor_exports,{CborBreak:()=>CborBreak,CborError:()=>CborError,CborFillMissing:()=>CborFillMissing,CborInvalidMajorError:()=>CborInvalidMajorError,CborNumberError:()=>CborNumberError,CborPartialDisabled:()=>CborPartialDisabled,CborRangeError:()=>CborRangeError,Encoded:()=>Encoded,Gap:()=>Gap,POW_2_53:()=>POW_2_53,POW_2_64:()=>POW_2_64,PartiallyEncoded:()=>PartiallyEncoded,Reader:()=>Reader,Tagged:()=>Tagged,Writer:()=>Writer,decode:()=>decode,encode:()=>encode,infiniteBytes:()=>infiniteBytes,partiallyEncodeObject:()=>partiallyEncodeObject});var POW_2_53=9007199254740992,POW_2_64=BigInt(18446744073709552e3);var Encoded=class{constructor(encoded){this.encoded=encoded}};var SurrealDbError=class extends Error{},NoActiveSocket=class extends SurrealDbError{name=\"NoActiveSocket\";message=\"No socket is currently connected to a SurrealDB instance. Please call the .connect() method first!\"},NoConnectionDetails=class extends SurrealDbError{name=\"NoConnectionDetails\";message=\"No connection details for the HTTP api have been provided. Please call the .connect() method first!\"},UnexpectedResponse=class extends SurrealDbError{name=\"UnexpectedResponse\";message=\"The returned response from the SurrealDB instance is in an unexpected format. Unable to process response!\"},InvalidURLProvided=class extends SurrealDbError{name=\"InvalidURLProvided\";message=\"The provided string is either not a URL or is a URL but with an invalid protocol!\"},NoURLProvided=class extends SurrealDbError{name=\"NoURLProvided\";message=\"Tried to establish a connection while no connection URL was provided\"},EngineDisconnected=class extends SurrealDbError{name=\"EngineDisconnected\";message=\"The engine reported the connection to SurrealDB has dropped\"},ReconnectFailed=class extends SurrealDbError{name=\"ReconnectFailed\";message=\"The engine failed to reconnect to SurrealDB\"},ReconnectIterationError=class extends SurrealDbError{name=\"ReconnectIterationError\";message=\"The reconnect iterator failed to iterate\"},UnexpectedServerResponse=class extends SurrealDbError{constructor(response){super();this.response=response;this.message=`${response}`}name=\"UnexpectedServerResponse\"},UnexpectedConnectionError=class extends SurrealDbError{constructor(error){super();this.error=error;this.message=`${error}`}name=\"UnexpectedConnectionError\"},UnsupportedEngine=class extends SurrealDbError{constructor(engine){super();this.engine=engine}name=\"UnsupportedEngine\";message=\"The engine you are trying to connect to is not supported or configured.\"},FeatureUnavailableForEngine=class extends SurrealDbError{name=\"FeatureUnavailableForEngine\";message=\"The feature you are trying to use is not available on this engine.\"},ConnectionUnavailable=class extends SurrealDbError{name=\"ConnectionUnavailable\";message=\"There is no connection available at this moment.\"},MissingNamespaceDatabase=class extends SurrealDbError{name=\"MissingNamespaceDatabase\";message=\"There is no namespace and/or database selected.\"},HttpConnectionError=class extends SurrealDbError{constructor(message,status,statusText,buffer){super();this.message=message;this.status=status;this.statusText=statusText;this.buffer=buffer}name=\"HttpConnectionError\"},ResponseError=class extends SurrealDbError{constructor(message){super();this.message=message}name=\"ResponseError\"},NoNamespaceSpecified=class extends SurrealDbError{name=\"NoNamespaceSpecified\";message=\"Please specify a namespace to use.\"},NoDatabaseSpecified=class extends SurrealDbError{name=\"NoDatabaseSpecified\";message=\"Please specify a database to use.\"},NoTokenReturned=class extends SurrealDbError{name=\"NoTokenReturned\";message=\"Did not receive an authentication token.\"},UnsupportedVersion=class extends SurrealDbError{name=\"UnsupportedVersion\";version;supportedRange;constructor(version,supportedRange){super(),this.version=version,this.supportedRange=supportedRange,this.message=`The version \"${version}\" reported by the engine is not supported by this library, expected a version that satisfies \"${supportedRange}\".`}},VersionRetrievalFailure=class extends SurrealDbError{constructor(error){super();this.error=error}name=\"VersionRetrievalFailure\";message=\"Failed to retrieve remote version. If the server is behind a proxy, make sure it's configured correctly.\"};var CborError=class extends SurrealDbError{message;constructor(message){super(),this.message=message}},CborNumberError=class extends CborError{name=\"CborNumberError\"},CborRangeError=class extends CborError{name=\"CborRangeError\"},CborInvalidMajorError=class extends CborError{name=\"CborInvalidMajorError\"},CborBreak=class extends CborError{name=\"CborBreak\";constructor(){super(\"Came across a break which was not intercepted by the decoder\")}},CborPartialDisabled=class extends CborError{name=\"CborPartialDisabled\";constructor(){super(\"Tried to insert a Gap into a CBOR value, while partial mode is not enabled\")}},CborFillMissing=class extends CborError{name=\"CborFillMissing\";constructor(){super(\"Fill for a gap is missing, and gap has no default\")}};var Writer=class{constructor(byteLength=256){this.byteLength=byteLength;this._buf=new ArrayBuffer(this.byteLength),this._view=new DataView(this._buf),this._byte=new Uint8Array(this._buf)}_chunks=[];_pos=0;_buf;_view;_byte;chunk(gap){this._chunks.push([this._buf.slice(0,this._pos),gap]),this._buf=new ArrayBuffer(this.byteLength),this._view=new DataView(this._buf),this._byte=new Uint8Array(this._buf),this._pos=0}get chunks(){return this._chunks}get buffer(){return this._buf.slice(0,this._pos)}claim(length){let pos=this._pos;if(this._pos+=length,this._pos<=this._buf.byteLength)return pos;let newLen=this._buf.byteLength<<1;for(;newLen<this._pos;)newLen<<=1;if(newLen>this._buf.byteLength){let oldb=this._byte;this._buf=new ArrayBuffer(newLen),this._view=new DataView(this._buf),this._byte=new Uint8Array(this._buf),this._byte.set(oldb)}return pos}writeUint8(value){let pos=this.claim(1);this._view.setUint8(pos,value)}writeUint16(value){let pos=this.claim(2);this._view.setUint16(pos,value)}writeUint32(value){let pos=this.claim(4);this._view.setUint32(pos,value)}writeUint64(value){let pos=this.claim(8);this._view.setBigUint64(pos,value)}writeUint8Array(data){if(data.byteLength===0)return;let pos=this.claim(data.byteLength);this._byte.set(data,pos)}writeArrayBuffer(data){data.byteLength!==0&&this.writeUint8Array(new Uint8Array(data))}writePartiallyEncoded(data){for(let[buf,gap]of data.chunks)this.writeArrayBuffer(buf),this.chunk(gap);this.writeArrayBuffer(data.end)}writeFloat32(value){let pos=this.claim(4);this._view.setFloat32(pos,value)}writeFloat64(value){let pos=this.claim(8);this._view.setFloat64(pos,value)}writeMajor(type,length){let base=type<<5;length<24?this.writeUint8(base+Number(length)):length<256?(this.writeUint8(base+24),this.writeUint8(Number(length))):length<65536?(this.writeUint8(base+25),this.writeUint16(Number(length))):length<4294967296?(this.writeUint8(base+26),this.writeUint32(Number(length))):(this.writeUint8(base+27),this.writeUint64(BigInt(length)))}output(partial,replacer2){return partial?new PartiallyEncoded(this._chunks,this.buffer,replacer2):this.buffer}};var PartiallyEncoded=class{constructor(chunks,end,replacer2){this.chunks=chunks;this.end=end;this.replacer=replacer2}build(fills,partial){let writer=new Writer,map=new Map(fills);for(let[buffer,gap]of this.chunks){let hasValue=map.has(gap)||gap.hasDefault();if(!partial&&!hasValue)throw new CborFillMissing;if(writer.writeArrayBuffer(buffer),hasValue){let data=map.get(gap)??gap.default;encode(data,{writer,replacer:this.replacer})}else writer.chunk(gap)}return writer.writeArrayBuffer(this.end),writer.output(!!partial,this.replacer)}};function partiallyEncodeObject(object,options){return Object.fromEntries(Object.entries(object).map(([k,v])=>[k,encode(v,{...options,partial:!0})]))}var Tagged=class{constructor(tag,value){this.tag=tag;this.value=value}};var textEncoder;function encode(input,options={}){let w=options.writer??new Writer,fillsMap=new Map(options.fills??[]);function inner(input2){let value=options.replacer?options.replacer(input2):input2;if(value===void 0)return w.writeUint8(247);if(value===null)return w.writeUint8(246);if(value===!0)return w.writeUint8(245);if(value===!1)return w.writeUint8(244);switch(typeof value){case\"number\":{if(Number.isInteger(value))if(value>=0&&value<=9007199254740992)w.writeMajor(0,value);else if(value<0&&value>=-9007199254740992)w.writeMajor(1,-(value+1));else throw new CborNumberError(\"Number too big to be encoded\");else w.writeUint8(251),w.writeFloat64(value);return}case\"bigint\":{if(value>=0&&value<POW_2_64)w.writeMajor(0,value);else if(value<=0&&value>=-POW_2_64)w.writeMajor(1,-(value+1n));else throw new CborNumberError(\"BigInt too big to be encoded\");return}case\"string\":{textEncoder??=new TextEncoder;let encoded=textEncoder.encode(value);w.writeMajor(3,encoded.byteLength),w.writeUint8Array(encoded);return}default:{if(Array.isArray(value)){w.writeMajor(4,value.length);for(let v of value)inner(v);return}if(value instanceof Tagged){w.writeMajor(6,value.tag),inner(value.value);return}if(value instanceof Encoded){w.writeArrayBuffer(value.encoded);return}if(value instanceof Gap){if(fillsMap.has(value))inner(fillsMap.get(value));else{if(!options.partial)throw new CborPartialDisabled;w.chunk(value)}return}if(value instanceof PartiallyEncoded){let res=value.build(options.fills??[],options.partial);options.partial?w.writePartiallyEncoded(res):w.writeArrayBuffer(res);return}if(value instanceof Uint8Array||value instanceof Uint16Array||value instanceof Uint32Array||value instanceof Int8Array||value instanceof Int16Array||value instanceof Int32Array||value instanceof Float32Array||value instanceof Float64Array||value instanceof ArrayBuffer){let v=new Uint8Array(value);w.writeMajor(2,v.byteLength),w.writeUint8Array(v);return}let entries=value instanceof Map?Array.from(value.entries()):Object.entries(value);w.writeMajor(5,entries.length);for(let v of entries.flat())inner(v)}}}return inner(input),w.output(!!options.partial,options.replacer)}var Reader=class{_buf;_view;_byte;_pos=0;constructor(buffer){this._buf=new ArrayBuffer(buffer.byteLength),this._view=new DataView(this._buf),this._byte=new Uint8Array(this._buf),this._byte.set(new Uint8Array(buffer))}read(amount,res){return this._pos+=amount,res}readUint8(){try{return this.read(1,this._view.getUint8(this._pos))}catch(e){throw e instanceof RangeError?new CborRangeError(e.message):e}}readUint16(){try{return this.read(2,this._view.getUint16(this._pos))}catch(e){throw e instanceof RangeError?new CborRangeError(e.message):e}}readUint32(){try{return this.read(4,this._view.getUint32(this._pos))}catch(e){throw e instanceof RangeError?new CborRangeError(e.message):e}}readUint64(){try{return this.read(8,this._view.getBigUint64(this._pos))}catch(e){throw e instanceof RangeError?new CborRangeError(e.message):e}}readFloat16(){let bytes=this.readUint16(),s2=(bytes&32768)>>15,e=(bytes&31744)>>10,f2=bytes&1023;return e===0?(s2?-1:1)*2**-14*(f2/2**10):e===31?f2?Number.NaN:(s2?-1:1)*Number.POSITIVE_INFINITY:(s2?-1:1)*2**(e-15)*(1+f2/2**10)}readFloat32(){try{return this.read(4,this._view.getFloat32(this._pos))}catch(e){throw e instanceof RangeError?new CborRangeError(e.message):e}}readFloat64(){try{return this.read(8,this._view.getFloat64(this._pos))}catch(e){throw e instanceof RangeError?new CborRangeError(e.message):e}}readBytes(amount){let available=this._byte.length-this._pos;if(available<amount)throw new CborRangeError(`The argument must be between 0 and ${available}`);return this.read(amount,this._byte.slice(this._pos,this._pos+amount))}readMajor(){let byte=this.readUint8(),major=byte>>5;if(major<0||major>7)throw new CborInvalidMajorError(\"Received invalid major type\");return[major,byte&31]}readMajorLength(length){if(length<=23)return length;switch(length){case 24:return this.readUint8();case 25:return this.readUint16();case 26:return this.readUint32();case 27:{let read=this.readUint64();return read>9007199254740992?read:Number(read)}}throw new CborRangeError(\"Expected a final length\")}};function infiniteBytes(r2,forMajor){let w=new Writer;for(;;){let[major,len]=r2.readMajor();if(major===7&&len===31)break;if(major!==forMajor)throw new CborInvalidMajorError(`Expected a resource of the same major (${forMajor}) while processing an infinite resource`);if(len===31)throw new CborRangeError(\"Expected a finite resource while processing an infinite resource\");w.writeUint8Array(r2.readBytes(Number(r2.readMajorLength(len))))}return w.buffer}var textDecoder;function decode(input,options={}){let r2=input instanceof Reader?input:new Reader(input);function inner(){let[major,len]=r2.readMajor();switch(major){case 0:return r2.readMajorLength(len);case 1:{let l=r2.readMajorLength(len);return typeof l==\"bigint\"?-(l+1n):-(l+1)}case 2:return len===31?infiniteBytes(r2,2):r2.readBytes(Number(r2.readMajorLength(len))).buffer;case 3:{let encoded=len===31?infiniteBytes(r2,3):r2.readBytes(Number(r2.readMajorLength(len)));return textDecoder??=new TextDecoder,textDecoder.decode(encoded)}case 4:{if(len===31){let arr2=[];for(;;)try{arr2.push(decode2())}catch(e){if(e instanceof CborBreak)break;throw e}return arr2}let l=r2.readMajorLength(len),arr=Array(l);for(let i=0;i<l;i++)arr[i]=decode2();return arr}case 5:{let entries=[];if(len===31)for(;;){let key;try{key=decode2()}catch(e){if(e instanceof CborBreak)break;throw e}let value=decode2();entries.push([key,value])}else{let l=r2.readMajorLength(len);for(let i=0;i<l;i++){let key=decode2(),value=decode2();entries[i]=[key,value]}}return options.map===\"map\"?new Map(entries):Object.fromEntries(entries)}case 6:{let tag=r2.readMajorLength(len),value=decode2();return new Tagged(tag,value)}case 7:switch(len){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 25:return r2.readFloat16();case 26:return r2.readFloat32();case 27:return r2.readFloat64();case 31:throw new CborBreak}}throw new CborInvalidMajorError(`Unable to decode value with major tag ${major}`)}function decode2(){return options.replacer?options.replacer(inner()):inner()}return decode2()}function dateToCborCustomDate(date){let s2=Math.floor(date.getTime()/1e3),ms=date.getTime()-s2*1e3;return[s2,ms*1e6]}function cborCustomDateToDate([s2,ns]){let date=new Date(0);return date.setUTCSeconds(Number(s2)),date.setMilliseconds(Math.floor(Number(ns)/1e6)),date}var Value=class{};var Decimal=class _Decimal extends Value{decimal;constructor(decimal){super(),this.decimal=decimal.toString()}equals(other){return other instanceof _Decimal?this.decimal===other.decimal:!1}toString(){return this.decimal}toJSON(){return this.decimal}};var millisecond=1,microsecond=millisecond/1e3,nanosecond=microsecond/1e3,second=1e3*millisecond,minute=60*second,hour=60*minute,day=24*hour,week=7*day,units=new Map([[\"ns\",nanosecond],[\"\\xB5s\",microsecond],[\"\\u03BCs\",microsecond],[\"us\",microsecond],[\"ms\",millisecond],[\"s\",second],[\"m\",minute],[\"h\",hour],[\"d\",day],[\"w\",week]]),unitsReverse=Array.from(units).reduce((map,[unit,size])=>(map.set(size,unit),map),new Map),durationPartRegex=new RegExp(`^(\\\\d+)(${Array.from(units.keys()).join(\"|\")})`),Duration=class _Duration extends Value{_milliseconds;constructor(input){super(),input instanceof _Duration?this._milliseconds=input._milliseconds:typeof input==\"string\"?this._milliseconds=_Duration.parseString(input):this._milliseconds=input}static fromCompact([s2,ns]){s2=s2??0,ns=ns??0;let ms=s2*1e3+ns/1e6;return new _Duration(ms)}equals(other){return other instanceof _Duration?this._milliseconds===other._milliseconds:!1}toCompact(){let s2=Math.floor(this._milliseconds/1e3),ns=Math.floor((this._milliseconds-s2*1e3)*1e6);return ns>0?[s2,ns]:s2>0?[s2]:[]}toString(){let left=this._milliseconds,result=\"\";function scrap(size){let num=Math.floor(left/size);return num>0&&(left=left%size),num}for(let[size,unit]of Array.from(unitsReverse).reverse()){let scrapped=scrap(size);scrapped>0&&(result+=`${scrapped}${unit}`)}return result}toJSON(){return this.toString()}static parseString(input){let ms=0,left=input;for(;left!==\"\";){let match=left.match(durationPartRegex);if(match){let amount=Number.parseInt(match[1]),factor=units.get(match[2]);if(factor===void 0)throw new SurrealDbError(`Invalid duration unit: ${match[2]}`);ms+=amount*factor,left=left.slice(match[0].length);continue}throw new SurrealDbError(\"Could not match a next duration part\")}return ms}static nanoseconds(nanoseconds){return new _Duration(Math.floor(nanoseconds*nanosecond))}static microseconds(microseconds){return new _Duration(Math.floor(microseconds*microsecond))}static milliseconds(milliseconds){return new _Duration(milliseconds)}static seconds(seconds){return new _Duration(seconds*second)}static minutes(minutes){return new _Duration(minutes*minute)}static hours(hours){return new _Duration(hours*hour)}static days(days){return new _Duration(days*day)}static weeks(weeks){return new _Duration(weeks*week)}get microseconds(){return Math.floor(this._milliseconds/microsecond)}get nanoseconds(){return Math.floor(this._milliseconds/nanosecond)}get milliseconds(){return Math.floor(this._milliseconds)}get seconds(){return Math.floor(this._milliseconds/second)}get minutes(){return Math.floor(this._milliseconds/minute)}get hours(){return Math.floor(this._milliseconds/hour)}get days(){return Math.floor(this._milliseconds/day)}get weeks(){return Math.floor(this._milliseconds/week)}};var Future=class _Future extends Value{constructor(inner){super();this.inner=inner}equals(other){return other instanceof _Future?this.inner===other.inner:!1}toJSON(){return this.toString()}toString(){return`<future> ${this.inner}`}};var Geometry=class _Geometry extends Value{equals(other){return other instanceof _Geometry?this.is(other):!1}toString(){return JSON.stringify(this.toJSON())}};function f(num){return num instanceof Decimal?Number.parseFloat(num.decimal):num}var GeometryPoint=class _GeometryPoint extends Geometry{point;constructor(point){super(),point instanceof _GeometryPoint?this.point=point.clone().point:this.point=[f(point[0]),f(point[1])]}toJSON(){return{type:\"Point\",coordinates:this.coordinates}}get coordinates(){return this.point}is(geometry){return geometry instanceof _GeometryPoint?this.point[0]===geometry.point[0]&&this.point[1]===geometry.point[1]:!1}clone(){return new _GeometryPoint([...this.point])}},GeometryLine=class _GeometryLine extends Geometry{line;constructor(line){super(),this.line=line instanceof _GeometryLine?line.clone().line:line}toJSON(){return{type:\"LineString\",coordinates:this.coordinates}}get coordinates(){return this.line.map(g=>g.coordinates)}close(){this.line[0].is(this.line.at(-1))||this.line.push(this.line[0])}is(geometry){if(!(geometry instanceof _GeometryLine)||this.line.length!==geometry.line.length)return!1;for(let i=0;i<this.line.length;i++)if(!this.line[i].is(geometry.line[i]))return!1;return!0}clone(){return new _GeometryLine(this.line.map(p=>p.clone()))}},GeometryPolygon=class _GeometryPolygon extends Geometry{polygon;constructor(polygon){super(),this.polygon=polygon instanceof _GeometryPolygon?polygon.clone().polygon:polygon.map(l=>{let line=l.clone();return line.close(),line})}toJSON(){return{type:\"Polygon\",coordinates:this.coordinates}}get coordinates(){return this.polygon.map(g=>g.coordinates)}is(geometry){if(!(geometry instanceof _GeometryPolygon)||this.polygon.length!==geometry.polygon.length)return!1;for(let i=0;i<this.polygon.length;i++)if(!this.polygon[i].is(geometry.polygon[i]))return!1;return!0}clone(){return new _GeometryPolygon(this.polygon.map(p=>p.clone()))}},GeometryMultiPoint=class _GeometryMultiPoint extends Geometry{points;constructor(points){super(),this.points=points instanceof _GeometryMultiPoint?points.points:points}toJSON(){return{type:\"MultiPoint\",coordinates:this.coordinates}}get coordinates(){return this.points.map(g=>g.coordinates)}is(geometry){if(!(geometry instanceof _GeometryMultiPoint)||this.points.length!==geometry.points.length)return!1;for(let i=0;i<this.points.length;i++)if(!this.points[i].is(geometry.points[i]))return!1;return!0}clone(){return new _GeometryMultiPoint(this.points.map(p=>p.clone()))}},GeometryMultiLine=class _GeometryMultiLine extends Geometry{lines;constructor(lines){super(),this.lines=lines instanceof _GeometryMultiLine?lines.lines:lines}toJSON(){return{type:\"MultiLineString\",coordinates:this.coordinates}}get coordinates(){return this.lines.map(g=>g.coordinates)}is(geometry){if(!(geometry instanceof _GeometryMultiLine)||this.lines.length!==geometry.lines.length)return!1;for(let i=0;i<this.lines.length;i++)if(!this.lines[i].is(geometry.lines[i]))return!1;return!0}clone(){return new _GeometryMultiLine(this.lines.map(p=>p.clone()))}},GeometryMultiPolygon=class _GeometryMultiPolygon extends Geometry{polygons;constructor(polygons){super(),this.polygons=polygons instanceof _GeometryMultiPolygon?polygons.polygons:polygons}toJSON(){return{type:\"MultiPolygon\",coordinates:this.coordinates}}get coordinates(){return this.polygons.map(g=>g.coordinates)}is(geometry){if(!(geometry instanceof _GeometryMultiPolygon)||this.polygons.length!==geometry.polygons.length)return!1;for(let i=0;i<this.polygons.length;i++)if(!this.polygons[i].is(geometry.polygons[i]))return!1;return!0}clone(){return new _GeometryMultiPolygon(this.polygons.map(p=>p.clone()))}},GeometryCollection=class _GeometryCollection extends Geometry{collection;constructor(collection){super(),this.collection=collection instanceof _GeometryCollection?collection.collection:collection}toJSON(){return{type:\"GeometryCollection\",geometries:this.geometries}}get geometries(){return this.collection.map(g=>g.toJSON())}is(geometry){if(!(geometry instanceof _GeometryCollection)||this.collection.length!==geometry.collection.length)return!1;for(let i=0;i<this.collection.length;i++)if(!this.collection[i].is(geometry.collection[i]))return!1;return!0}clone(){return new _GeometryCollection(this.collection.map(p=>p.clone()))}};function equals(x,y){if(Object.is(x,y))return!0;if(x instanceof Date&&y instanceof Date)return x.getTime()===y.getTime();if(x instanceof RegExp&&y instanceof RegExp)return x.toString()===y.toString();if(x instanceof Value&&y instanceof Value)return x.equals(y);if(typeof x!=\"object\"||x===null||typeof y!=\"object\"||y===null)return!1;let keysX=Reflect.ownKeys(x),keysY=Reflect.ownKeys(y);if(keysX.length!==keysY.length)return!1;for(let i=0;i<keysX.length;i++)if(!Reflect.has(y,keysX[i])||!equals(x[keysX[i]],y[keysX[i]]))return!1;return!0}var MAX_i64=9223372036854775807n;function escapeIdent(str){if(isOnlyNumbers(str))return`\\u27E8${str}\\u27E9`;if(str===\"\")return\"\\u27E8\\u27E9\";let code,i,len;for(i=0,len=str.length;i<len;i++)if(code=str.charCodeAt(i),!(code>47&&code<58)&&!(code>64&&code<91)&&!(code>96&&code<123)&&code!==95)return`\\u27E8${str.replaceAll(\"\\u27E9\",\"\\\\\\u27E9\")}\\u27E9`;return str}function escape_ident(str){return escapeIdent(str)}function escapeNumber(num){return num<=MAX_i64?num.toString():`\\u27E8${num}\\u27E9`}function isOnlyNumbers(str){return/^\\d+$/.test(str.replace(/_/g,\"\"))}var Uuid=class _Uuid extends Value{inner;constructor(uuid){super(),uuid instanceof ArrayBuffer?this.inner=uuidv7__WEBPACK_IMPORTED_MODULE_0__.UUID.ofInner(new Uint8Array(uuid)):uuid instanceof Uint8Array?this.inner=uuidv7__WEBPACK_IMPORTED_MODULE_0__.UUID.ofInner(uuid):uuid instanceof _Uuid?this.inner=uuid.inner:uuid instanceof uuidv7__WEBPACK_IMPORTED_MODULE_0__.UUID?this.inner=uuid:this.inner=uuidv7__WEBPACK_IMPORTED_MODULE_0__.UUID.parse(uuid)}equals(other){return other instanceof _Uuid?this.inner.equals(other.inner):!1}toString(){return this.inner.toString()}toJSON(){return this.inner.toString()}toUint8Array(){return this.inner.bytes}toBuffer(){return this.inner.bytes.buffer}static v4(){return new _Uuid((0,uuidv7__WEBPACK_IMPORTED_MODULE_0__.uuidv4obj)())}static v7(){return new _Uuid((0,uuidv7__WEBPACK_IMPORTED_MODULE_0__.uuidv7obj)())}};var RecordId=class _RecordId extends Value{tb;id;constructor(tb,id2){if(super(),typeof tb!=\"string\")throw new SurrealDbError(\"TB part is not valid\");if(!isValidIdPart(id2))throw new SurrealDbError(\"ID part is not valid\");this.tb=tb,this.id=id2}equals(other){return other instanceof _RecordId?this.tb===other.tb&&equals(this.id,other.id):!1}toJSON(){return this.toString()}toString(){let tb=escapeIdent(this.tb),id2=escapeIdPart(this.id);return`${tb}:${id2}`}},StringRecordId=class _StringRecordId extends Value{rid;constructor(rid){if(super(),rid instanceof _StringRecordId)this.rid=rid.rid;else if(rid instanceof RecordId)this.rid=rid.toString();else if(typeof rid==\"string\")this.rid=rid;else throw new SurrealDbError(\"String Record ID must be a string\")}equals(other){return other instanceof _StringRecordId?this.rid===other.rid:!1}toJSON(){return this.rid}toString(){return this.rid}};function isValidIdPart(v){if(v instanceof Uuid)return!0;switch(typeof v){case\"string\":case\"number\":case\"bigint\":return!0;case\"object\":return Array.isArray(v)||v!==null;default:return!1}}function escapeIdPart(id2){return id2 instanceof Uuid?`u\"${id2}\"`:typeof id2==\"string\"?escapeIdent(id2):typeof id2==\"bigint\"||typeof id2==\"number\"?escapeNumber(id2):toSurrealqlString(id2)}var Table=class _Table extends Value{tb;constructor(tb){if(super(),typeof tb!=\"string\")throw new SurrealDbError(\"Table must be a string\");this.tb=tb}equals(other){return other instanceof _Table?this.tb===other.tb:!1}toJSON(){return this.tb}toString(){return this.tb}};function toSurrealqlString(input){if(typeof input==\"string\")return`s${JSON.stringify(input)}`;if(input===null)return\"NULL\";if(input===void 0)return\"NONE\";if(typeof input==\"object\"){if(input instanceof Date)return`d${JSON.stringify(input.toISOString())}`;if(input instanceof Uuid)return`u${JSON.stringify(input.toString())}`;if(input instanceof RecordId||input instanceof StringRecordId)return`r${JSON.stringify(input.toString())}`;if(input instanceof Geometry)return toSurrealqlString(input.toJSON());if(input instanceof Decimal||input instanceof Duration||input instanceof Future||input instanceof Range||input instanceof Table)return input.toJSON();switch(Object.getPrototypeOf(input)){case Object.prototype:{let output2=\"{ \",entries=Object.entries(input);for(let[i,[k,v]]of entries.entries())output2+=`${JSON.stringify(k)}: ${toSurrealqlString(v)}`,i<entries.length-1&&(output2+=\", \");return output2+=\" }\",output2}case Map.prototype:{let output2=\"{ \",entries=Array.from(input.entries());for(let[i,[k,v]]of entries.entries())output2+=`${JSON.stringify(k)}: ${toSurrealqlString(v)}`,i<entries.length-1&&(output2+=\", \");return output2+=\" }\",output2}case Array.prototype:return`[ ${input.map(toSurrealqlString).join(\", \")} ]`;case Set.prototype:return`[ ${[...new Set([...input].map(toSurrealqlString))].join(\", \")} ]`}}return`${input}`}var Range=class _Range extends Value{constructor(beg,end){super();this.beg=beg;this.end=end}equals(other){return!(other instanceof _Range)||this.beg?.constructor!==other.beg?.constructor||this.end?.constructor!==other.end?.constructor?!1:equals(this.beg?.value,other.beg?.value)&&equals(this.end?.value,other.end?.value)}toJSON(){return this.toString()}toString(){let beg=escapeRangeBound(this.beg),end=escapeRangeBound(this.end);return`${beg}${getRangeJoin(this.beg,this.end)}${end}`}},BoundIncluded=class{constructor(value){this.value=value}},BoundExcluded=class{constructor(value){this.value=value}},RecordIdRange=class _RecordIdRange extends Value{constructor(tb,beg,end){super();this.tb=tb;this.beg=beg;this.end=end;if(typeof tb!=\"string\")throw new SurrealDbError(\"TB part is not valid\");if(!isValidIdBound(beg))throw new SurrealDbError(\"Beg part is not valid\");if(!isValidIdBound(end))throw new SurrealDbError(\"End part is not valid\")}equals(other){return!(other instanceof _RecordIdRange)||this.beg?.constructor!==other.beg?.constructor||this.end?.constructor!==other.end?.constructor?!1:this.tb===other.tb&&equals(this.beg?.value,other.beg?.value)&&equals(this.end?.value,other.end?.value)}toJSON(){return this.toString()}toString(){let tb=escapeIdent(this.tb),beg=escapeIdBound(this.beg),end=escapeIdBound(this.end);return`${tb}:${beg}${getRangeJoin(this.beg,this.end)}${end}`}};function getRangeJoin(beg,end){let output2=\"\";return beg instanceof BoundExcluded&&(output2+=\">\"),output2+=\"..\",end instanceof BoundIncluded&&(output2+=\"=\"),output2}function isValidIdBound(bound){return bound instanceof BoundIncluded||bound instanceof BoundExcluded?isValidIdPart(bound.value):!0}function escapeIdBound(bound){return bound instanceof BoundIncluded||bound instanceof BoundExcluded?escapeIdPart(bound.value):\"\"}function escapeRangeBound(bound){if(bound===void 0)return\"\";let value=bound.value;return bound instanceof Range?`(${toSurrealqlString(value)})`:toSurrealqlString(value)}function rangeToCbor([beg,end]){function encodeBound(bound){return bound instanceof BoundIncluded?new Tagged(TAG_BOUND_INCLUDED,bound.value):bound instanceof BoundExcluded?new Tagged(TAG_BOUND_EXCLUDED,bound.value):null}return[encodeBound(beg),encodeBound(end)]}function cborToRange(range){function decodeBound(bound){if(bound!==null){if(bound instanceof BoundIncluded||bound instanceof BoundExcluded)return bound;throw new SurrealDbError(\"Expected the bounds to be decoded already\")}}return[decodeBound(range[0]),decodeBound(range[1])]}var TAG_SPEC_DATETIME=0,TAG_SPEC_UUID=37,TAG_NONE=6,TAG_TABLE=7,TAG_RECORDID=8,TAG_STRING_UUID=9,TAG_STRING_DECIMAL=10,TAG_CUSTOM_DATETIME=12,TAG_STRING_DURATION=13,TAG_CUSTOM_DURATION=14,TAG_FUTURE=15,TAG_RANGE=49,TAG_BOUND_INCLUDED=50,TAG_BOUND_EXCLUDED=51,TAG_GEOMETRY_POINT=88,TAG_GEOMETRY_LINE=89,TAG_GEOMETRY_POLYGON=90,TAG_GEOMETRY_MULTIPOINT=91,TAG_GEOMETRY_MULTILINE=92,TAG_GEOMETRY_MULTIPOLYGON=93,TAG_GEOMETRY_COLLECTION=94,replacer={encode(v){return v instanceof Date?new Tagged(TAG_CUSTOM_DATETIME,dateToCborCustomDate(v)):v===void 0?new Tagged(TAG_NONE,null):v instanceof Uuid?new Tagged(TAG_SPEC_UUID,v.toBuffer()):v instanceof Decimal?new Tagged(TAG_STRING_DECIMAL,v.toString()):v instanceof Duration?new Tagged(TAG_CUSTOM_DURATION,v.toCompact()):v instanceof RecordId?new Tagged(TAG_RECORDID,[v.tb,v.id]):v instanceof StringRecordId?new Tagged(TAG_RECORDID,v.rid):v instanceof RecordIdRange?new Tagged(TAG_RECORDID,[v.tb,new Tagged(TAG_RANGE,rangeToCbor([v.beg,v.end]))]):v instanceof Table?new Tagged(TAG_TABLE,v.tb):v instanceof Future?new Tagged(TAG_FUTURE,v.inner):v instanceof Range?new Tagged(TAG_RANGE,rangeToCbor([v.beg,v.end])):v instanceof GeometryPoint?new Tagged(TAG_GEOMETRY_POINT,v.point):v instanceof GeometryLine?new Tagged(TAG_GEOMETRY_LINE,v.line):v instanceof GeometryPolygon?new Tagged(TAG_GEOMETRY_POLYGON,v.polygon):v instanceof GeometryMultiPoint?new Tagged(TAG_GEOMETRY_MULTIPOINT,v.points):v instanceof GeometryMultiLine?new Tagged(TAG_GEOMETRY_MULTILINE,v.lines):v instanceof GeometryMultiPolygon?new Tagged(TAG_GEOMETRY_MULTIPOLYGON,v.polygons):v instanceof GeometryCollection?new Tagged(TAG_GEOMETRY_COLLECTION,v.collection):v},decode(v){if(!(v instanceof Tagged))return v;switch(v.tag){case TAG_SPEC_DATETIME:return new Date(v.value);case TAG_SPEC_UUID:case TAG_STRING_UUID:return new Uuid(v.value);case TAG_CUSTOM_DATETIME:return cborCustomDateToDate(v.value);case TAG_NONE:return;case TAG_STRING_DECIMAL:return new Decimal(v.value);case TAG_STRING_DURATION:return new Duration(v.value);case TAG_CUSTOM_DURATION:return Duration.fromCompact(v.value);case TAG_TABLE:return new Table(v.value);case TAG_FUTURE:return new Future(v.value);case TAG_RANGE:return new Range(...cborToRange(v.value));case TAG_BOUND_INCLUDED:return new BoundIncluded(v.value);case TAG_BOUND_EXCLUDED:return new BoundExcluded(v.value);case TAG_RECORDID:return v.value[1]instanceof Range?new RecordIdRange(v.value[0],v.value[1].beg,v.value[1].end):new RecordId(v.value[0],v.value[1]);case TAG_GEOMETRY_POINT:return new GeometryPoint(v.value);case TAG_GEOMETRY_LINE:return new GeometryLine(v.value);case TAG_GEOMETRY_POLYGON:return new GeometryPolygon(v.value);case TAG_GEOMETRY_MULTIPOINT:return new GeometryMultiPoint(v.value);case TAG_GEOMETRY_MULTILINE:return new GeometryMultiLine(v.value);case TAG_GEOMETRY_MULTIPOLYGON:return new GeometryMultiPolygon(v.value);case TAG_GEOMETRY_COLLECTION:return new GeometryCollection(v.value)}}};Object.freeze(replacer);function encodeCbor(data){return encode(data,{replacer:replacer.encode})}function decodeCbor(data){return decode(data,{replacer:replacer.decode})}var textEncoder2,PreparedQuery=class{_query;_bindings;length;constructor(query,bindings){textEncoder2??=new TextEncoder,this._query=textEncoder2.encode(query),this._bindings=partiallyEncodeObject(bindings??{},{replacer:replacer.encode}),this.length=Object.keys(this._bindings).length}get query(){let w=new Writer(this._query.byteLength+9);return w.writeMajor(3,this._query.byteLength),w.writeUint8Array(this._query),new Encoded(w.output(!1))}get bindings(){return this._bindings}build(fills){return encode([this.query,this.bindings],{fills})}append(query_raw,...values){let base=this.length;this.length+=values.length;let reused=0,gaps=new Map,mapped_bindings=values.map((v,i)=>{if(v instanceof Gap){let index=gaps.get(v);if(index!==void 0)return reused++,[`bind___${index}`,v];gaps.set(v,i-reused)}return[`bind___${base+i-reused}`,v]});for(let[k,v]of mapped_bindings)this._bindings[k]=encode(v,{replacer:replacer.encode,partial:!0});let query=query_raw.flatMap((segment,i)=>{let variable=mapped_bindings[i]?.[0];return[segment,...variable?[`$${variable}`]:[]]}).join(\"\");textEncoder2??=new TextEncoder;let current=new Uint8Array(this._query),added=textEncoder2.encode(query);return this._query=new Uint8Array(current.byteLength+added.byteLength),this._query.set(current),this._query.set(added,current.byteLength),this}};function surrealql(query_raw,...values){let reused=0,gaps=new Map,mapped_bindings=values.map((v,i)=>{if(v instanceof Gap){let index=gaps.get(v);if(index!==void 0)return reused++,[`bind___${index}`,v];gaps.set(v,i-reused)}return[`bind___${i-reused}`,v]}),bindings=mapped_bindings.reduce((prev,[k,v])=>(prev[k]=v,prev),{}),query=query_raw.flatMap((segment,i)=>{let variable=mapped_bindings[i]?.[0];return[segment,...variable?[`$${variable}`]:[]]}).join(\"\");return new PreparedQuery(query,bindings)}function convertAuth(params){let result={},convertString=(a,b,optional)=>{if(a in params)result[b]=`${params[a]}`,delete result[a];else if(optional!==!0)throw new SurrealDbError(`Key ${a} is missing from the authentication parameters`)};return\"scope\"in params?(result={...params},convertString(\"scope\",\"sc\"),convertString(\"namespace\",\"ns\"),convertString(\"database\",\"db\")):\"variables\"in params?(result={...params.variables},convertString(\"access\",\"ac\"),convertString(\"namespace\",\"ns\"),convertString(\"database\",\"db\")):(convertString(\"access\",\"ac\",!0),convertString(\"database\",\"db\",!0),convertString(\"namespace\",\"ns\",!(\"database\"in params)),convertString(\"username\",\"user\"),convertString(\"password\",\"pass\")),result}var liveActions=[\"CREATE\",\"UPDATE\",\"DELETE\"];function isLiveResult(v){return!(typeof v!=\"object\"||v===null||!(\"id\"in v&&\"action\"in v&&\"result\"in v)||!(v.id instanceof Uuid)||!liveActions.includes(v.action)||typeof v.result!=\"object\"||v.result===null)}var DEFAULT_RECONNECT_OPTIONS={enabled:!0,attempts:5,retryDelay:1e3,retryDelayMax:6e4,retryDelayMultiplier:2,retryDelayJitter:.1};function jsonify(input){if(typeof input==\"object\"){if(input===null)return null;if(input instanceof Date||input instanceof Uuid||input instanceof Decimal||input instanceof Duration||input instanceof Future||input instanceof Range||input instanceof StringRecordId||input instanceof RecordIdRange||input instanceof RecordId||input instanceof Geometry||input instanceof Table)return input.toJSON();switch(Object.getPrototypeOf(input)){case Object.prototype:{let mapped=Object.entries(input).map(([k,v])=>[k,jsonify(v)]).filter(([_,v])=>v!==void 0);return Object.fromEntries(mapped)}case Map.prototype:{let mapped=Array.from(input).map(([k,v])=>[k,jsonify(v)]).filter(([_,v])=>v!==void 0);return new Map(mapped)}case Array.prototype:return input.map(jsonify);case Set.prototype:return new Set([...input].map(jsonify))}}return input}var defaultVersionCheckTimeout=5e3,supportedSurrealDbVersionMin=\"1.4.2\",supportedSurrealDbVersionUntil=\"3.0.0\",supportedSurrealDbVersionRange=`>= ${supportedSurrealDbVersionMin} < ${supportedSurrealDbVersionUntil}`;function versionCheck(version,min=supportedSurrealDbVersionMin,until=supportedSurrealDbVersionUntil){if(!isVersionSupported(version,min,until))throw new UnsupportedVersion(version,`>= ${min} < ${until}`);return!0}function isVersionSupported(version,min=supportedSurrealDbVersionMin,until=supportedSurrealDbVersionUntil){return min.localeCompare(version,void 0,{numeric:!0})<=0&&until.localeCompare(version,void 0,{numeric:!0})===1}async function retrieveRemoteVersion(url,timeout){let protocol={\"ws:\":\"http:\",\"wss:\":\"https:\",\"http:\":\"http:\",\"https:\":\"https:\"}[url.protocol];if(protocol){let basepath=url.pathname.slice(0,-4);url=new URL(url),url.pathname=`${basepath}/version`,url.protocol=protocol;let controller=new AbortController,id2=setTimeout(()=>controller.abort(),timeout??defaultVersionCheckTimeout),versionPrefix=\"surrealdb-\";return await fetch(url,{signal:controller.signal}).then(res=>res.text()).then(version2=>version2.slice(versionPrefix.length)).catch(e=>{throw new VersionRetrievalFailure(e)}).finally(()=>{clearTimeout(id2)})}throw new VersionRetrievalFailure}var id=0;function getIncrementalID(){return id=(id+1)%Number.MAX_SAFE_INTEGER,id.toString()}function s(string,...values){return string.reduce((prev,curr,i)=>`${prev}${curr}${values[i]??\"\"}`,\"\")}function d(string,...values){return new Date(s(string,values))}function r(string,...values){return new StringRecordId(s(string,values))}function u(string,...values){return new Uuid(s(string,values))}var RetryMessage=Symbol(\"RetryMessage\"),ConnectionStatus=(ConnectionStatus2=>(ConnectionStatus2.Disconnected=\"disconnected\",ConnectionStatus2.Connecting=\"connecting\",ConnectionStatus2.Reconnecting=\"reconnecting\",ConnectionStatus2.Connected=\"connected\",ConnectionStatus2.Error=\"error\",ConnectionStatus2))(ConnectionStatus||{}),EngineContext=class{emitter;encodeCbor;decodeCbor;reconnect;prepare;constructor({emitter,encodeCbor:encodeCbor2,decodeCbor:decodeCbor2,reconnect,prepare}){this.emitter=emitter,this.encodeCbor=encodeCbor2,this.decodeCbor=decodeCbor2,this.reconnect=reconnect,this.prepare=prepare}},AbstractEngine=class{context;ready;status=\"disconnected\";connection={url:void 0,namespace:void 0,database:void 0,token:void 0};constructor(context){this.context=context}get emitter(){return this.context.emitter}get encodeCbor(){return this.context.encodeCbor}get decodeCbor(){return this.context.decodeCbor}};function processAuthVars(vars,fallback){if(\"scope\"in vars||\"access\"in vars&&\"variables\"in vars&&vars.variables){if(!vars.namespace){if(!fallback?.namespace)throw new NoNamespaceSpecified;vars.namespace=fallback.namespace}if(!vars.database){if(!fallback?.database)throw new NoDatabaseSpecified;vars.database=fallback.database}}return vars}var AuthController=class{async signup(vars){if(!this.connection)throw new NoActiveSocket;let parsed=processAuthVars(vars,this.connection.connection),converted=convertAuth(parsed),res=await this.rpc(\"signup\",[converted]);if(res.error)throw new ResponseError(res.error.message);if(!res.result)throw new NoTokenReturned;return res.result}async signin(vars){if(!this.connection)throw new NoActiveSocket;let parsed=processAuthVars(vars,this.connection.connection),converted=convertAuth(parsed),res=await this.rpc(\"signin\",[converted]);if(res.error)throw new ResponseError(res.error.message);if(!res.result)throw new NoTokenReturned;return res.result}async authenticate(token){let res=await this.rpc(\"authenticate\",[token]);if(res.error)throw new ResponseError(res.error.message);return!0}async invalidate(){let res=await this.rpc(\"invalidate\");if(res.error)throw new ResponseError(res.error.message);return!0}},EngineAuth=class extends AuthController{constructor(connection){super();this.connection=connection}rpc(method,params){if(!this.connection)throw new NoActiveSocket;return this.connection.rpc({method,params},!0)}};var AbstractRemoteEngine=class extends AbstractEngine{async req_post(body,url,headers_){let headers={\"Content-Type\":\"application/cbor\",Accept:\"application/cbor\",...headers_};this.connection.namespace&&(headers[\"Surreal-NS\"]=this.connection.namespace),this.connection.database&&(headers[\"Surreal-DB\"]=this.connection.database),this.connection.token&&(headers.Authorization=`Bearer ${this.connection.token}`);let raw=await fetch(`${url??this.connection.url}`,{method:\"POST\",headers,body:this.encodeCbor(body)}),buffer=await raw.arrayBuffer();if(raw.status===200)return buffer;let dec=new TextDecoder(\"utf-8\");throw new HttpConnectionError(dec.decode(buffer),raw.status,raw.statusText,buffer)}};var ALWAYS_ALLOW=new Set([\"signin\",\"signup\",\"authenticate\",\"invalidate\",\"version\",\"use\",\"let\",\"unset\",\"query\"]),HttpEngine=class extends AbstractRemoteEngine{connection={url:void 0,namespace:void 0,database:void 0,token:void 0,variables:{}};setStatus(status,...args){this.status=status,this.emitter.emit(status,args)}version(url,timeout){return retrieveRemoteVersion(url,timeout)}async connect(url){return this.setStatus(\"connecting\"),this.connection.url=url,await this.context.prepare?.(new EngineAuth(this)),this.setStatus(\"connected\"),this.ready=new Promise(r2=>r2()),this.ready}disconnect(){return this.connection={url:void 0,namespace:void 0,database:void 0,token:void 0,variables:{}},this.ready=void 0,this.setStatus(\"disconnected\"),new Promise(r2=>r2())}async rpc(request,force){if(force||await this.ready,!this.connection.url)throw new ConnectionUnavailable;if((!this.connection.namespace||!this.connection.database)&&!ALWAYS_ALLOW.has(request.method))throw new MissingNamespaceDatabase;if(request.method===\"use\"){let[ns,db]=request.params;return ns===null&&(this.connection.namespace=void 0),db===null&&(this.connection.database=void 0),ns&&(this.connection.namespace=ns),db&&(this.connection.database=db),{result:!0}}if(request.method===\"let\"){let[key,value]=request.params;return this.connection.variables[key]=value,{result:!0}}if(request.method===\"unset\"){let[key]=request.params;return delete this.connection.variables[key],{result:!0}}request.method===\"query\"&&(request.params=[request.params?.[0],{...this.connection.variables,...request.params?.[1]??{}}]);let id2=getIncrementalID(),buffer=await this.req_post({id:id2,...request}),response=this.decodeCbor(buffer);if(\"result\"in response)switch(request.method){case\"signin\":case\"signup\":{this.connection.token=response.result;break}case\"authenticate\":{let[token]=request.params;this.connection.token=token;break}case\"invalidate\":{this.connection.token=void 0;break}}return this.emitter.emit(`rpc-${id2}`,[response]),response}get connected(){return!!this.connection.url}async export(options){if(!this.connection.url)throw new ConnectionUnavailable;let url=new URL(this.connection.url),basepath=url.pathname.slice(0,-4);url.pathname=`${basepath}/export`;let buffer=await this.req_post(options??{},url,{Accept:\"plain/text\"});return new TextDecoder(\"utf-8\").decode(buffer)}async import(data){if(!this.connection.url)throw new ConnectionUnavailable;let url=new URL(this.connection.url),basepath=url.pathname.slice(0,-4);url.pathname=`${basepath}/import`,await this.req_post(data,url,{Accept:\"application/json\"})}};function newCompletable(){let out={completed:!1};return out.promise=new Promise((resolve_,reject_)=>{out.resolve=arg=>{out.completed=!0,resolve_(arg)},out.reject=reason=>{out.completed=!0,reject_(reason)}}),out}var WebsocketEngine=class extends AbstractRemoteEngine{pinger;socket;disconnected;constructor(ctx){super(ctx),this.disconnected=newCompletable()}setStatus(status,...args){this.connection.url&&status===\"disconnected\"||status===\"error\"?(this.disconnected.resolve(),this.disconnected=newCompletable()):(this.status=status,this.emitter.emit(status,args))}async requireStatus(status){return this.status!==status&&await this.emitter.subscribeOnce(status),!0}version(url,timeout){return retrieveRemoteVersion(url,timeout)}async connect(url){this.connection.url=url,(async()=>{let initial=!0,controls;for(;this.connection.url;)if(initial)initial=!1,this.setStatus(\"connecting\"),this.ready=this.createSocket(),await this.disconnected.promise;else{if(!this.context.reconnect.enabled)break;if(!controls){let{promise,resolve:resolve2,reject:reject2}=newCompletable();this.ready=promise,controls=[resolve2,reject2]}let[resolve,reject]=controls;if(!this.context.reconnect.allowed){this.connection={url:void 0,namespace:void 0,database:void 0,token:void 0},this.socket=void 0,reject(new ReconnectFailed),this.emitter.emit(\"error\",[new ReconnectFailed]),this.setStatus(\"disconnected\");break}this.setStatus(\"reconnecting\"),await this.context.reconnect.iterate();try{await this.createSocket()}catch{continue}try{if(this.connection.namespace||this.connection.database){let res=await this.rpc({method:\"use\",params:[this.connection.namespace,this.connection.database]},!0);if(res.error)throw new ResponseError(res.error.message)}if(this.connection.token){let res=await this.rpc({method:\"authenticate\",params:[this.connection.token]},!0);if(res.error)throw new ResponseError(res.error.message)}}catch(e){this.connection={url:void 0,namespace:void 0,database:void 0,token:void 0},this.socket=void 0,reject(e),this.emitter.emit(\"error\",[e]),this.setStatus(\"disconnected\");break}this.context.reconnect.reset(),resolve(),this.emitter.scanListeners(k=>k.startsWith(\"rpc-\")).map(k=>this.emitter.emit(k,[RetryMessage])),this.status===\"connected\"&&await this.disconnected.promise}})(),await this.ready}async createSocket(){let{promise,resolve,reject}=newCompletable();if(!this.connection.url)throw new NoURLProvided;let socket=new isows__WEBPACK_IMPORTED_MODULE_1__.WebSocket(this.connection.url.toString(),\"cbor\");socket.addEventListener(\"open\",async()=>{this.socket=socket,await this.context.prepare?.(new EngineAuth(this)),this.setStatus(\"connected\"),this.pinger?.stop(),this.pinger=new Pinger(3e4),this.pinger.start(()=>{try{this.rpc({method:\"ping\"})}catch{}}),resolve()}),socket.addEventListener(\"error\",e=>{let error=new UnexpectedConnectionError(\"detail\"in e&&e.detail?e.detail:\"message\"in e&&e.message?e.message:\"error\"in e&&e.error?e.error:\"An unexpected error occurred\");this.setStatus(\"error\",error),reject(error)}),socket.addEventListener(\"close\",()=>{this.setStatus(\"disconnected\"),this.pinger?.stop()}),socket.addEventListener(\"message\",async({data})=>{try{let decoded=this.decodeCbor(data instanceof ArrayBuffer?data:data instanceof Blob?await data.arrayBuffer():data.buffer.slice(data.byteOffset,data.byteOffset+data.byteLength));if(typeof decoded==\"object\"&&decoded!=null&&Object.getPrototypeOf(decoded)===Object.prototype)this.handleRpcResponse(decoded);else throw new UnexpectedServerResponse(decoded)}catch(detail){socket.dispatchEvent(new CustomEvent(\"error\",{detail}))}}),await promise}async disconnect(){this.connection={url:void 0,namespace:void 0,database:void 0,token:void 0},await this.ready?.catch(()=>{}),this.socket?.close(),this.ready=void 0,this.socket=void 0,this.disconnected.resolve(),await Promise.any([this.requireStatus(\"disconnected\"),this.requireStatus(\"error\")])}async rpc(request,force){if(force||await this.ready,!this.socket)throw new ConnectionUnavailable;let res;for(;!res;){let id2=getIncrementalID(),response=this.emitter.subscribeOnce(`rpc-${id2}`);if(this.socket.send(this.encodeCbor({id:id2,...request})),force&&this.socket.readyState===isows__WEBPACK_IMPORTED_MODULE_1__.WebSocket.CLOSED)throw new EngineDisconnected;let[raw]=await response;if(raw instanceof EngineDisconnected)throw raw;raw!==RetryMessage&&(res=raw)}if(\"result\"in res)switch(request.method){case\"use\":{let[ns,db]=request.params;ns===null&&(this.connection.namespace=void 0),db===null&&(this.connection.database=void 0),ns&&(this.connection.namespace=ns),db&&(this.connection.database=db);break}case\"signin\":case\"signup\":{this.connection.token=res.result;break}case\"authenticate\":{let[token]=request.params;this.connection.token=token;break}case\"invalidate\":{this.connection.token=void 0;break}}return res}handleRpcResponse({id:id2,...res}){if(id2)this.emitter.emit(`rpc-${id2}`,[res]);else if(res.error)this.setStatus(\"error\",new ResponseError(res.error));else if(isLiveResult(res.result)){let{id:id3,action,result}=res.result;this.emitter.emit(`live-${id3}`,[action,result],!0)}else this.setStatus(\"error\",new UnexpectedServerResponse({id:id2,...res}))}get connected(){return!!this.socket}async export(options){if(!this.connection.url)throw new ConnectionUnavailable;let url=new URL(this.connection.url),basepath=url.pathname.slice(0,-4);url.protocol=url.protocol.replace(\"ws\",\"http\"),url.pathname=`${basepath}/export`;let buffer=await this.req_post(options??{},url,{Accept:\"plain/text\"});return new TextDecoder(\"utf-8\").decode(buffer)}async import(data){if(!this.connection.url)throw new ConnectionUnavailable;let url=new URL(this.connection.url),basepath=url.pathname.slice(0,-4);url.protocol=url.protocol.replace(\"ws\",\"http\"),url.pathname=`${basepath}/import`,await this.req_post(data,url,{Accept:\"application/json\"})}},Pinger=class{pinger;interval;constructor(interval=3e4){this.interval=interval}start(callback){this.pinger=setInterval(callback,this.interval)}stop(){clearInterval(this.pinger)}};function rand(min,max){return Math.random()*(max-min)+min}var ReconnectContext=class{_attempts=0;options;surreal;constructor(input,surreal){this.surreal=surreal,input?input===!0?this.options=DEFAULT_RECONNECT_OPTIONS:this.options={...DEFAULT_RECONNECT_OPTIONS,...input}:this.options={...DEFAULT_RECONNECT_OPTIONS,enabled:!1}}get attempts(){return this._attempts}get enabled(){return this.options.enabled}get allowed(){return!(!this.options.enabled||this.options.attempts!==-1&&this._attempts>=this.options.attempts)}reset(){this._attempts=0}async iterate(){if(!this.allowed)throw new ReconnectIterationError;this._attempts++;let multiplier=this.options.retryDelayMultiplier**this.attempts,adjustedDelay=this.options.retryDelay*multiplier,jitterModifier=rand(-this.options.retryDelayJitter,this.options.retryDelayJitter),nextDelay=Math.min(adjustedDelay*(1+jitterModifier),this.options.retryDelayMax);await new Promise(r2=>setTimeout(r2,nextDelay))}};var Surreal=class extends AuthController{connection;emitter;engines={ws:WebsocketEngine,wss:WebsocketEngine,http:HttpEngine,https:HttpEngine};_ready;constructor({engines}={}){super(),this.emitter=new Emitter,engines&&(this.engines={...this.engines,...engines})}async connect(url,opts={}){return this._ready=this.connectInner(url,opts),await this._ready,!0}async connectInner(url,opts={}){let endpoint=parseUrl(url),engineName=endpoint.protocol.slice(0,-1),engine=this.engines[engineName];if(!engine)throw new UnsupportedEngine(engineName);let{prepare,auth,namespace,database,reconnect}=opts;await this.close();let context=new EngineContext({emitter:this.emitter,encodeCbor,decodeCbor,reconnect:new ReconnectContext(reconnect,this),prepare}),connection=new engine(context);if(opts.versionCheck!==!1){let version=await connection.version(endpoint,opts.versionCheckTimeout);versionCheck(version)}this.connection=connection,await connection.connect(endpoint),(namespace||database)&&await this.use({namespace,database}),typeof auth==\"string\"?await this.authenticate(auth):auth&&await this.signin(auth)}async close(){return this.clean(),await this.connection?.disconnect(),!0}clean(){let pending=this.emitter.scanListeners(k=>k.startsWith(\"rpc-\"));pending.map(k=>this.emitter.emit(k,[new EngineDisconnected]));let live=this.emitter.scanListeners(k=>k.startsWith(\"live-\"));live.map(k=>this.emitter.emit(k,[\"CLOSE\",\"disconnected\"])),this.emitter.reset({collectable:!0,listeners:[...pending,...live]})}get status(){return this.connection?.status??\"disconnected\"}get ready(){return Promise.all([this._ready,this.connection?.ready]).then(()=>{})}async ping(){let{error}=await this.rpc(\"ping\");if(error)throw new ResponseError(error.message);return!0}async use({namespace,database}){if(!this.connection)throw new NoActiveSocket;if(namespace===null&&database!==null)throw new SurrealDbError(\"Cannot unset namespace without unsetting database\");let{error}=await this.rpc(\"use\",[namespace,database]);if(error)throw new ResponseError(error.message);return!0}async info(){await this.ready;let res=await this.rpc(\"info\");if(res.error)throw new ResponseError(res.error.message);return res.result??void 0}async let(variable,value){let res=await this.rpc(\"let\",[variable,value]);if(res.error)throw new ResponseError(res.error.message);return!0}async unset(variable){let res=await this.rpc(\"unset\",[variable]);if(res.error)throw new ResponseError(res.error.message);return!0}async live(table,callback,diff){await this.ready;let res=await this.rpc(\"live\",[table,diff]);if(res.error)throw new ResponseError(res.error.message);return callback&&this.subscribeLive(res.result,callback),res.result}async subscribeLive(queryUuid,callback){if(await this.ready,!this.connection)throw new NoActiveSocket;this.connection.emitter.subscribe(`live-${queryUuid}`,callback,!0)}async unSubscribeLive(queryUuid,callback){if(await this.ready,!this.connection)throw new NoActiveSocket;this.connection.emitter.unSubscribe(`live-${queryUuid}`,callback)}async kill(queryUuid){if(await this.ready,!this.connection)throw new NoActiveSocket;if(Array.isArray(queryUuid)){await Promise.all(queryUuid.map(u2=>this.rpc(\"kill\",[u2])));let toBeKilled=queryUuid.map(u2=>`live-${u2}`);toBeKilled.map(k=>this.emitter.emit(k,[\"CLOSE\",\"killed\"])),this.connection.emitter.reset({collectable:toBeKilled,listeners:toBeKilled})}else await this.rpc(\"kill\",[queryUuid]),this.emitter.emit(`live-${queryUuid}`,[\"CLOSE\",\"killed\"]),this.connection.emitter.reset({collectable:`live-${queryUuid}`,listeners:`live-${queryUuid}`})}async query(...args){return(await this.queryRaw(...args)).map(({status,result})=>{if(status===\"ERR\")throw new ResponseError(result);return result})}async queryRaw(...[q,b]){let params=q instanceof PreparedQuery?[q.query,partiallyEncodeObject(q.bindings,{fills:b,replacer:replacer.encode})]:[q,b];await this.ready;let res=await this.rpc(\"query\",params);if(res.error)throw new ResponseError(res.error.message);return res.result}async query_raw(...args){return this.queryRaw(...args)}async select(thing){await this.ready;let res=await this.rpc(\"select\",[thing]);if(res.error)throw new ResponseError(res.error.message);return output(thing,res.result)}async create(thing,data){await this.ready;let res=await this.rpc(\"create\",[thing,data]);if(res.error)throw new ResponseError(res.error.message);return output(thing,res.result)}async insert(arg1,arg2){await this.ready;let[table,data]=typeof arg1==\"string\"||arg1 instanceof Table?[arg1,arg2]:[void 0,arg1],res=await this.rpc(\"insert\",[table,data]);if(res.error)throw new ResponseError(res.error.message);return res.result}async insertRelation(arg1,arg2){await this.ready;let[table,data]=typeof arg1==\"string\"||arg1 instanceof Table?[arg1,arg2]:[void 0,arg1],res=await this.rpc(\"insert_relation\",[table,data]);if(res.error)throw new ResponseError(res.error.message);return res.result}async insert_relation(arg1,arg2){return arg1 instanceof Table||typeof arg1==\"string\"?this.insertRelation(arg1,arg2):this.insertRelation(arg1)}async update(thing,data){await this.ready;let res=await this.rpc(\"update\",[thing,data]);if(res.error)throw new ResponseError(res.error.message);return output(thing,res.result)}async upsert(thing,data){await this.ready;let res=await this.rpc(\"upsert\",[thing,data]);if(res.error)throw new ResponseError(res.error.message);return output(thing,res.result)}async merge(thing,data){await this.ready;let res=await this.rpc(\"merge\",[thing,data]);if(res.error)throw new ResponseError(res.error.message);return output(thing,res.result)}async patch(thing,data,diff){await this.ready;let res=await this.rpc(\"patch\",[thing,data,diff]);if(res.error)throw new ResponseError(res.error.message);return diff?res.result:output(thing,res.result)}async delete(thing){await this.ready;let res=await this.rpc(\"delete\",[thing]);if(res.error)throw new ResponseError(res.error.message);return output(thing,res.result)}async version(){await this.ready;let res=await this.rpc(\"version\");if(res.error)throw new ResponseError(res.error.message);return res.result}async run(name,arg2,arg3){await this.ready;let[version,args]=Array.isArray(arg2)?[void 0,arg2]:[arg2,arg3],res=await this.rpc(\"run\",[name,version,args]);if(res.error)throw new ResponseError(res.error.message);return res.result}async relate(from,thing,to,data){await this.ready;let res=await this.rpc(\"relate\",[from,thing,to,data]);if(res.error)throw new ResponseError(res.error.message);return output(thing,res.result)}rpc(method,params){if(!this.connection)throw new NoActiveSocket;return this.connection.rpc({method,params})}async export(options){if(await this.ready,!this.connection)throw new NoActiveSocket;return this.connection.export(options)}async import(input){if(await this.ready,!this.connection)throw new NoActiveSocket;return this.connection.import(input)}};function output(subject,input){return subject instanceof RecordId||subject instanceof StringRecordId?Array.isArray(input)?input[0]:input:Array.isArray(input)?input:[input]}function parseUrl(value){let url=new URL(value);return url.pathname.endsWith(\"/rpc\")||(url.pathname.endsWith(\"/\")||(url.pathname+=\"/\"),url.pathname+=\"rpc\"),url}\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3VycmVhbGRiL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsb0NBQW9DLDRCQUE0QiwyQ0FBMkMsNEJBQTRCLEdBQUcsa0JBQWtCLGVBQWUsYUFBYSxhQUFhLGFBQWEsYUFBYSxHQUFHLEVBQUUsbUNBQW1DLHNDQUFzQyxvS0FBb0ssbUNBQW1DLCtCQUErQiwwQ0FBMEMsdUNBQXVDLHNDQUFzQywwQ0FBMEMsd0ZBQXdGLDZCQUE2QixxQ0FBcUMsd0VBQXdFLGtDQUFrQyxFQUFFLDRCQUE0QiwwQkFBMEIsNERBQTRELG9IQUFvSCw2QkFBNkIsa0RBQWtELHNDQUFzQyxrR0FBa0csc0tBQXNLLHdFQUF3RSxPQUFPLHNCQUFzQixFQUFFLGtGQUFrRiw2R0FBNkcsRUFBRSw0RUFBNEUsbUdBQW1HLEVBQUUsc0JBQXNCLDBDQUEwQyxnRUFBZ0UsY0FBYyxRQUFRLHFCQUFxQixlQUFlLFlBQVksbUJBQW1CLGFBQWEsNEJBQTRCLGNBQWMsc0JBQXNCLG9CQUFvQix1QkFBdUIsa2hCQUFraEIsRUFBRSxtRUFBbUUsa0JBQWtCLHFCQUFxQix1QkFBdUIsd0NBQXdDLDZDQUE2QyxzQkFBc0IsNkdBQTZHLGtEQUFrRCwyQkFBMkIsOEdBQThHLGlEQUFpRCwwQkFBMEIsb0hBQW9ILGlEQUFpRCwwQkFBMEIsNEZBQTRGLDRDQUE0QyxxQkFBcUIsK0VBQStFLGlEQUFpRCwwQkFBMEIsc0VBQXNFLDhDQUE4Qyx1QkFBdUIsc0RBQXNELHNEQUFzRCwrQkFBK0IsbURBQW1ELHVEQUF1RCxzQkFBc0IsUUFBUSx1QkFBdUIsZ0JBQWdCLFNBQVMsRUFBRSxnQ0FBZ0Msd0RBQXdELG1CQUFtQixRQUFRLGlCQUFpQixnQkFBZ0IsTUFBTSxFQUFFLGlDQUFpQyxnREFBZ0Qsb0JBQW9C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OERBQThELHVDQUF1QywrQkFBK0IsNklBQTZJLHlCQUF5Qix1QkFBdUIsZ0hBQTA0QztBQUMxbDNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcnVwZWUtZmluYW5jZS10cmFja2VyLy4vbm9kZV9tb2R1bGVzL3N1cnJlYWxkYi9kaXN0L2luZGV4Lm1qcz8xZWQzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3A9T2JqZWN0LmRlZmluZVByb3BlcnR5O3ZhciBfX2V4cG9ydD0odGFyZ2V0LGFsbCk9Pntmb3IodmFyIG5hbWUgaW4gYWxsKV9fZGVmUHJvcCh0YXJnZXQsbmFtZSx7Z2V0OmFsbFtuYW1lXSxlbnVtZXJhYmxlOiEwfSl9O3ZhciBFbWl0dGVyPWNsYXNze2NvbGxlY3RhYmxlPXt9O2xpc3RlbmVycz17fTtpbnRlcmNlcHRvcnM7Y29uc3RydWN0b3Ioe2ludGVyY2VwdG9yc309e30pe3RoaXMuaW50ZXJjZXB0b3JzPWludGVyY2VwdG9ycz8/e319c3Vic2NyaWJlKGV2ZW50LGxpc3RlbmVyLGhpc3RvcmljPSExKXtpZih0aGlzLmxpc3RlbmVyc1tldmVudF18fCh0aGlzLmxpc3RlbmVyc1tldmVudF09W10pLCF0aGlzLmlzU3Vic2NyaWJlZChldmVudCxsaXN0ZW5lcikmJih0aGlzLmxpc3RlbmVyc1tldmVudF0/LnB1c2gobGlzdGVuZXIpLGhpc3RvcmljJiZ0aGlzLmNvbGxlY3RhYmxlW2V2ZW50XSkpe2xldCBidWZmZXI9dGhpcy5jb2xsZWN0YWJsZVtldmVudF07ZGVsZXRlIHRoaXMuY29sbGVjdGFibGVbZXZlbnRdO2ZvcihsZXQgYXJncyBvZiBidWZmZXIpbGlzdGVuZXIoLi4uYXJncyl9fWFzeW5jIHN1YnNjcmliZU9uY2UoZXZlbnQsaGlzdG9yaWM9ITEpe2lmKGhpc3RvcmljJiZ0aGlzLmNvbGxlY3RhYmxlW2V2ZW50XSl7bGV0IGFyZ3M9dGhpcy5jb2xsZWN0YWJsZVtldmVudF0/LnNoaWZ0KCk7aWYodGhpcy5jb2xsZWN0YWJsZVtldmVudF0/Lmxlbmd0aD09PTAmJmRlbGV0ZSB0aGlzLmNvbGxlY3RhYmxlW2V2ZW50XSxhcmdzKXJldHVybiBhcmdzfXJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlPT57bGV0IHJlc29sdmVkPSExLGxpc3RlbmVyPSguLi5hcmdzKT0+e3Jlc29sdmVkfHwocmVzb2x2ZWQ9ITAsdGhpcy51blN1YnNjcmliZShldmVudCxsaXN0ZW5lcikscmVzb2x2ZShhcmdzKSl9O3RoaXMuc3Vic2NyaWJlKGV2ZW50LGxpc3RlbmVyLCExKX0pfXVuU3Vic2NyaWJlKGV2ZW50LGxpc3RlbmVyKXtpZih0aGlzLmxpc3RlbmVyc1tldmVudF0pe2xldCBpbmRleD10aGlzLmxpc3RlbmVyc1tldmVudF0/LmZpbmRJbmRleCh2PT52PT09bGlzdGVuZXIpO2luZGV4Pj0wJiYodGhpcy5saXN0ZW5lcnNbZXZlbnRdPy5zcGxpY2UoaW5kZXgsMSksdGhpcy5saXN0ZW5lcnNbZXZlbnRdPy5sZW5ndGg9PT0wJiZkZWxldGUgdGhpcy5saXN0ZW5lcnNbZXZlbnRdKX19aXNTdWJzY3JpYmVkKGV2ZW50LGxpc3RlbmVyKXtyZXR1cm4hIXRoaXMubGlzdGVuZXJzW2V2ZW50XT8uaW5jbHVkZXMobGlzdGVuZXIpfWFzeW5jIGVtaXQoZXZlbnQsYXJncyxjb2xsZWN0YWJsZT0hMSl7bGV0IGludGVyY2VwdG9yPXRoaXMuaW50ZXJjZXB0b3JzW2V2ZW50XSxjb21wdXRlZEFyZ3M9aW50ZXJjZXB0b3I/YXdhaXQgaW50ZXJjZXB0b3IoLi4uYXJncyk6YXJnczsoY29sbGVjdGFibGUmJiF0aGlzLmxpc3RlbmVyc1tldmVudF18fHRoaXMubGlzdGVuZXJzW2V2ZW50XT8ubGVuZ3RoPT09MCkmJih0aGlzLmNvbGxlY3RhYmxlW2V2ZW50XXx8KHRoaXMuY29sbGVjdGFibGVbZXZlbnRdPVtdKSx0aGlzLmNvbGxlY3RhYmxlW2V2ZW50XT8ucHVzaChhcmdzKSk7Zm9yKGxldCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVyc1tldmVudF0/P1tdKWxpc3RlbmVyKC4uLmNvbXB1dGVkQXJncyl9cmVzZXQoe2NvbGxlY3RhYmxlLGxpc3RlbmVyc30pe2lmKEFycmF5LmlzQXJyYXkoY29sbGVjdGFibGUpKWZvcihsZXQgayBvZiBjb2xsZWN0YWJsZSlkZWxldGUgdGhpcy5jb2xsZWN0YWJsZVtrXTtlbHNlIHR5cGVvZiBjb2xsZWN0YWJsZT09XCJzdHJpbmdcIj9kZWxldGUgdGhpcy5jb2xsZWN0YWJsZVtjb2xsZWN0YWJsZV06Y29sbGVjdGFibGUhPT0hMSYmKHRoaXMuY29sbGVjdGFibGU9e30pO2lmKEFycmF5LmlzQXJyYXkobGlzdGVuZXJzKSlmb3IobGV0IGsgb2YgbGlzdGVuZXJzKWRlbGV0ZSB0aGlzLmxpc3RlbmVyc1trXTtlbHNlIHR5cGVvZiBsaXN0ZW5lcnM9PVwic3RyaW5nXCI/ZGVsZXRlIHRoaXMubGlzdGVuZXJzW2xpc3RlbmVyc106bGlzdGVuZXJzIT09ITEmJih0aGlzLmxpc3RlbmVycz17fSl9c2Nhbkxpc3RlbmVycyhmaWx0ZXIpe2xldCBsaXN0ZW5lcnM9T2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpO3JldHVybiBmaWx0ZXImJihsaXN0ZW5lcnM9bGlzdGVuZXJzLmZpbHRlcihmaWx0ZXIpKSxsaXN0ZW5lcnN9fTt2YXIgR2FwPWNsYXNze2FyZ3M9W107Y29uc3RydWN0b3IoLi4uYXJncyl7dGhpcy5hcmdzPWFyZ3N9ZmlsbCh2YWx1ZSl7cmV0dXJuW3RoaXMsdmFsdWVdfWhhc0RlZmF1bHQoKXtyZXR1cm4gdGhpcy5hcmdzLmxlbmd0aD09PTF9Z2V0IGRlZmF1bHQoKXtyZXR1cm4gdGhpcy5hcmdzWzBdfX07dmFyIGNib3JfZXhwb3J0cz17fTtfX2V4cG9ydChjYm9yX2V4cG9ydHMse0Nib3JCcmVhazooKT0+Q2JvckJyZWFrLENib3JFcnJvcjooKT0+Q2JvckVycm9yLENib3JGaWxsTWlzc2luZzooKT0+Q2JvckZpbGxNaXNzaW5nLENib3JJbnZhbGlkTWFqb3JFcnJvcjooKT0+Q2JvckludmFsaWRNYWpvckVycm9yLENib3JOdW1iZXJFcnJvcjooKT0+Q2Jvck51bWJlckVycm9yLENib3JQYXJ0aWFsRGlzYWJsZWQ6KCk9PkNib3JQYXJ0aWFsRGlzYWJsZWQsQ2JvclJhbmdlRXJyb3I6KCk9PkNib3JSYW5nZUVycm9yLEVuY29kZWQ6KCk9PkVuY29kZWQsR2FwOigpPT5HYXAsUE9XXzJfNTM6KCk9PlBPV18yXzUzLFBPV18yXzY0OigpPT5QT1dfMl82NCxQYXJ0aWFsbHlFbmNvZGVkOigpPT5QYXJ0aWFsbHlFbmNvZGVkLFJlYWRlcjooKT0+UmVhZGVyLFRhZ2dlZDooKT0+VGFnZ2VkLFdyaXRlcjooKT0+V3JpdGVyLGRlY29kZTooKT0+ZGVjb2RlLGVuY29kZTooKT0+ZW5jb2RlLGluZmluaXRlQnl0ZXM6KCk9PmluZmluaXRlQnl0ZXMscGFydGlhbGx5RW5jb2RlT2JqZWN0OigpPT5wYXJ0aWFsbHlFbmNvZGVPYmplY3R9KTt2YXIgUE9XXzJfNTM9OTAwNzE5OTI1NDc0MDk5MixQT1dfMl82ND1CaWdJbnQoMTg0NDY3NDQwNzM3MDk1NTJlMyk7dmFyIEVuY29kZWQ9Y2xhc3N7Y29uc3RydWN0b3IoZW5jb2RlZCl7dGhpcy5lbmNvZGVkPWVuY29kZWR9fTt2YXIgU3VycmVhbERiRXJyb3I9Y2xhc3MgZXh0ZW5kcyBFcnJvcnt9LE5vQWN0aXZlU29ja2V0PWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIk5vQWN0aXZlU29ja2V0XCI7bWVzc2FnZT1cIk5vIHNvY2tldCBpcyBjdXJyZW50bHkgY29ubmVjdGVkIHRvIGEgU3VycmVhbERCIGluc3RhbmNlLiBQbGVhc2UgY2FsbCB0aGUgLmNvbm5lY3QoKSBtZXRob2QgZmlyc3QhXCJ9LE5vQ29ubmVjdGlvbkRldGFpbHM9Y2xhc3MgZXh0ZW5kcyBTdXJyZWFsRGJFcnJvcntuYW1lPVwiTm9Db25uZWN0aW9uRGV0YWlsc1wiO21lc3NhZ2U9XCJObyBjb25uZWN0aW9uIGRldGFpbHMgZm9yIHRoZSBIVFRQIGFwaSBoYXZlIGJlZW4gcHJvdmlkZWQuIFBsZWFzZSBjYWxsIHRoZSAuY29ubmVjdCgpIG1ldGhvZCBmaXJzdCFcIn0sVW5leHBlY3RlZFJlc3BvbnNlPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIlVuZXhwZWN0ZWRSZXNwb25zZVwiO21lc3NhZ2U9XCJUaGUgcmV0dXJuZWQgcmVzcG9uc2UgZnJvbSB0aGUgU3VycmVhbERCIGluc3RhbmNlIGlzIGluIGFuIHVuZXhwZWN0ZWQgZm9ybWF0LiBVbmFibGUgdG8gcHJvY2VzcyByZXNwb25zZSFcIn0sSW52YWxpZFVSTFByb3ZpZGVkPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIkludmFsaWRVUkxQcm92aWRlZFwiO21lc3NhZ2U9XCJUaGUgcHJvdmlkZWQgc3RyaW5nIGlzIGVpdGhlciBub3QgYSBVUkwgb3IgaXMgYSBVUkwgYnV0IHdpdGggYW4gaW52YWxpZCBwcm90b2NvbCFcIn0sTm9VUkxQcm92aWRlZD1jbGFzcyBleHRlbmRzIFN1cnJlYWxEYkVycm9ye25hbWU9XCJOb1VSTFByb3ZpZGVkXCI7bWVzc2FnZT1cIlRyaWVkIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gd2hpbGUgbm8gY29ubmVjdGlvbiBVUkwgd2FzIHByb3ZpZGVkXCJ9LEVuZ2luZURpc2Nvbm5lY3RlZD1jbGFzcyBleHRlbmRzIFN1cnJlYWxEYkVycm9ye25hbWU9XCJFbmdpbmVEaXNjb25uZWN0ZWRcIjttZXNzYWdlPVwiVGhlIGVuZ2luZSByZXBvcnRlZCB0aGUgY29ubmVjdGlvbiB0byBTdXJyZWFsREIgaGFzIGRyb3BwZWRcIn0sUmVjb25uZWN0RmFpbGVkPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIlJlY29ubmVjdEZhaWxlZFwiO21lc3NhZ2U9XCJUaGUgZW5naW5lIGZhaWxlZCB0byByZWNvbm5lY3QgdG8gU3VycmVhbERCXCJ9LFJlY29ubmVjdEl0ZXJhdGlvbkVycm9yPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIlJlY29ubmVjdEl0ZXJhdGlvbkVycm9yXCI7bWVzc2FnZT1cIlRoZSByZWNvbm5lY3QgaXRlcmF0b3IgZmFpbGVkIHRvIGl0ZXJhdGVcIn0sVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7Y29uc3RydWN0b3IocmVzcG9uc2Upe3N1cGVyKCk7dGhpcy5yZXNwb25zZT1yZXNwb25zZTt0aGlzLm1lc3NhZ2U9YCR7cmVzcG9uc2V9YH1uYW1lPVwiVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlXCJ9LFVuZXhwZWN0ZWRDb25uZWN0aW9uRXJyb3I9Y2xhc3MgZXh0ZW5kcyBTdXJyZWFsRGJFcnJvcntjb25zdHJ1Y3RvcihlcnJvcil7c3VwZXIoKTt0aGlzLmVycm9yPWVycm9yO3RoaXMubWVzc2FnZT1gJHtlcnJvcn1gfW5hbWU9XCJVbmV4cGVjdGVkQ29ubmVjdGlvbkVycm9yXCJ9LFVuc3VwcG9ydGVkRW5naW5lPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7Y29uc3RydWN0b3IoZW5naW5lKXtzdXBlcigpO3RoaXMuZW5naW5lPWVuZ2luZX1uYW1lPVwiVW5zdXBwb3J0ZWRFbmdpbmVcIjttZXNzYWdlPVwiVGhlIGVuZ2luZSB5b3UgYXJlIHRyeWluZyB0byBjb25uZWN0IHRvIGlzIG5vdCBzdXBwb3J0ZWQgb3IgY29uZmlndXJlZC5cIn0sRmVhdHVyZVVuYXZhaWxhYmxlRm9yRW5naW5lPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIkZlYXR1cmVVbmF2YWlsYWJsZUZvckVuZ2luZVwiO21lc3NhZ2U9XCJUaGUgZmVhdHVyZSB5b3UgYXJlIHRyeWluZyB0byB1c2UgaXMgbm90IGF2YWlsYWJsZSBvbiB0aGlzIGVuZ2luZS5cIn0sQ29ubmVjdGlvblVuYXZhaWxhYmxlPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIkNvbm5lY3Rpb25VbmF2YWlsYWJsZVwiO21lc3NhZ2U9XCJUaGVyZSBpcyBubyBjb25uZWN0aW9uIGF2YWlsYWJsZSBhdCB0aGlzIG1vbWVudC5cIn0sTWlzc2luZ05hbWVzcGFjZURhdGFiYXNlPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIk1pc3NpbmdOYW1lc3BhY2VEYXRhYmFzZVwiO21lc3NhZ2U9XCJUaGVyZSBpcyBubyBuYW1lc3BhY2UgYW5kL29yIGRhdGFiYXNlIHNlbGVjdGVkLlwifSxIdHRwQ29ubmVjdGlvbkVycm9yPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7Y29uc3RydWN0b3IobWVzc2FnZSxzdGF0dXMsc3RhdHVzVGV4dCxidWZmZXIpe3N1cGVyKCk7dGhpcy5tZXNzYWdlPW1lc3NhZ2U7dGhpcy5zdGF0dXM9c3RhdHVzO3RoaXMuc3RhdHVzVGV4dD1zdGF0dXNUZXh0O3RoaXMuYnVmZmVyPWJ1ZmZlcn1uYW1lPVwiSHR0cENvbm5lY3Rpb25FcnJvclwifSxSZXNwb25zZUVycm9yPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7Y29uc3RydWN0b3IobWVzc2FnZSl7c3VwZXIoKTt0aGlzLm1lc3NhZ2U9bWVzc2FnZX1uYW1lPVwiUmVzcG9uc2VFcnJvclwifSxOb05hbWVzcGFjZVNwZWNpZmllZD1jbGFzcyBleHRlbmRzIFN1cnJlYWxEYkVycm9ye25hbWU9XCJOb05hbWVzcGFjZVNwZWNpZmllZFwiO21lc3NhZ2U9XCJQbGVhc2Ugc3BlY2lmeSBhIG5hbWVzcGFjZSB0byB1c2UuXCJ9LE5vRGF0YWJhc2VTcGVjaWZpZWQ9Y2xhc3MgZXh0ZW5kcyBTdXJyZWFsRGJFcnJvcntuYW1lPVwiTm9EYXRhYmFzZVNwZWNpZmllZFwiO21lc3NhZ2U9XCJQbGVhc2Ugc3BlY2lmeSBhIGRhdGFiYXNlIHRvIHVzZS5cIn0sTm9Ub2tlblJldHVybmVkPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7bmFtZT1cIk5vVG9rZW5SZXR1cm5lZFwiO21lc3NhZ2U9XCJEaWQgbm90IHJlY2VpdmUgYW4gYXV0aGVudGljYXRpb24gdG9rZW4uXCJ9LFVuc3VwcG9ydGVkVmVyc2lvbj1jbGFzcyBleHRlbmRzIFN1cnJlYWxEYkVycm9ye25hbWU9XCJVbnN1cHBvcnRlZFZlcnNpb25cIjt2ZXJzaW9uO3N1cHBvcnRlZFJhbmdlO2NvbnN0cnVjdG9yKHZlcnNpb24sc3VwcG9ydGVkUmFuZ2Upe3N1cGVyKCksdGhpcy52ZXJzaW9uPXZlcnNpb24sdGhpcy5zdXBwb3J0ZWRSYW5nZT1zdXBwb3J0ZWRSYW5nZSx0aGlzLm1lc3NhZ2U9YFRoZSB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiIHJlcG9ydGVkIGJ5IHRoZSBlbmdpbmUgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGxpYnJhcnksIGV4cGVjdGVkIGEgdmVyc2lvbiB0aGF0IHNhdGlzZmllcyBcIiR7c3VwcG9ydGVkUmFuZ2V9XCIuYH19LFZlcnNpb25SZXRyaWV2YWxGYWlsdXJlPWNsYXNzIGV4dGVuZHMgU3VycmVhbERiRXJyb3J7Y29uc3RydWN0b3IoZXJyb3Ipe3N1cGVyKCk7dGhpcy5lcnJvcj1lcnJvcn1uYW1lPVwiVmVyc2lvblJldHJpZXZhbEZhaWx1cmVcIjttZXNzYWdlPVwiRmFpbGVkIHRvIHJldHJpZXZlIHJlbW90ZSB2ZXJzaW9uLiBJZiB0aGUgc2VydmVyIGlzIGJlaGluZCBhIHByb3h5LCBtYWtlIHN1cmUgaXQncyBjb25maWd1cmVkIGNvcnJlY3RseS5cIn07dmFyIENib3JFcnJvcj1jbGFzcyBleHRlbmRzIFN1cnJlYWxEYkVycm9ye21lc3NhZ2U7Y29uc3RydWN0b3IobWVzc2FnZSl7c3VwZXIoKSx0aGlzLm1lc3NhZ2U9bWVzc2FnZX19LENib3JOdW1iZXJFcnJvcj1jbGFzcyBleHRlbmRzIENib3JFcnJvcntuYW1lPVwiQ2Jvck51bWJlckVycm9yXCJ9LENib3JSYW5nZUVycm9yPWNsYXNzIGV4dGVuZHMgQ2JvckVycm9ye25hbWU9XCJDYm9yUmFuZ2VFcnJvclwifSxDYm9ySW52YWxpZE1ham9yRXJyb3I9Y2xhc3MgZXh0ZW5kcyBDYm9yRXJyb3J7bmFtZT1cIkNib3JJbnZhbGlkTWFqb3JFcnJvclwifSxDYm9yQnJlYWs9Y2xhc3MgZXh0ZW5kcyBDYm9yRXJyb3J7bmFtZT1cIkNib3JCcmVha1wiO2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJDYW1lIGFjcm9zcyBhIGJyZWFrIHdoaWNoIHdhcyBub3QgaW50ZXJjZXB0ZWQgYnkgdGhlIGRlY29kZXJcIil9fSxDYm9yUGFydGlhbERpc2FibGVkPWNsYXNzIGV4dGVuZHMgQ2JvckVycm9ye25hbWU9XCJDYm9yUGFydGlhbERpc2FibGVkXCI7Y29uc3RydWN0b3IoKXtzdXBlcihcIlRyaWVkIHRvIGluc2VydCBhIEdhcCBpbnRvIGEgQ0JPUiB2YWx1ZSwgd2hpbGUgcGFydGlhbCBtb2RlIGlzIG5vdCBlbmFibGVkXCIpfX0sQ2JvckZpbGxNaXNzaW5nPWNsYXNzIGV4dGVuZHMgQ2JvckVycm9ye25hbWU9XCJDYm9yRmlsbE1pc3NpbmdcIjtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwiRmlsbCBmb3IgYSBnYXAgaXMgbWlzc2luZywgYW5kIGdhcCBoYXMgbm8gZGVmYXVsdFwiKX19O3ZhciBXcml0ZXI9Y2xhc3N7Y29uc3RydWN0b3IoYnl0ZUxlbmd0aD0yNTYpe3RoaXMuYnl0ZUxlbmd0aD1ieXRlTGVuZ3RoO3RoaXMuX2J1Zj1uZXcgQXJyYXlCdWZmZXIodGhpcy5ieXRlTGVuZ3RoKSx0aGlzLl92aWV3PW5ldyBEYXRhVmlldyh0aGlzLl9idWYpLHRoaXMuX2J5dGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5fYnVmKX1fY2h1bmtzPVtdO19wb3M9MDtfYnVmO192aWV3O19ieXRlO2NodW5rKGdhcCl7dGhpcy5fY2h1bmtzLnB1c2goW3RoaXMuX2J1Zi5zbGljZSgwLHRoaXMuX3BvcyksZ2FwXSksdGhpcy5fYnVmPW5ldyBBcnJheUJ1ZmZlcih0aGlzLmJ5dGVMZW5ndGgpLHRoaXMuX3ZpZXc9bmV3IERhdGFWaWV3KHRoaXMuX2J1ZiksdGhpcy5fYnl0ZT1uZXcgVWludDhBcnJheSh0aGlzLl9idWYpLHRoaXMuX3Bvcz0wfWdldCBjaHVua3MoKXtyZXR1cm4gdGhpcy5fY2h1bmtzfWdldCBidWZmZXIoKXtyZXR1cm4gdGhpcy5fYnVmLnNsaWNlKDAsdGhpcy5fcG9zKX1jbGFpbShsZW5ndGgpe2xldCBwb3M9dGhpcy5fcG9zO2lmKHRoaXMuX3Bvcys9bGVuZ3RoLHRoaXMuX3Bvczw9dGhpcy5fYnVmLmJ5dGVMZW5ndGgpcmV0dXJuIHBvcztsZXQgbmV3TGVuPXRoaXMuX2J1Zi5ieXRlTGVuZ3RoPDwxO2Zvcig7bmV3TGVuPHRoaXMuX3BvczspbmV3TGVuPDw9MTtpZihuZXdMZW4+dGhpcy5fYnVmLmJ5dGVMZW5ndGgpe2xldCBvbGRiPXRoaXMuX2J5dGU7dGhpcy5fYnVmPW5ldyBBcnJheUJ1ZmZlcihuZXdMZW4pLHRoaXMuX3ZpZXc9bmV3IERhdGFWaWV3KHRoaXMuX2J1ZiksdGhpcy5fYnl0ZT1uZXcgVWludDhBcnJheSh0aGlzLl9idWYpLHRoaXMuX2J5dGUuc2V0KG9sZGIpfXJldHVybiBwb3N9d3JpdGVVaW50OCh2YWx1ZSl7bGV0IHBvcz10aGlzLmNsYWltKDEpO3RoaXMuX3ZpZXcuc2V0VWludDgocG9zLHZhbHVlKX13cml0ZVVpbnQxNih2YWx1ZSl7bGV0IHBvcz10aGlzLmNsYWltKDIpO3RoaXMuX3ZpZXcuc2V0VWludDE2KHBvcyx2YWx1ZSl9d3JpdGVVaW50MzIodmFsdWUpe2xldCBwb3M9dGhpcy5jbGFpbSg0KTt0aGlzLl92aWV3LnNldFVpbnQzMihwb3MsdmFsdWUpfXdyaXRlVWludDY0KHZhbHVlKXtsZXQgcG9zPXRoaXMuY2xhaW0oOCk7dGhpcy5fdmlldy5zZXRCaWdVaW50NjQocG9zLHZhbHVlKX13cml0ZVVpbnQ4QXJyYXkoZGF0YSl7aWYoZGF0YS5ieXRlTGVuZ3RoPT09MClyZXR1cm47bGV0IHBvcz10aGlzLmNsYWltKGRhdGEuYnl0ZUxlbmd0aCk7dGhpcy5fYnl0ZS5zZXQoZGF0YSxwb3MpfXdyaXRlQXJyYXlCdWZmZXIoZGF0YSl7ZGF0YS5ieXRlTGVuZ3RoIT09MCYmdGhpcy53cml0ZVVpbnQ4QXJyYXkobmV3IFVpbnQ4QXJyYXkoZGF0YSkpfXdyaXRlUGFydGlhbGx5RW5jb2RlZChkYXRhKXtmb3IobGV0W2J1ZixnYXBdb2YgZGF0YS5jaHVua3MpdGhpcy53cml0ZUFycmF5QnVmZmVyKGJ1ZiksdGhpcy5jaHVuayhnYXApO3RoaXMud3JpdGVBcnJheUJ1ZmZlcihkYXRhLmVuZCl9d3JpdGVGbG9hdDMyKHZhbHVlKXtsZXQgcG9zPXRoaXMuY2xhaW0oNCk7dGhpcy5fdmlldy5zZXRGbG9hdDMyKHBvcyx2YWx1ZSl9d3JpdGVGbG9hdDY0KHZhbHVlKXtsZXQgcG9zPXRoaXMuY2xhaW0oOCk7dGhpcy5fdmlldy5zZXRGbG9hdDY0KHBvcyx2YWx1ZSl9d3JpdGVNYWpvcih0eXBlLGxlbmd0aCl7bGV0IGJhc2U9dHlwZTw8NTtsZW5ndGg8MjQ/dGhpcy53cml0ZVVpbnQ4KGJhc2UrTnVtYmVyKGxlbmd0aCkpOmxlbmd0aDwyNTY/KHRoaXMud3JpdGVVaW50OChiYXNlKzI0KSx0aGlzLndyaXRlVWludDgoTnVtYmVyKGxlbmd0aCkpKTpsZW5ndGg8NjU1MzY/KHRoaXMud3JpdGVVaW50OChiYXNlKzI1KSx0aGlzLndyaXRlVWludDE2KE51bWJlcihsZW5ndGgpKSk6bGVuZ3RoPDQyOTQ5NjcyOTY/KHRoaXMud3JpdGVVaW50OChiYXNlKzI2KSx0aGlzLndyaXRlVWludDMyKE51bWJlcihsZW5ndGgpKSk6KHRoaXMud3JpdGVVaW50OChiYXNlKzI3KSx0aGlzLndyaXRlVWludDY0KEJpZ0ludChsZW5ndGgpKSl9b3V0cHV0KHBhcnRpYWwscmVwbGFjZXIyKXtyZXR1cm4gcGFydGlhbD9uZXcgUGFydGlhbGx5RW5jb2RlZCh0aGlzLl9jaHVua3MsdGhpcy5idWZmZXIscmVwbGFjZXIyKTp0aGlzLmJ1ZmZlcn19O3ZhciBQYXJ0aWFsbHlFbmNvZGVkPWNsYXNze2NvbnN0cnVjdG9yKGNodW5rcyxlbmQscmVwbGFjZXIyKXt0aGlzLmNodW5rcz1jaHVua3M7dGhpcy5lbmQ9ZW5kO3RoaXMucmVwbGFjZXI9cmVwbGFjZXIyfWJ1aWxkKGZpbGxzLHBhcnRpYWwpe2xldCB3cml0ZXI9bmV3IFdyaXRlcixtYXA9bmV3IE1hcChmaWxscyk7Zm9yKGxldFtidWZmZXIsZ2FwXW9mIHRoaXMuY2h1bmtzKXtsZXQgaGFzVmFsdWU9bWFwLmhhcyhnYXApfHxnYXAuaGFzRGVmYXVsdCgpO2lmKCFwYXJ0aWFsJiYhaGFzVmFsdWUpdGhyb3cgbmV3IENib3JGaWxsTWlzc2luZztpZih3cml0ZXIud3JpdGVBcnJheUJ1ZmZlcihidWZmZXIpLGhhc1ZhbHVlKXtsZXQgZGF0YT1tYXAuZ2V0KGdhcCk/P2dhcC5kZWZhdWx0O2VuY29kZShkYXRhLHt3cml0ZXIscmVwbGFjZXI6dGhpcy5yZXBsYWNlcn0pfWVsc2Ugd3JpdGVyLmNodW5rKGdhcCl9cmV0dXJuIHdyaXRlci53cml0ZUFycmF5QnVmZmVyKHRoaXMuZW5kKSx3cml0ZXIub3V0cHV0KCEhcGFydGlhbCx0aGlzLnJlcGxhY2VyKX19O2Z1bmN0aW9uIHBhcnRpYWxseUVuY29kZU9iamVjdChvYmplY3Qsb3B0aW9ucyl7cmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmplY3QpLm1hcCgoW2ssdl0pPT5bayxlbmNvZGUodix7Li4ub3B0aW9ucyxwYXJ0aWFsOiEwfSldKSl9dmFyIFRhZ2dlZD1jbGFzc3tjb25zdHJ1Y3Rvcih0YWcsdmFsdWUpe3RoaXMudGFnPXRhZzt0aGlzLnZhbHVlPXZhbHVlfX07dmFyIHRleHRFbmNvZGVyO2Z1bmN0aW9uIGVuY29kZShpbnB1dCxvcHRpb25zPXt9KXtsZXQgdz1vcHRpb25zLndyaXRlcj8/bmV3IFdyaXRlcixmaWxsc01hcD1uZXcgTWFwKG9wdGlvbnMuZmlsbHM/P1tdKTtmdW5jdGlvbiBpbm5lcihpbnB1dDIpe2xldCB2YWx1ZT1vcHRpb25zLnJlcGxhY2VyP29wdGlvbnMucmVwbGFjZXIoaW5wdXQyKTppbnB1dDI7aWYodmFsdWU9PT12b2lkIDApcmV0dXJuIHcud3JpdGVVaW50OCgyNDcpO2lmKHZhbHVlPT09bnVsbClyZXR1cm4gdy53cml0ZVVpbnQ4KDI0Nik7aWYodmFsdWU9PT0hMClyZXR1cm4gdy53cml0ZVVpbnQ4KDI0NSk7aWYodmFsdWU9PT0hMSlyZXR1cm4gdy53cml0ZVVpbnQ4KDI0NCk7c3dpdGNoKHR5cGVvZiB2YWx1ZSl7Y2FzZVwibnVtYmVyXCI6e2lmKE51bWJlci5pc0ludGVnZXIodmFsdWUpKWlmKHZhbHVlPj0wJiZ2YWx1ZTw9OTAwNzE5OTI1NDc0MDk5Mil3LndyaXRlTWFqb3IoMCx2YWx1ZSk7ZWxzZSBpZih2YWx1ZTwwJiZ2YWx1ZT49LTkwMDcxOTkyNTQ3NDA5OTIpdy53cml0ZU1ham9yKDEsLSh2YWx1ZSsxKSk7ZWxzZSB0aHJvdyBuZXcgQ2Jvck51bWJlckVycm9yKFwiTnVtYmVyIHRvbyBiaWcgdG8gYmUgZW5jb2RlZFwiKTtlbHNlIHcud3JpdGVVaW50OCgyNTEpLHcud3JpdGVGbG9hdDY0KHZhbHVlKTtyZXR1cm59Y2FzZVwiYmlnaW50XCI6e2lmKHZhbHVlPj0wJiZ2YWx1ZTxQT1dfMl82NCl3LndyaXRlTWFqb3IoMCx2YWx1ZSk7ZWxzZSBpZih2YWx1ZTw9MCYmdmFsdWU+PS1QT1dfMl82NCl3LndyaXRlTWFqb3IoMSwtKHZhbHVlKzFuKSk7ZWxzZSB0aHJvdyBuZXcgQ2Jvck51bWJlckVycm9yKFwiQmlnSW50IHRvbyBiaWcgdG8gYmUgZW5jb2RlZFwiKTtyZXR1cm59Y2FzZVwic3RyaW5nXCI6e3RleHRFbmNvZGVyPz89bmV3IFRleHRFbmNvZGVyO2xldCBlbmNvZGVkPXRleHRFbmNvZGVyLmVuY29kZSh2YWx1ZSk7dy53cml0ZU1ham9yKDMsZW5jb2RlZC5ieXRlTGVuZ3RoKSx3LndyaXRlVWludDhBcnJheShlbmNvZGVkKTtyZXR1cm59ZGVmYXVsdDp7aWYoQXJyYXkuaXNBcnJheSh2YWx1ZSkpe3cud3JpdGVNYWpvcig0LHZhbHVlLmxlbmd0aCk7Zm9yKGxldCB2IG9mIHZhbHVlKWlubmVyKHYpO3JldHVybn1pZih2YWx1ZSBpbnN0YW5jZW9mIFRhZ2dlZCl7dy53cml0ZU1ham9yKDYsdmFsdWUudGFnKSxpbm5lcih2YWx1ZS52YWx1ZSk7cmV0dXJufWlmKHZhbHVlIGluc3RhbmNlb2YgRW5jb2RlZCl7dy53cml0ZUFycmF5QnVmZmVyKHZhbHVlLmVuY29kZWQpO3JldHVybn1pZih2YWx1ZSBpbnN0YW5jZW9mIEdhcCl7aWYoZmlsbHNNYXAuaGFzKHZhbHVlKSlpbm5lcihmaWxsc01hcC5nZXQodmFsdWUpKTtlbHNle2lmKCFvcHRpb25zLnBhcnRpYWwpdGhyb3cgbmV3IENib3JQYXJ0aWFsRGlzYWJsZWQ7dy5jaHVuayh2YWx1ZSl9cmV0dXJufWlmKHZhbHVlIGluc3RhbmNlb2YgUGFydGlhbGx5RW5jb2RlZCl7bGV0IHJlcz12YWx1ZS5idWlsZChvcHRpb25zLmZpbGxzPz9bXSxvcHRpb25zLnBhcnRpYWwpO29wdGlvbnMucGFydGlhbD93LndyaXRlUGFydGlhbGx5RW5jb2RlZChyZXMpOncud3JpdGVBcnJheUJ1ZmZlcihyZXMpO3JldHVybn1pZih2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fHZhbHVlIGluc3RhbmNlb2YgVWludDE2QXJyYXl8fHZhbHVlIGluc3RhbmNlb2YgVWludDMyQXJyYXl8fHZhbHVlIGluc3RhbmNlb2YgSW50OEFycmF5fHx2YWx1ZSBpbnN0YW5jZW9mIEludDE2QXJyYXl8fHZhbHVlIGluc3RhbmNlb2YgSW50MzJBcnJheXx8dmFsdWUgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXl8fHZhbHVlIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5fHx2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXtsZXQgdj1uZXcgVWludDhBcnJheSh2YWx1ZSk7dy53cml0ZU1ham9yKDIsdi5ieXRlTGVuZ3RoKSx3LndyaXRlVWludDhBcnJheSh2KTtyZXR1cm59bGV0IGVudHJpZXM9dmFsdWUgaW5zdGFuY2VvZiBNYXA/QXJyYXkuZnJvbSh2YWx1ZS5lbnRyaWVzKCkpOk9iamVjdC5lbnRyaWVzKHZhbHVlKTt3LndyaXRlTWFqb3IoNSxlbnRyaWVzLmxlbmd0aCk7Zm9yKGxldCB2IG9mIGVudHJpZXMuZmxhdCgpKWlubmVyKHYpfX19cmV0dXJuIGlubmVyKGlucHV0KSx3Lm91dHB1dCghIW9wdGlvbnMucGFydGlhbCxvcHRpb25zLnJlcGxhY2VyKX12YXIgUmVhZGVyPWNsYXNze19idWY7X3ZpZXc7X2J5dGU7X3Bvcz0wO2NvbnN0cnVjdG9yKGJ1ZmZlcil7dGhpcy5fYnVmPW5ldyBBcnJheUJ1ZmZlcihidWZmZXIuYnl0ZUxlbmd0aCksdGhpcy5fdmlldz1uZXcgRGF0YVZpZXcodGhpcy5fYnVmKSx0aGlzLl9ieXRlPW5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZiksdGhpcy5fYnl0ZS5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSl9cmVhZChhbW91bnQscmVzKXtyZXR1cm4gdGhpcy5fcG9zKz1hbW91bnQscmVzfXJlYWRVaW50OCgpe3RyeXtyZXR1cm4gdGhpcy5yZWFkKDEsdGhpcy5fdmlldy5nZXRVaW50OCh0aGlzLl9wb3MpKX1jYXRjaChlKXt0aHJvdyBlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcj9uZXcgQ2JvclJhbmdlRXJyb3IoZS5tZXNzYWdlKTplfX1yZWFkVWludDE2KCl7dHJ5e3JldHVybiB0aGlzLnJlYWQoMix0aGlzLl92aWV3LmdldFVpbnQxNih0aGlzLl9wb3MpKX1jYXRjaChlKXt0aHJvdyBlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcj9uZXcgQ2JvclJhbmdlRXJyb3IoZS5tZXNzYWdlKTplfX1yZWFkVWludDMyKCl7dHJ5e3JldHVybiB0aGlzLnJlYWQoNCx0aGlzLl92aWV3LmdldFVpbnQzMih0aGlzLl9wb3MpKX1jYXRjaChlKXt0aHJvdyBlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcj9uZXcgQ2JvclJhbmdlRXJyb3IoZS5tZXNzYWdlKTplfX1yZWFkVWludDY0KCl7dHJ5e3JldHVybiB0aGlzLnJlYWQoOCx0aGlzLl92aWV3LmdldEJpZ1VpbnQ2NCh0aGlzLl9wb3MpKX1jYXRjaChlKXt0aHJvdyBlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcj9uZXcgQ2JvclJhbmdlRXJyb3IoZS5tZXNzYWdlKTplfX1yZWFkRmxvYXQxNigpe2xldCBieXRlcz10aGlzLnJlYWRVaW50MTYoKSxzMj0oYnl0ZXMmMzI3NjgpPj4xNSxlPShieXRlcyYzMTc0NCk+PjEwLGYyPWJ5dGVzJjEwMjM7cmV0dXJuIGU9PT0wPyhzMj8tMToxKSoyKiotMTQqKGYyLzIqKjEwKTplPT09MzE/ZjI/TnVtYmVyLk5hTjooczI/LTE6MSkqTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOihzMj8tMToxKSoyKiooZS0xNSkqKDErZjIvMioqMTApfXJlYWRGbG9hdDMyKCl7dHJ5e3JldHVybiB0aGlzLnJlYWQoNCx0aGlzLl92aWV3LmdldEZsb2F0MzIodGhpcy5fcG9zKSl9Y2F0Y2goZSl7dGhyb3cgZSBpbnN0YW5jZW9mIFJhbmdlRXJyb3I/bmV3IENib3JSYW5nZUVycm9yKGUubWVzc2FnZSk6ZX19cmVhZEZsb2F0NjQoKXt0cnl7cmV0dXJuIHRoaXMucmVhZCg4LHRoaXMuX3ZpZXcuZ2V0RmxvYXQ2NCh0aGlzLl9wb3MpKX1jYXRjaChlKXt0aHJvdyBlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcj9uZXcgQ2JvclJhbmdlRXJyb3IoZS5tZXNzYWdlKTplfX1yZWFkQnl0ZXMoYW1vdW50KXtsZXQgYXZhaWxhYmxlPXRoaXMuX2J5dGUubGVuZ3RoLXRoaXMuX3BvcztpZihhdmFpbGFibGU8YW1vdW50KXRocm93IG5ldyBDYm9yUmFuZ2VFcnJvcihgVGhlIGFyZ3VtZW50IG11c3QgYmUgYmV0d2VlbiAwIGFuZCAke2F2YWlsYWJsZX1gKTtyZXR1cm4gdGhpcy5yZWFkKGFtb3VudCx0aGlzLl9ieXRlLnNsaWNlKHRoaXMuX3Bvcyx0aGlzLl9wb3MrYW1vdW50KSl9cmVhZE1ham9yKCl7bGV0IGJ5dGU9dGhpcy5yZWFkVWludDgoKSxtYWpvcj1ieXRlPj41O2lmKG1ham9yPDB8fG1ham9yPjcpdGhyb3cgbmV3IENib3JJbnZhbGlkTWFqb3JFcnJvcihcIlJlY2VpdmVkIGludmFsaWQgbWFqb3IgdHlwZVwiKTtyZXR1cm5bbWFqb3IsYnl0ZSYzMV19cmVhZE1ham9yTGVuZ3RoKGxlbmd0aCl7aWYobGVuZ3RoPD0yMylyZXR1cm4gbGVuZ3RoO3N3aXRjaChsZW5ndGgpe2Nhc2UgMjQ6cmV0dXJuIHRoaXMucmVhZFVpbnQ4KCk7Y2FzZSAyNTpyZXR1cm4gdGhpcy5yZWFkVWludDE2KCk7Y2FzZSAyNjpyZXR1cm4gdGhpcy5yZWFkVWludDMyKCk7Y2FzZSAyNzp7bGV0IHJlYWQ9dGhpcy5yZWFkVWludDY0KCk7cmV0dXJuIHJlYWQ+OTAwNzE5OTI1NDc0MDk5Mj9yZWFkOk51bWJlcihyZWFkKX19dGhyb3cgbmV3IENib3JSYW5nZUVycm9yKFwiRXhwZWN0ZWQgYSBmaW5hbCBsZW5ndGhcIil9fTtmdW5jdGlvbiBpbmZpbml0ZUJ5dGVzKHIyLGZvck1ham9yKXtsZXQgdz1uZXcgV3JpdGVyO2Zvcig7Oyl7bGV0W21ham9yLGxlbl09cjIucmVhZE1ham9yKCk7aWYobWFqb3I9PT03JiZsZW49PT0zMSlicmVhaztpZihtYWpvciE9PWZvck1ham9yKXRocm93IG5ldyBDYm9ySW52YWxpZE1ham9yRXJyb3IoYEV4cGVjdGVkIGEgcmVzb3VyY2Ugb2YgdGhlIHNhbWUgbWFqb3IgKCR7Zm9yTWFqb3J9KSB3aGlsZSBwcm9jZXNzaW5nIGFuIGluZmluaXRlIHJlc291cmNlYCk7aWYobGVuPT09MzEpdGhyb3cgbmV3IENib3JSYW5nZUVycm9yKFwiRXhwZWN0ZWQgYSBmaW5pdGUgcmVzb3VyY2Ugd2hpbGUgcHJvY2Vzc2luZyBhbiBpbmZpbml0ZSByZXNvdXJjZVwiKTt3LndyaXRlVWludDhBcnJheShyMi5yZWFkQnl0ZXMoTnVtYmVyKHIyLnJlYWRNYWpvckxlbmd0aChsZW4pKSkpfXJldHVybiB3LmJ1ZmZlcn12YXIgdGV4dERlY29kZXI7ZnVuY3Rpb24gZGVjb2RlKGlucHV0LG9wdGlvbnM9e30pe2xldCByMj1pbnB1dCBpbnN0YW5jZW9mIFJlYWRlcj9pbnB1dDpuZXcgUmVhZGVyKGlucHV0KTtmdW5jdGlvbiBpbm5lcigpe2xldFttYWpvcixsZW5dPXIyLnJlYWRNYWpvcigpO3N3aXRjaChtYWpvcil7Y2FzZSAwOnJldHVybiByMi5yZWFkTWFqb3JMZW5ndGgobGVuKTtjYXNlIDE6e2xldCBsPXIyLnJlYWRNYWpvckxlbmd0aChsZW4pO3JldHVybiB0eXBlb2YgbD09XCJiaWdpbnRcIj8tKGwrMW4pOi0obCsxKX1jYXNlIDI6cmV0dXJuIGxlbj09PTMxP2luZmluaXRlQnl0ZXMocjIsMik6cjIucmVhZEJ5dGVzKE51bWJlcihyMi5yZWFkTWFqb3JMZW5ndGgobGVuKSkpLmJ1ZmZlcjtjYXNlIDM6e2xldCBlbmNvZGVkPWxlbj09PTMxP2luZmluaXRlQnl0ZXMocjIsMyk6cjIucmVhZEJ5dGVzKE51bWJlcihyMi5yZWFkTWFqb3JMZW5ndGgobGVuKSkpO3JldHVybiB0ZXh0RGVjb2Rlcj8/PW5ldyBUZXh0RGVjb2Rlcix0ZXh0RGVjb2Rlci5kZWNvZGUoZW5jb2RlZCl9Y2FzZSA0OntpZihsZW49PT0zMSl7bGV0IGFycjI9W107Zm9yKDs7KXRyeXthcnIyLnB1c2goZGVjb2RlMigpKX1jYXRjaChlKXtpZihlIGluc3RhbmNlb2YgQ2JvckJyZWFrKWJyZWFrO3Rocm93IGV9cmV0dXJuIGFycjJ9bGV0IGw9cjIucmVhZE1ham9yTGVuZ3RoKGxlbiksYXJyPUFycmF5KGwpO2ZvcihsZXQgaT0wO2k8bDtpKyspYXJyW2ldPWRlY29kZTIoKTtyZXR1cm4gYXJyfWNhc2UgNTp7bGV0IGVudHJpZXM9W107aWYobGVuPT09MzEpZm9yKDs7KXtsZXQga2V5O3RyeXtrZXk9ZGVjb2RlMigpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBDYm9yQnJlYWspYnJlYWs7dGhyb3cgZX1sZXQgdmFsdWU9ZGVjb2RlMigpO2VudHJpZXMucHVzaChba2V5LHZhbHVlXSl9ZWxzZXtsZXQgbD1yMi5yZWFkTWFqb3JMZW5ndGgobGVuKTtmb3IobGV0IGk9MDtpPGw7aSsrKXtsZXQga2V5PWRlY29kZTIoKSx2YWx1ZT1kZWNvZGUyKCk7ZW50cmllc1tpXT1ba2V5LHZhbHVlXX19cmV0dXJuIG9wdGlvbnMubWFwPT09XCJtYXBcIj9uZXcgTWFwKGVudHJpZXMpOk9iamVjdC5mcm9tRW50cmllcyhlbnRyaWVzKX1jYXNlIDY6e2xldCB0YWc9cjIucmVhZE1ham9yTGVuZ3RoKGxlbiksdmFsdWU9ZGVjb2RlMigpO3JldHVybiBuZXcgVGFnZ2VkKHRhZyx2YWx1ZSl9Y2FzZSA3OnN3aXRjaChsZW4pe2Nhc2UgMjA6cmV0dXJuITE7Y2FzZSAyMTpyZXR1cm4hMDtjYXNlIDIyOnJldHVybiBudWxsO2Nhc2UgMjM6cmV0dXJuO2Nhc2UgMjU6cmV0dXJuIHIyLnJlYWRGbG9hdDE2KCk7Y2FzZSAyNjpyZXR1cm4gcjIucmVhZEZsb2F0MzIoKTtjYXNlIDI3OnJldHVybiByMi5yZWFkRmxvYXQ2NCgpO2Nhc2UgMzE6dGhyb3cgbmV3IENib3JCcmVha319dGhyb3cgbmV3IENib3JJbnZhbGlkTWFqb3JFcnJvcihgVW5hYmxlIHRvIGRlY29kZSB2YWx1ZSB3aXRoIG1ham9yIHRhZyAke21ham9yfWApfWZ1bmN0aW9uIGRlY29kZTIoKXtyZXR1cm4gb3B0aW9ucy5yZXBsYWNlcj9vcHRpb25zLnJlcGxhY2VyKGlubmVyKCkpOmlubmVyKCl9cmV0dXJuIGRlY29kZTIoKX1mdW5jdGlvbiBkYXRlVG9DYm9yQ3VzdG9tRGF0ZShkYXRlKXtsZXQgczI9TWF0aC5mbG9vcihkYXRlLmdldFRpbWUoKS8xZTMpLG1zPWRhdGUuZ2V0VGltZSgpLXMyKjFlMztyZXR1cm5bczIsbXMqMWU2XX1mdW5jdGlvbiBjYm9yQ3VzdG9tRGF0ZVRvRGF0ZShbczIsbnNdKXtsZXQgZGF0ZT1uZXcgRGF0ZSgwKTtyZXR1cm4gZGF0ZS5zZXRVVENTZWNvbmRzKE51bWJlcihzMikpLGRhdGUuc2V0TWlsbGlzZWNvbmRzKE1hdGguZmxvb3IoTnVtYmVyKG5zKS8xZTYpKSxkYXRlfXZhciBWYWx1ZT1jbGFzc3t9O3ZhciBEZWNpbWFsPWNsYXNzIF9EZWNpbWFsIGV4dGVuZHMgVmFsdWV7ZGVjaW1hbDtjb25zdHJ1Y3RvcihkZWNpbWFsKXtzdXBlcigpLHRoaXMuZGVjaW1hbD1kZWNpbWFsLnRvU3RyaW5nKCl9ZXF1YWxzKG90aGVyKXtyZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBfRGVjaW1hbD90aGlzLmRlY2ltYWw9PT1vdGhlci5kZWNpbWFsOiExfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuZGVjaW1hbH10b0pTT04oKXtyZXR1cm4gdGhpcy5kZWNpbWFsfX07dmFyIG1pbGxpc2Vjb25kPTEsbWljcm9zZWNvbmQ9bWlsbGlzZWNvbmQvMWUzLG5hbm9zZWNvbmQ9bWljcm9zZWNvbmQvMWUzLHNlY29uZD0xZTMqbWlsbGlzZWNvbmQsbWludXRlPTYwKnNlY29uZCxob3VyPTYwKm1pbnV0ZSxkYXk9MjQqaG91cix3ZWVrPTcqZGF5LHVuaXRzPW5ldyBNYXAoW1tcIm5zXCIsbmFub3NlY29uZF0sW1wiXFx4QjVzXCIsbWljcm9zZWNvbmRdLFtcIlxcdTAzQkNzXCIsbWljcm9zZWNvbmRdLFtcInVzXCIsbWljcm9zZWNvbmRdLFtcIm1zXCIsbWlsbGlzZWNvbmRdLFtcInNcIixzZWNvbmRdLFtcIm1cIixtaW51dGVdLFtcImhcIixob3VyXSxbXCJkXCIsZGF5XSxbXCJ3XCIsd2Vla11dKSx1bml0c1JldmVyc2U9QXJyYXkuZnJvbSh1bml0cykucmVkdWNlKChtYXAsW3VuaXQsc2l6ZV0pPT4obWFwLnNldChzaXplLHVuaXQpLG1hcCksbmV3IE1hcCksZHVyYXRpb25QYXJ0UmVnZXg9bmV3IFJlZ0V4cChgXihcXFxcZCspKCR7QXJyYXkuZnJvbSh1bml0cy5rZXlzKCkpLmpvaW4oXCJ8XCIpfSlgKSxEdXJhdGlvbj1jbGFzcyBfRHVyYXRpb24gZXh0ZW5kcyBWYWx1ZXtfbWlsbGlzZWNvbmRzO2NvbnN0cnVjdG9yKGlucHV0KXtzdXBlcigpLGlucHV0IGluc3RhbmNlb2YgX0R1cmF0aW9uP3RoaXMuX21pbGxpc2Vjb25kcz1pbnB1dC5fbWlsbGlzZWNvbmRzOnR5cGVvZiBpbnB1dD09XCJzdHJpbmdcIj90aGlzLl9taWxsaXNlY29uZHM9X0R1cmF0aW9uLnBhcnNlU3RyaW5nKGlucHV0KTp0aGlzLl9taWxsaXNlY29uZHM9aW5wdXR9c3RhdGljIGZyb21Db21wYWN0KFtzMixuc10pe3MyPXMyPz8wLG5zPW5zPz8wO2xldCBtcz1zMioxZTMrbnMvMWU2O3JldHVybiBuZXcgX0R1cmF0aW9uKG1zKX1lcXVhbHMob3RoZXIpe3JldHVybiBvdGhlciBpbnN0YW5jZW9mIF9EdXJhdGlvbj90aGlzLl9taWxsaXNlY29uZHM9PT1vdGhlci5fbWlsbGlzZWNvbmRzOiExfXRvQ29tcGFjdCgpe2xldCBzMj1NYXRoLmZsb29yKHRoaXMuX21pbGxpc2Vjb25kcy8xZTMpLG5zPU1hdGguZmxvb3IoKHRoaXMuX21pbGxpc2Vjb25kcy1zMioxZTMpKjFlNik7cmV0dXJuIG5zPjA/W3MyLG5zXTpzMj4wP1tzMl06W119dG9TdHJpbmcoKXtsZXQgbGVmdD10aGlzLl9taWxsaXNlY29uZHMscmVzdWx0PVwiXCI7ZnVuY3Rpb24gc2NyYXAoc2l6ZSl7bGV0IG51bT1NYXRoLmZsb29yKGxlZnQvc2l6ZSk7cmV0dXJuIG51bT4wJiYobGVmdD1sZWZ0JXNpemUpLG51bX1mb3IobGV0W3NpemUsdW5pdF1vZiBBcnJheS5mcm9tKHVuaXRzUmV2ZXJzZSkucmV2ZXJzZSgpKXtsZXQgc2NyYXBwZWQ9c2NyYXAoc2l6ZSk7c2NyYXBwZWQ+MCYmKHJlc3VsdCs9YCR7c2NyYXBwZWR9JHt1bml0fWApfXJldHVybiByZXN1bHR9dG9KU09OKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKX1zdGF0aWMgcGFyc2VTdHJpbmcoaW5wdXQpe2xldCBtcz0wLGxlZnQ9aW5wdXQ7Zm9yKDtsZWZ0IT09XCJcIjspe2xldCBtYXRjaD1sZWZ0Lm1hdGNoKGR1cmF0aW9uUGFydFJlZ2V4KTtpZihtYXRjaCl7bGV0IGFtb3VudD1OdW1iZXIucGFyc2VJbnQobWF0Y2hbMV0pLGZhY3Rvcj11bml0cy5nZXQobWF0Y2hbMl0pO2lmKGZhY3Rvcj09PXZvaWQgMCl0aHJvdyBuZXcgU3VycmVhbERiRXJyb3IoYEludmFsaWQgZHVyYXRpb24gdW5pdDogJHttYXRjaFsyXX1gKTttcys9YW1vdW50KmZhY3RvcixsZWZ0PWxlZnQuc2xpY2UobWF0Y2hbMF0ubGVuZ3RoKTtjb250aW51ZX10aHJvdyBuZXcgU3VycmVhbERiRXJyb3IoXCJDb3VsZCBub3QgbWF0Y2ggYSBuZXh0IGR1cmF0aW9uIHBhcnRcIil9cmV0dXJuIG1zfXN0YXRpYyBuYW5vc2Vjb25kcyhuYW5vc2Vjb25kcyl7cmV0dXJuIG5ldyBfRHVyYXRpb24oTWF0aC5mbG9vcihuYW5vc2Vjb25kcypuYW5vc2Vjb25kKSl9c3RhdGljIG1pY3Jvc2Vjb25kcyhtaWNyb3NlY29uZHMpe3JldHVybiBuZXcgX0R1cmF0aW9uKE1hdGguZmxvb3IobWljcm9zZWNvbmRzKm1pY3Jvc2Vjb25kKSl9c3RhdGljIG1pbGxpc2Vjb25kcyhtaWxsaXNlY29uZHMpe3JldHVybiBuZXcgX0R1cmF0aW9uKG1pbGxpc2Vjb25kcyl9c3RhdGljIHNlY29uZHMoc2Vjb25kcyl7cmV0dXJuIG5ldyBfRHVyYXRpb24oc2Vjb25kcypzZWNvbmQpfXN0YXRpYyBtaW51dGVzKG1pbnV0ZXMpe3JldHVybiBuZXcgX0R1cmF0aW9uKG1pbnV0ZXMqbWludXRlKX1zdGF0aWMgaG91cnMoaG91cnMpe3JldHVybiBuZXcgX0R1cmF0aW9uKGhvdXJzKmhvdXIpfXN0YXRpYyBkYXlzKGRheXMpe3JldHVybiBuZXcgX0R1cmF0aW9uKGRheXMqZGF5KX1zdGF0aWMgd2Vla3Mod2Vla3Mpe3JldHVybiBuZXcgX0R1cmF0aW9uKHdlZWtzKndlZWspfWdldCBtaWNyb3NlY29uZHMoKXtyZXR1cm4gTWF0aC5mbG9vcih0aGlzLl9taWxsaXNlY29uZHMvbWljcm9zZWNvbmQpfWdldCBuYW5vc2Vjb25kcygpe3JldHVybiBNYXRoLmZsb29yKHRoaXMuX21pbGxpc2Vjb25kcy9uYW5vc2Vjb25kKX1nZXQgbWlsbGlzZWNvbmRzKCl7cmV0dXJuIE1hdGguZmxvb3IodGhpcy5fbWlsbGlzZWNvbmRzKX1nZXQgc2Vjb25kcygpe3JldHVybiBNYXRoLmZsb29yKHRoaXMuX21pbGxpc2Vjb25kcy9zZWNvbmQpfWdldCBtaW51dGVzKCl7cmV0dXJuIE1hdGguZmxvb3IodGhpcy5fbWlsbGlzZWNvbmRzL21pbnV0ZSl9Z2V0IGhvdXJzKCl7cmV0dXJuIE1hdGguZmxvb3IodGhpcy5fbWlsbGlzZWNvbmRzL2hvdXIpfWdldCBkYXlzKCl7cmV0dXJuIE1hdGguZmxvb3IodGhpcy5fbWlsbGlzZWNvbmRzL2RheSl9Z2V0IHdlZWtzKCl7cmV0dXJuIE1hdGguZmxvb3IodGhpcy5fbWlsbGlzZWNvbmRzL3dlZWspfX07dmFyIEZ1dHVyZT1jbGFzcyBfRnV0dXJlIGV4dGVuZHMgVmFsdWV7Y29uc3RydWN0b3IoaW5uZXIpe3N1cGVyKCk7dGhpcy5pbm5lcj1pbm5lcn1lcXVhbHMob3RoZXIpe3JldHVybiBvdGhlciBpbnN0YW5jZW9mIF9GdXR1cmU/dGhpcy5pbm5lcj09PW90aGVyLmlubmVyOiExfXRvSlNPTigpe3JldHVybiB0aGlzLnRvU3RyaW5nKCl9dG9TdHJpbmcoKXtyZXR1cm5gPGZ1dHVyZT4gJHt0aGlzLmlubmVyfWB9fTt2YXIgR2VvbWV0cnk9Y2xhc3MgX0dlb21ldHJ5IGV4dGVuZHMgVmFsdWV7ZXF1YWxzKG90aGVyKXtyZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBfR2VvbWV0cnk/dGhpcy5pcyhvdGhlcik6ITF9dG9TdHJpbmcoKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSl9fTtmdW5jdGlvbiBmKG51bSl7cmV0dXJuIG51bSBpbnN0YW5jZW9mIERlY2ltYWw/TnVtYmVyLnBhcnNlRmxvYXQobnVtLmRlY2ltYWwpOm51bX12YXIgR2VvbWV0cnlQb2ludD1jbGFzcyBfR2VvbWV0cnlQb2ludCBleHRlbmRzIEdlb21ldHJ5e3BvaW50O2NvbnN0cnVjdG9yKHBvaW50KXtzdXBlcigpLHBvaW50IGluc3RhbmNlb2YgX0dlb21ldHJ5UG9pbnQ/dGhpcy5wb2ludD1wb2ludC5jbG9uZSgpLnBvaW50OnRoaXMucG9pbnQ9W2YocG9pbnRbMF0pLGYocG9pbnRbMV0pXX10b0pTT04oKXtyZXR1cm57dHlwZTpcIlBvaW50XCIsY29vcmRpbmF0ZXM6dGhpcy5jb29yZGluYXRlc319Z2V0IGNvb3JkaW5hdGVzKCl7cmV0dXJuIHRoaXMucG9pbnR9aXMoZ2VvbWV0cnkpe3JldHVybiBnZW9tZXRyeSBpbnN0YW5jZW9mIF9HZW9tZXRyeVBvaW50P3RoaXMucG9pbnRbMF09PT1nZW9tZXRyeS5wb2ludFswXSYmdGhpcy5wb2ludFsxXT09PWdlb21ldHJ5LnBvaW50WzFdOiExfWNsb25lKCl7cmV0dXJuIG5ldyBfR2VvbWV0cnlQb2ludChbLi4udGhpcy5wb2ludF0pfX0sR2VvbWV0cnlMaW5lPWNsYXNzIF9HZW9tZXRyeUxpbmUgZXh0ZW5kcyBHZW9tZXRyeXtsaW5lO2NvbnN0cnVjdG9yKGxpbmUpe3N1cGVyKCksdGhpcy5saW5lPWxpbmUgaW5zdGFuY2VvZiBfR2VvbWV0cnlMaW5lP2xpbmUuY2xvbmUoKS5saW5lOmxpbmV9dG9KU09OKCl7cmV0dXJue3R5cGU6XCJMaW5lU3RyaW5nXCIsY29vcmRpbmF0ZXM6dGhpcy5jb29yZGluYXRlc319Z2V0IGNvb3JkaW5hdGVzKCl7cmV0dXJuIHRoaXMubGluZS5tYXAoZz0+Zy5jb29yZGluYXRlcyl9Y2xvc2UoKXt0aGlzLmxpbmVbMF0uaXModGhpcy5saW5lLmF0KC0xKSl8fHRoaXMubGluZS5wdXNoKHRoaXMubGluZVswXSl9aXMoZ2VvbWV0cnkpe2lmKCEoZ2VvbWV0cnkgaW5zdGFuY2VvZiBfR2VvbWV0cnlMaW5lKXx8dGhpcy5saW5lLmxlbmd0aCE9PWdlb21ldHJ5LmxpbmUubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgaT0wO2k8dGhpcy5saW5lLmxlbmd0aDtpKyspaWYoIXRoaXMubGluZVtpXS5pcyhnZW9tZXRyeS5saW5lW2ldKSlyZXR1cm4hMTtyZXR1cm4hMH1jbG9uZSgpe3JldHVybiBuZXcgX0dlb21ldHJ5TGluZSh0aGlzLmxpbmUubWFwKHA9PnAuY2xvbmUoKSkpfX0sR2VvbWV0cnlQb2x5Z29uPWNsYXNzIF9HZW9tZXRyeVBvbHlnb24gZXh0ZW5kcyBHZW9tZXRyeXtwb2x5Z29uO2NvbnN0cnVjdG9yKHBvbHlnb24pe3N1cGVyKCksdGhpcy5wb2x5Z29uPXBvbHlnb24gaW5zdGFuY2VvZiBfR2VvbWV0cnlQb2x5Z29uP3BvbHlnb24uY2xvbmUoKS5wb2x5Z29uOnBvbHlnb24ubWFwKGw9PntsZXQgbGluZT1sLmNsb25lKCk7cmV0dXJuIGxpbmUuY2xvc2UoKSxsaW5lfSl9dG9KU09OKCl7cmV0dXJue3R5cGU6XCJQb2x5Z29uXCIsY29vcmRpbmF0ZXM6dGhpcy5jb29yZGluYXRlc319Z2V0IGNvb3JkaW5hdGVzKCl7cmV0dXJuIHRoaXMucG9seWdvbi5tYXAoZz0+Zy5jb29yZGluYXRlcyl9aXMoZ2VvbWV0cnkpe2lmKCEoZ2VvbWV0cnkgaW5zdGFuY2VvZiBfR2VvbWV0cnlQb2x5Z29uKXx8dGhpcy5wb2x5Z29uLmxlbmd0aCE9PWdlb21ldHJ5LnBvbHlnb24ubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgaT0wO2k8dGhpcy5wb2x5Z29uLmxlbmd0aDtpKyspaWYoIXRoaXMucG9seWdvbltpXS5pcyhnZW9tZXRyeS5wb2x5Z29uW2ldKSlyZXR1cm4hMTtyZXR1cm4hMH1jbG9uZSgpe3JldHVybiBuZXcgX0dlb21ldHJ5UG9seWdvbih0aGlzLnBvbHlnb24ubWFwKHA9PnAuY2xvbmUoKSkpfX0sR2VvbWV0cnlNdWx0aVBvaW50PWNsYXNzIF9HZW9tZXRyeU11bHRpUG9pbnQgZXh0ZW5kcyBHZW9tZXRyeXtwb2ludHM7Y29uc3RydWN0b3IocG9pbnRzKXtzdXBlcigpLHRoaXMucG9pbnRzPXBvaW50cyBpbnN0YW5jZW9mIF9HZW9tZXRyeU11bHRpUG9pbnQ/cG9pbnRzLnBvaW50czpwb2ludHN9dG9KU09OKCl7cmV0dXJue3R5cGU6XCJNdWx0aVBvaW50XCIsY29vcmRpbmF0ZXM6dGhpcy5jb29yZGluYXRlc319Z2V0IGNvb3JkaW5hdGVzKCl7cmV0dXJuIHRoaXMucG9pbnRzLm1hcChnPT5nLmNvb3JkaW5hdGVzKX1pcyhnZW9tZXRyeSl7aWYoIShnZW9tZXRyeSBpbnN0YW5jZW9mIF9HZW9tZXRyeU11bHRpUG9pbnQpfHx0aGlzLnBvaW50cy5sZW5ndGghPT1nZW9tZXRyeS5wb2ludHMubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgaT0wO2k8dGhpcy5wb2ludHMubGVuZ3RoO2krKylpZighdGhpcy5wb2ludHNbaV0uaXMoZ2VvbWV0cnkucG9pbnRzW2ldKSlyZXR1cm4hMTtyZXR1cm4hMH1jbG9uZSgpe3JldHVybiBuZXcgX0dlb21ldHJ5TXVsdGlQb2ludCh0aGlzLnBvaW50cy5tYXAocD0+cC5jbG9uZSgpKSl9fSxHZW9tZXRyeU11bHRpTGluZT1jbGFzcyBfR2VvbWV0cnlNdWx0aUxpbmUgZXh0ZW5kcyBHZW9tZXRyeXtsaW5lcztjb25zdHJ1Y3RvcihsaW5lcyl7c3VwZXIoKSx0aGlzLmxpbmVzPWxpbmVzIGluc3RhbmNlb2YgX0dlb21ldHJ5TXVsdGlMaW5lP2xpbmVzLmxpbmVzOmxpbmVzfXRvSlNPTigpe3JldHVybnt0eXBlOlwiTXVsdGlMaW5lU3RyaW5nXCIsY29vcmRpbmF0ZXM6dGhpcy5jb29yZGluYXRlc319Z2V0IGNvb3JkaW5hdGVzKCl7cmV0dXJuIHRoaXMubGluZXMubWFwKGc9PmcuY29vcmRpbmF0ZXMpfWlzKGdlb21ldHJ5KXtpZighKGdlb21ldHJ5IGluc3RhbmNlb2YgX0dlb21ldHJ5TXVsdGlMaW5lKXx8dGhpcy5saW5lcy5sZW5ndGghPT1nZW9tZXRyeS5saW5lcy5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCBpPTA7aTx0aGlzLmxpbmVzLmxlbmd0aDtpKyspaWYoIXRoaXMubGluZXNbaV0uaXMoZ2VvbWV0cnkubGluZXNbaV0pKXJldHVybiExO3JldHVybiEwfWNsb25lKCl7cmV0dXJuIG5ldyBfR2VvbWV0cnlNdWx0aUxpbmUodGhpcy5saW5lcy5tYXAocD0+cC5jbG9uZSgpKSl9fSxHZW9tZXRyeU11bHRpUG9seWdvbj1jbGFzcyBfR2VvbWV0cnlNdWx0aVBvbHlnb24gZXh0ZW5kcyBHZW9tZXRyeXtwb2x5Z29ucztjb25zdHJ1Y3Rvcihwb2x5Z29ucyl7c3VwZXIoKSx0aGlzLnBvbHlnb25zPXBvbHlnb25zIGluc3RhbmNlb2YgX0dlb21ldHJ5TXVsdGlQb2x5Z29uP3BvbHlnb25zLnBvbHlnb25zOnBvbHlnb25zfXRvSlNPTigpe3JldHVybnt0eXBlOlwiTXVsdGlQb2x5Z29uXCIsY29vcmRpbmF0ZXM6dGhpcy5jb29yZGluYXRlc319Z2V0IGNvb3JkaW5hdGVzKCl7cmV0dXJuIHRoaXMucG9seWdvbnMubWFwKGc9PmcuY29vcmRpbmF0ZXMpfWlzKGdlb21ldHJ5KXtpZighKGdlb21ldHJ5IGluc3RhbmNlb2YgX0dlb21ldHJ5TXVsdGlQb2x5Z29uKXx8dGhpcy5wb2x5Z29ucy5sZW5ndGghPT1nZW9tZXRyeS5wb2x5Z29ucy5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCBpPTA7aTx0aGlzLnBvbHlnb25zLmxlbmd0aDtpKyspaWYoIXRoaXMucG9seWdvbnNbaV0uaXMoZ2VvbWV0cnkucG9seWdvbnNbaV0pKXJldHVybiExO3JldHVybiEwfWNsb25lKCl7cmV0dXJuIG5ldyBfR2VvbWV0cnlNdWx0aVBvbHlnb24odGhpcy5wb2x5Z29ucy5tYXAocD0+cC5jbG9uZSgpKSl9fSxHZW9tZXRyeUNvbGxlY3Rpb249Y2xhc3MgX0dlb21ldHJ5Q29sbGVjdGlvbiBleHRlbmRzIEdlb21ldHJ5e2NvbGxlY3Rpb247Y29uc3RydWN0b3IoY29sbGVjdGlvbil7c3VwZXIoKSx0aGlzLmNvbGxlY3Rpb249Y29sbGVjdGlvbiBpbnN0YW5jZW9mIF9HZW9tZXRyeUNvbGxlY3Rpb24/Y29sbGVjdGlvbi5jb2xsZWN0aW9uOmNvbGxlY3Rpb259dG9KU09OKCl7cmV0dXJue3R5cGU6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIixnZW9tZXRyaWVzOnRoaXMuZ2VvbWV0cmllc319Z2V0IGdlb21ldHJpZXMoKXtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uLm1hcChnPT5nLnRvSlNPTigpKX1pcyhnZW9tZXRyeSl7aWYoIShnZW9tZXRyeSBpbnN0YW5jZW9mIF9HZW9tZXRyeUNvbGxlY3Rpb24pfHx0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoIT09Z2VvbWV0cnkuY29sbGVjdGlvbi5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCBpPTA7aTx0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoO2krKylpZighdGhpcy5jb2xsZWN0aW9uW2ldLmlzKGdlb21ldHJ5LmNvbGxlY3Rpb25baV0pKXJldHVybiExO3JldHVybiEwfWNsb25lKCl7cmV0dXJuIG5ldyBfR2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMuY29sbGVjdGlvbi5tYXAocD0+cC5jbG9uZSgpKSl9fTtmdW5jdGlvbiBlcXVhbHMoeCx5KXtpZihPYmplY3QuaXMoeCx5KSlyZXR1cm4hMDtpZih4IGluc3RhbmNlb2YgRGF0ZSYmeSBpbnN0YW5jZW9mIERhdGUpcmV0dXJuIHguZ2V0VGltZSgpPT09eS5nZXRUaW1lKCk7aWYoeCBpbnN0YW5jZW9mIFJlZ0V4cCYmeSBpbnN0YW5jZW9mIFJlZ0V4cClyZXR1cm4geC50b1N0cmluZygpPT09eS50b1N0cmluZygpO2lmKHggaW5zdGFuY2VvZiBWYWx1ZSYmeSBpbnN0YW5jZW9mIFZhbHVlKXJldHVybiB4LmVxdWFscyh5KTtpZih0eXBlb2YgeCE9XCJvYmplY3RcInx8eD09PW51bGx8fHR5cGVvZiB5IT1cIm9iamVjdFwifHx5PT09bnVsbClyZXR1cm4hMTtsZXQga2V5c1g9UmVmbGVjdC5vd25LZXlzKHgpLGtleXNZPVJlZmxlY3Qub3duS2V5cyh5KTtpZihrZXlzWC5sZW5ndGghPT1rZXlzWS5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCBpPTA7aTxrZXlzWC5sZW5ndGg7aSsrKWlmKCFSZWZsZWN0Lmhhcyh5LGtleXNYW2ldKXx8IWVxdWFscyh4W2tleXNYW2ldXSx5W2tleXNYW2ldXSkpcmV0dXJuITE7cmV0dXJuITB9dmFyIE1BWF9pNjQ9OTIyMzM3MjAzNjg1NDc3NTgwN247ZnVuY3Rpb24gZXNjYXBlSWRlbnQoc3RyKXtpZihpc09ubHlOdW1iZXJzKHN0cikpcmV0dXJuYFxcdTI3RTgke3N0cn1cXHUyN0U5YDtpZihzdHI9PT1cIlwiKXJldHVyblwiXFx1MjdFOFxcdTI3RTlcIjtsZXQgY29kZSxpLGxlbjtmb3IoaT0wLGxlbj1zdHIubGVuZ3RoO2k8bGVuO2krKylpZihjb2RlPXN0ci5jaGFyQ29kZUF0KGkpLCEoY29kZT40NyYmY29kZTw1OCkmJiEoY29kZT42NCYmY29kZTw5MSkmJiEoY29kZT45NiYmY29kZTwxMjMpJiZjb2RlIT09OTUpcmV0dXJuYFxcdTI3RTgke3N0ci5yZXBsYWNlQWxsKFwiXFx1MjdFOVwiLFwiXFxcXFxcdTI3RTlcIil9XFx1MjdFOWA7cmV0dXJuIHN0cn1mdW5jdGlvbiBlc2NhcGVfaWRlbnQoc3RyKXtyZXR1cm4gZXNjYXBlSWRlbnQoc3RyKX1mdW5jdGlvbiBlc2NhcGVOdW1iZXIobnVtKXtyZXR1cm4gbnVtPD1NQVhfaTY0P251bS50b1N0cmluZygpOmBcXHUyN0U4JHtudW19XFx1MjdFOWB9ZnVuY3Rpb24gaXNPbmx5TnVtYmVycyhzdHIpe3JldHVybi9eXFxkKyQvLnRlc3Qoc3RyLnJlcGxhY2UoL18vZyxcIlwiKSl9aW1wb3J0e1VVSUQsdXVpZHY0b2JqLHV1aWR2N29ian1mcm9tXCJ1dWlkdjdcIjt2YXIgVXVpZD1jbGFzcyBfVXVpZCBleHRlbmRzIFZhbHVle2lubmVyO2NvbnN0cnVjdG9yKHV1aWQpe3N1cGVyKCksdXVpZCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyP3RoaXMuaW5uZXI9VVVJRC5vZklubmVyKG5ldyBVaW50OEFycmF5KHV1aWQpKTp1dWlkIGluc3RhbmNlb2YgVWludDhBcnJheT90aGlzLmlubmVyPVVVSUQub2ZJbm5lcih1dWlkKTp1dWlkIGluc3RhbmNlb2YgX1V1aWQ/dGhpcy5pbm5lcj11dWlkLmlubmVyOnV1aWQgaW5zdGFuY2VvZiBVVUlEP3RoaXMuaW5uZXI9dXVpZDp0aGlzLmlubmVyPVVVSUQucGFyc2UodXVpZCl9ZXF1YWxzKG90aGVyKXtyZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBfVXVpZD90aGlzLmlubmVyLmVxdWFscyhvdGhlci5pbm5lcik6ITF9dG9TdHJpbmcoKXtyZXR1cm4gdGhpcy5pbm5lci50b1N0cmluZygpfXRvSlNPTigpe3JldHVybiB0aGlzLmlubmVyLnRvU3RyaW5nKCl9dG9VaW50OEFycmF5KCl7cmV0dXJuIHRoaXMuaW5uZXIuYnl0ZXN9dG9CdWZmZXIoKXtyZXR1cm4gdGhpcy5pbm5lci5ieXRlcy5idWZmZXJ9c3RhdGljIHY0KCl7cmV0dXJuIG5ldyBfVXVpZCh1dWlkdjRvYmooKSl9c3RhdGljIHY3KCl7cmV0dXJuIG5ldyBfVXVpZCh1dWlkdjdvYmooKSl9fTt2YXIgUmVjb3JkSWQ9Y2xhc3MgX1JlY29yZElkIGV4dGVuZHMgVmFsdWV7dGI7aWQ7Y29uc3RydWN0b3IodGIsaWQyKXtpZihzdXBlcigpLHR5cGVvZiB0YiE9XCJzdHJpbmdcIil0aHJvdyBuZXcgU3VycmVhbERiRXJyb3IoXCJUQiBwYXJ0IGlzIG5vdCB2YWxpZFwiKTtpZighaXNWYWxpZElkUGFydChpZDIpKXRocm93IG5ldyBTdXJyZWFsRGJFcnJvcihcIklEIHBhcnQgaXMgbm90IHZhbGlkXCIpO3RoaXMudGI9dGIsdGhpcy5pZD1pZDJ9ZXF1YWxzKG90aGVyKXtyZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBfUmVjb3JkSWQ/dGhpcy50Yj09PW90aGVyLnRiJiZlcXVhbHModGhpcy5pZCxvdGhlci5pZCk6ITF9dG9KU09OKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKX10b1N0cmluZygpe2xldCB0Yj1lc2NhcGVJZGVudCh0aGlzLnRiKSxpZDI9ZXNjYXBlSWRQYXJ0KHRoaXMuaWQpO3JldHVybmAke3RifToke2lkMn1gfX0sU3RyaW5nUmVjb3JkSWQ9Y2xhc3MgX1N0cmluZ1JlY29yZElkIGV4dGVuZHMgVmFsdWV7cmlkO2NvbnN0cnVjdG9yKHJpZCl7aWYoc3VwZXIoKSxyaWQgaW5zdGFuY2VvZiBfU3RyaW5nUmVjb3JkSWQpdGhpcy5yaWQ9cmlkLnJpZDtlbHNlIGlmKHJpZCBpbnN0YW5jZW9mIFJlY29yZElkKXRoaXMucmlkPXJpZC50b1N0cmluZygpO2Vsc2UgaWYodHlwZW9mIHJpZD09XCJzdHJpbmdcIil0aGlzLnJpZD1yaWQ7ZWxzZSB0aHJvdyBuZXcgU3VycmVhbERiRXJyb3IoXCJTdHJpbmcgUmVjb3JkIElEIG11c3QgYmUgYSBzdHJpbmdcIil9ZXF1YWxzKG90aGVyKXtyZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBfU3RyaW5nUmVjb3JkSWQ/dGhpcy5yaWQ9PT1vdGhlci5yaWQ6ITF9dG9KU09OKCl7cmV0dXJuIHRoaXMucmlkfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMucmlkfX07ZnVuY3Rpb24gaXNWYWxpZElkUGFydCh2KXtpZih2IGluc3RhbmNlb2YgVXVpZClyZXR1cm4hMDtzd2l0Y2godHlwZW9mIHYpe2Nhc2VcInN0cmluZ1wiOmNhc2VcIm51bWJlclwiOmNhc2VcImJpZ2ludFwiOnJldHVybiEwO2Nhc2VcIm9iamVjdFwiOnJldHVybiBBcnJheS5pc0FycmF5KHYpfHx2IT09bnVsbDtkZWZhdWx0OnJldHVybiExfX1mdW5jdGlvbiBlc2NhcGVJZFBhcnQoaWQyKXtyZXR1cm4gaWQyIGluc3RhbmNlb2YgVXVpZD9gdVwiJHtpZDJ9XCJgOnR5cGVvZiBpZDI9PVwic3RyaW5nXCI/ZXNjYXBlSWRlbnQoaWQyKTp0eXBlb2YgaWQyPT1cImJpZ2ludFwifHx0eXBlb2YgaWQyPT1cIm51bWJlclwiP2VzY2FwZU51bWJlcihpZDIpOnRvU3VycmVhbHFsU3RyaW5nKGlkMil9dmFyIFRhYmxlPWNsYXNzIF9UYWJsZSBleHRlbmRzIFZhbHVle3RiO2NvbnN0cnVjdG9yKHRiKXtpZihzdXBlcigpLHR5cGVvZiB0YiE9XCJzdHJpbmdcIil0aHJvdyBuZXcgU3VycmVhbERiRXJyb3IoXCJUYWJsZSBtdXN0IGJlIGEgc3RyaW5nXCIpO3RoaXMudGI9dGJ9ZXF1YWxzKG90aGVyKXtyZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBfVGFibGU/dGhpcy50Yj09PW90aGVyLnRiOiExfXRvSlNPTigpe3JldHVybiB0aGlzLnRifXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMudGJ9fTtmdW5jdGlvbiB0b1N1cnJlYWxxbFN0cmluZyhpbnB1dCl7aWYodHlwZW9mIGlucHV0PT1cInN0cmluZ1wiKXJldHVybmBzJHtKU09OLnN0cmluZ2lmeShpbnB1dCl9YDtpZihpbnB1dD09PW51bGwpcmV0dXJuXCJOVUxMXCI7aWYoaW5wdXQ9PT12b2lkIDApcmV0dXJuXCJOT05FXCI7aWYodHlwZW9mIGlucHV0PT1cIm9iamVjdFwiKXtpZihpbnB1dCBpbnN0YW5jZW9mIERhdGUpcmV0dXJuYGQke0pTT04uc3RyaW5naWZ5KGlucHV0LnRvSVNPU3RyaW5nKCkpfWA7aWYoaW5wdXQgaW5zdGFuY2VvZiBVdWlkKXJldHVybmB1JHtKU09OLnN0cmluZ2lmeShpbnB1dC50b1N0cmluZygpKX1gO2lmKGlucHV0IGluc3RhbmNlb2YgUmVjb3JkSWR8fGlucHV0IGluc3RhbmNlb2YgU3RyaW5nUmVjb3JkSWQpcmV0dXJuYHIke0pTT04uc3RyaW5naWZ5KGlucHV0LnRvU3RyaW5nKCkpfWA7aWYoaW5wdXQgaW5zdGFuY2VvZiBHZW9tZXRyeSlyZXR1cm4gdG9TdXJyZWFscWxTdHJpbmcoaW5wdXQudG9KU09OKCkpO2lmKGlucHV0IGluc3RhbmNlb2YgRGVjaW1hbHx8aW5wdXQgaW5zdGFuY2VvZiBEdXJhdGlvbnx8aW5wdXQgaW5zdGFuY2VvZiBGdXR1cmV8fGlucHV0IGluc3RhbmNlb2YgUmFuZ2V8fGlucHV0IGluc3RhbmNlb2YgVGFibGUpcmV0dXJuIGlucHV0LnRvSlNPTigpO3N3aXRjaChPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpKXtjYXNlIE9iamVjdC5wcm90b3R5cGU6e2xldCBvdXRwdXQyPVwieyBcIixlbnRyaWVzPU9iamVjdC5lbnRyaWVzKGlucHV0KTtmb3IobGV0W2ksW2ssdl1db2YgZW50cmllcy5lbnRyaWVzKCkpb3V0cHV0Mis9YCR7SlNPTi5zdHJpbmdpZnkoayl9OiAke3RvU3VycmVhbHFsU3RyaW5nKHYpfWAsaTxlbnRyaWVzLmxlbmd0aC0xJiYob3V0cHV0Mis9XCIsIFwiKTtyZXR1cm4gb3V0cHV0Mis9XCIgfVwiLG91dHB1dDJ9Y2FzZSBNYXAucHJvdG90eXBlOntsZXQgb3V0cHV0Mj1cInsgXCIsZW50cmllcz1BcnJheS5mcm9tKGlucHV0LmVudHJpZXMoKSk7Zm9yKGxldFtpLFtrLHZdXW9mIGVudHJpZXMuZW50cmllcygpKW91dHB1dDIrPWAke0pTT04uc3RyaW5naWZ5KGspfTogJHt0b1N1cnJlYWxxbFN0cmluZyh2KX1gLGk8ZW50cmllcy5sZW5ndGgtMSYmKG91dHB1dDIrPVwiLCBcIik7cmV0dXJuIG91dHB1dDIrPVwiIH1cIixvdXRwdXQyfWNhc2UgQXJyYXkucHJvdG90eXBlOnJldHVybmBbICR7aW5wdXQubWFwKHRvU3VycmVhbHFsU3RyaW5nKS5qb2luKFwiLCBcIil9IF1gO2Nhc2UgU2V0LnByb3RvdHlwZTpyZXR1cm5gWyAke1suLi5uZXcgU2V0KFsuLi5pbnB1dF0ubWFwKHRvU3VycmVhbHFsU3RyaW5nKSldLmpvaW4oXCIsIFwiKX0gXWB9fXJldHVybmAke2lucHV0fWB9dmFyIFJhbmdlPWNsYXNzIF9SYW5nZSBleHRlbmRzIFZhbHVle2NvbnN0cnVjdG9yKGJlZyxlbmQpe3N1cGVyKCk7dGhpcy5iZWc9YmVnO3RoaXMuZW5kPWVuZH1lcXVhbHMob3RoZXIpe3JldHVybiEob3RoZXIgaW5zdGFuY2VvZiBfUmFuZ2UpfHx0aGlzLmJlZz8uY29uc3RydWN0b3IhPT1vdGhlci5iZWc/LmNvbnN0cnVjdG9yfHx0aGlzLmVuZD8uY29uc3RydWN0b3IhPT1vdGhlci5lbmQ/LmNvbnN0cnVjdG9yPyExOmVxdWFscyh0aGlzLmJlZz8udmFsdWUsb3RoZXIuYmVnPy52YWx1ZSkmJmVxdWFscyh0aGlzLmVuZD8udmFsdWUsb3RoZXIuZW5kPy52YWx1ZSl9dG9KU09OKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKX10b1N0cmluZygpe2xldCBiZWc9ZXNjYXBlUmFuZ2VCb3VuZCh0aGlzLmJlZyksZW5kPWVzY2FwZVJhbmdlQm91bmQodGhpcy5lbmQpO3JldHVybmAke2JlZ30ke2dldFJhbmdlSm9pbih0aGlzLmJlZyx0aGlzLmVuZCl9JHtlbmR9YH19LEJvdW5kSW5jbHVkZWQ9Y2xhc3N7Y29uc3RydWN0b3IodmFsdWUpe3RoaXMudmFsdWU9dmFsdWV9fSxCb3VuZEV4Y2x1ZGVkPWNsYXNze2NvbnN0cnVjdG9yKHZhbHVlKXt0aGlzLnZhbHVlPXZhbHVlfX0sUmVjb3JkSWRSYW5nZT1jbGFzcyBfUmVjb3JkSWRSYW5nZSBleHRlbmRzIFZhbHVle2NvbnN0cnVjdG9yKHRiLGJlZyxlbmQpe3N1cGVyKCk7dGhpcy50Yj10Yjt0aGlzLmJlZz1iZWc7dGhpcy5lbmQ9ZW5kO2lmKHR5cGVvZiB0YiE9XCJzdHJpbmdcIil0aHJvdyBuZXcgU3VycmVhbERiRXJyb3IoXCJUQiBwYXJ0IGlzIG5vdCB2YWxpZFwiKTtpZighaXNWYWxpZElkQm91bmQoYmVnKSl0aHJvdyBuZXcgU3VycmVhbERiRXJyb3IoXCJCZWcgcGFydCBpcyBub3QgdmFsaWRcIik7aWYoIWlzVmFsaWRJZEJvdW5kKGVuZCkpdGhyb3cgbmV3IFN1cnJlYWxEYkVycm9yKFwiRW5kIHBhcnQgaXMgbm90IHZhbGlkXCIpfWVxdWFscyhvdGhlcil7cmV0dXJuIShvdGhlciBpbnN0YW5jZW9mIF9SZWNvcmRJZFJhbmdlKXx8dGhpcy5iZWc/LmNvbnN0cnVjdG9yIT09b3RoZXIuYmVnPy5jb25zdHJ1Y3Rvcnx8dGhpcy5lbmQ/LmNvbnN0cnVjdG9yIT09b3RoZXIuZW5kPy5jb25zdHJ1Y3Rvcj8hMTp0aGlzLnRiPT09b3RoZXIudGImJmVxdWFscyh0aGlzLmJlZz8udmFsdWUsb3RoZXIuYmVnPy52YWx1ZSkmJmVxdWFscyh0aGlzLmVuZD8udmFsdWUsb3RoZXIuZW5kPy52YWx1ZSl9dG9KU09OKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKX10b1N0cmluZygpe2xldCB0Yj1lc2NhcGVJZGVudCh0aGlzLnRiKSxiZWc9ZXNjYXBlSWRCb3VuZCh0aGlzLmJlZyksZW5kPWVzY2FwZUlkQm91bmQodGhpcy5lbmQpO3JldHVybmAke3RifToke2JlZ30ke2dldFJhbmdlSm9pbih0aGlzLmJlZyx0aGlzLmVuZCl9JHtlbmR9YH19O2Z1bmN0aW9uIGdldFJhbmdlSm9pbihiZWcsZW5kKXtsZXQgb3V0cHV0Mj1cIlwiO3JldHVybiBiZWcgaW5zdGFuY2VvZiBCb3VuZEV4Y2x1ZGVkJiYob3V0cHV0Mis9XCI+XCIpLG91dHB1dDIrPVwiLi5cIixlbmQgaW5zdGFuY2VvZiBCb3VuZEluY2x1ZGVkJiYob3V0cHV0Mis9XCI9XCIpLG91dHB1dDJ9ZnVuY3Rpb24gaXNWYWxpZElkQm91bmQoYm91bmQpe3JldHVybiBib3VuZCBpbnN0YW5jZW9mIEJvdW5kSW5jbHVkZWR8fGJvdW5kIGluc3RhbmNlb2YgQm91bmRFeGNsdWRlZD9pc1ZhbGlkSWRQYXJ0KGJvdW5kLnZhbHVlKTohMH1mdW5jdGlvbiBlc2NhcGVJZEJvdW5kKGJvdW5kKXtyZXR1cm4gYm91bmQgaW5zdGFuY2VvZiBCb3VuZEluY2x1ZGVkfHxib3VuZCBpbnN0YW5jZW9mIEJvdW5kRXhjbHVkZWQ/ZXNjYXBlSWRQYXJ0KGJvdW5kLnZhbHVlKTpcIlwifWZ1bmN0aW9uIGVzY2FwZVJhbmdlQm91bmQoYm91bmQpe2lmKGJvdW5kPT09dm9pZCAwKXJldHVyblwiXCI7bGV0IHZhbHVlPWJvdW5kLnZhbHVlO3JldHVybiBib3VuZCBpbnN0YW5jZW9mIFJhbmdlP2AoJHt0b1N1cnJlYWxxbFN0cmluZyh2YWx1ZSl9KWA6dG9TdXJyZWFscWxTdHJpbmcodmFsdWUpfWZ1bmN0aW9uIHJhbmdlVG9DYm9yKFtiZWcsZW5kXSl7ZnVuY3Rpb24gZW5jb2RlQm91bmQoYm91bmQpe3JldHVybiBib3VuZCBpbnN0YW5jZW9mIEJvdW5kSW5jbHVkZWQ/bmV3IFRhZ2dlZChUQUdfQk9VTkRfSU5DTFVERUQsYm91bmQudmFsdWUpOmJvdW5kIGluc3RhbmNlb2YgQm91bmRFeGNsdWRlZD9uZXcgVGFnZ2VkKFRBR19CT1VORF9FWENMVURFRCxib3VuZC52YWx1ZSk6bnVsbH1yZXR1cm5bZW5jb2RlQm91bmQoYmVnKSxlbmNvZGVCb3VuZChlbmQpXX1mdW5jdGlvbiBjYm9yVG9SYW5nZShyYW5nZSl7ZnVuY3Rpb24gZGVjb2RlQm91bmQoYm91bmQpe2lmKGJvdW5kIT09bnVsbCl7aWYoYm91bmQgaW5zdGFuY2VvZiBCb3VuZEluY2x1ZGVkfHxib3VuZCBpbnN0YW5jZW9mIEJvdW5kRXhjbHVkZWQpcmV0dXJuIGJvdW5kO3Rocm93IG5ldyBTdXJyZWFsRGJFcnJvcihcIkV4cGVjdGVkIHRoZSBib3VuZHMgdG8gYmUgZGVjb2RlZCBhbHJlYWR5XCIpfX1yZXR1cm5bZGVjb2RlQm91bmQocmFuZ2VbMF0pLGRlY29kZUJvdW5kKHJhbmdlWzFdKV19dmFyIFRBR19TUEVDX0RBVEVUSU1FPTAsVEFHX1NQRUNfVVVJRD0zNyxUQUdfTk9ORT02LFRBR19UQUJMRT03LFRBR19SRUNPUkRJRD04LFRBR19TVFJJTkdfVVVJRD05LFRBR19TVFJJTkdfREVDSU1BTD0xMCxUQUdfQ1VTVE9NX0RBVEVUSU1FPTEyLFRBR19TVFJJTkdfRFVSQVRJT049MTMsVEFHX0NVU1RPTV9EVVJBVElPTj0xNCxUQUdfRlVUVVJFPTE1LFRBR19SQU5HRT00OSxUQUdfQk9VTkRfSU5DTFVERUQ9NTAsVEFHX0JPVU5EX0VYQ0xVREVEPTUxLFRBR19HRU9NRVRSWV9QT0lOVD04OCxUQUdfR0VPTUVUUllfTElORT04OSxUQUdfR0VPTUVUUllfUE9MWUdPTj05MCxUQUdfR0VPTUVUUllfTVVMVElQT0lOVD05MSxUQUdfR0VPTUVUUllfTVVMVElMSU5FPTkyLFRBR19HRU9NRVRSWV9NVUxUSVBPTFlHT049OTMsVEFHX0dFT01FVFJZX0NPTExFQ1RJT049OTQscmVwbGFjZXI9e2VuY29kZSh2KXtyZXR1cm4gdiBpbnN0YW5jZW9mIERhdGU/bmV3IFRhZ2dlZChUQUdfQ1VTVE9NX0RBVEVUSU1FLGRhdGVUb0Nib3JDdXN0b21EYXRlKHYpKTp2PT09dm9pZCAwP25ldyBUYWdnZWQoVEFHX05PTkUsbnVsbCk6diBpbnN0YW5jZW9mIFV1aWQ/bmV3IFRhZ2dlZChUQUdfU1BFQ19VVUlELHYudG9CdWZmZXIoKSk6diBpbnN0YW5jZW9mIERlY2ltYWw/bmV3IFRhZ2dlZChUQUdfU1RSSU5HX0RFQ0lNQUwsdi50b1N0cmluZygpKTp2IGluc3RhbmNlb2YgRHVyYXRpb24/bmV3IFRhZ2dlZChUQUdfQ1VTVE9NX0RVUkFUSU9OLHYudG9Db21wYWN0KCkpOnYgaW5zdGFuY2VvZiBSZWNvcmRJZD9uZXcgVGFnZ2VkKFRBR19SRUNPUkRJRCxbdi50Yix2LmlkXSk6diBpbnN0YW5jZW9mIFN0cmluZ1JlY29yZElkP25ldyBUYWdnZWQoVEFHX1JFQ09SRElELHYucmlkKTp2IGluc3RhbmNlb2YgUmVjb3JkSWRSYW5nZT9uZXcgVGFnZ2VkKFRBR19SRUNPUkRJRCxbdi50YixuZXcgVGFnZ2VkKFRBR19SQU5HRSxyYW5nZVRvQ2Jvcihbdi5iZWcsdi5lbmRdKSldKTp2IGluc3RhbmNlb2YgVGFibGU/bmV3IFRhZ2dlZChUQUdfVEFCTEUsdi50Yik6diBpbnN0YW5jZW9mIEZ1dHVyZT9uZXcgVGFnZ2VkKFRBR19GVVRVUkUsdi5pbm5lcik6diBpbnN0YW5jZW9mIFJhbmdlP25ldyBUYWdnZWQoVEFHX1JBTkdFLHJhbmdlVG9DYm9yKFt2LmJlZyx2LmVuZF0pKTp2IGluc3RhbmNlb2YgR2VvbWV0cnlQb2ludD9uZXcgVGFnZ2VkKFRBR19HRU9NRVRSWV9QT0lOVCx2LnBvaW50KTp2IGluc3RhbmNlb2YgR2VvbWV0cnlMaW5lP25ldyBUYWdnZWQoVEFHX0dFT01FVFJZX0xJTkUsdi5saW5lKTp2IGluc3RhbmNlb2YgR2VvbWV0cnlQb2x5Z29uP25ldyBUYWdnZWQoVEFHX0dFT01FVFJZX1BPTFlHT04sdi5wb2x5Z29uKTp2IGluc3RhbmNlb2YgR2VvbWV0cnlNdWx0aVBvaW50P25ldyBUYWdnZWQoVEFHX0dFT01FVFJZX01VTFRJUE9JTlQsdi5wb2ludHMpOnYgaW5zdGFuY2VvZiBHZW9tZXRyeU11bHRpTGluZT9uZXcgVGFnZ2VkKFRBR19HRU9NRVRSWV9NVUxUSUxJTkUsdi5saW5lcyk6diBpbnN0YW5jZW9mIEdlb21ldHJ5TXVsdGlQb2x5Z29uP25ldyBUYWdnZWQoVEFHX0dFT01FVFJZX01VTFRJUE9MWUdPTix2LnBvbHlnb25zKTp2IGluc3RhbmNlb2YgR2VvbWV0cnlDb2xsZWN0aW9uP25ldyBUYWdnZWQoVEFHX0dFT01FVFJZX0NPTExFQ1RJT04sdi5jb2xsZWN0aW9uKTp2fSxkZWNvZGUodil7aWYoISh2IGluc3RhbmNlb2YgVGFnZ2VkKSlyZXR1cm4gdjtzd2l0Y2godi50YWcpe2Nhc2UgVEFHX1NQRUNfREFURVRJTUU6cmV0dXJuIG5ldyBEYXRlKHYudmFsdWUpO2Nhc2UgVEFHX1NQRUNfVVVJRDpjYXNlIFRBR19TVFJJTkdfVVVJRDpyZXR1cm4gbmV3IFV1aWQodi52YWx1ZSk7Y2FzZSBUQUdfQ1VTVE9NX0RBVEVUSU1FOnJldHVybiBjYm9yQ3VzdG9tRGF0ZVRvRGF0ZSh2LnZhbHVlKTtjYXNlIFRBR19OT05FOnJldHVybjtjYXNlIFRBR19TVFJJTkdfREVDSU1BTDpyZXR1cm4gbmV3IERlY2ltYWwodi52YWx1ZSk7Y2FzZSBUQUdfU1RSSU5HX0RVUkFUSU9OOnJldHVybiBuZXcgRHVyYXRpb24odi52YWx1ZSk7Y2FzZSBUQUdfQ1VTVE9NX0RVUkFUSU9OOnJldHVybiBEdXJhdGlvbi5mcm9tQ29tcGFjdCh2LnZhbHVlKTtjYXNlIFRBR19UQUJMRTpyZXR1cm4gbmV3IFRhYmxlKHYudmFsdWUpO2Nhc2UgVEFHX0ZVVFVSRTpyZXR1cm4gbmV3IEZ1dHVyZSh2LnZhbHVlKTtjYXNlIFRBR19SQU5HRTpyZXR1cm4gbmV3IFJhbmdlKC4uLmNib3JUb1JhbmdlKHYudmFsdWUpKTtjYXNlIFRBR19CT1VORF9JTkNMVURFRDpyZXR1cm4gbmV3IEJvdW5kSW5jbHVkZWQodi52YWx1ZSk7Y2FzZSBUQUdfQk9VTkRfRVhDTFVERUQ6cmV0dXJuIG5ldyBCb3VuZEV4Y2x1ZGVkKHYudmFsdWUpO2Nhc2UgVEFHX1JFQ09SRElEOnJldHVybiB2LnZhbHVlWzFdaW5zdGFuY2VvZiBSYW5nZT9uZXcgUmVjb3JkSWRSYW5nZSh2LnZhbHVlWzBdLHYudmFsdWVbMV0uYmVnLHYudmFsdWVbMV0uZW5kKTpuZXcgUmVjb3JkSWQodi52YWx1ZVswXSx2LnZhbHVlWzFdKTtjYXNlIFRBR19HRU9NRVRSWV9QT0lOVDpyZXR1cm4gbmV3IEdlb21ldHJ5UG9pbnQodi52YWx1ZSk7Y2FzZSBUQUdfR0VPTUVUUllfTElORTpyZXR1cm4gbmV3IEdlb21ldHJ5TGluZSh2LnZhbHVlKTtjYXNlIFRBR19HRU9NRVRSWV9QT0xZR09OOnJldHVybiBuZXcgR2VvbWV0cnlQb2x5Z29uKHYudmFsdWUpO2Nhc2UgVEFHX0dFT01FVFJZX01VTFRJUE9JTlQ6cmV0dXJuIG5ldyBHZW9tZXRyeU11bHRpUG9pbnQodi52YWx1ZSk7Y2FzZSBUQUdfR0VPTUVUUllfTVVMVElMSU5FOnJldHVybiBuZXcgR2VvbWV0cnlNdWx0aUxpbmUodi52YWx1ZSk7Y2FzZSBUQUdfR0VPTUVUUllfTVVMVElQT0xZR09OOnJldHVybiBuZXcgR2VvbWV0cnlNdWx0aVBvbHlnb24odi52YWx1ZSk7Y2FzZSBUQUdfR0VPTUVUUllfQ09MTEVDVElPTjpyZXR1cm4gbmV3IEdlb21ldHJ5Q29sbGVjdGlvbih2LnZhbHVlKX19fTtPYmplY3QuZnJlZXplKHJlcGxhY2VyKTtmdW5jdGlvbiBlbmNvZGVDYm9yKGRhdGEpe3JldHVybiBlbmNvZGUoZGF0YSx7cmVwbGFjZXI6cmVwbGFjZXIuZW5jb2RlfSl9ZnVuY3Rpb24gZGVjb2RlQ2JvcihkYXRhKXtyZXR1cm4gZGVjb2RlKGRhdGEse3JlcGxhY2VyOnJlcGxhY2VyLmRlY29kZX0pfXZhciB0ZXh0RW5jb2RlcjIsUHJlcGFyZWRRdWVyeT1jbGFzc3tfcXVlcnk7X2JpbmRpbmdzO2xlbmd0aDtjb25zdHJ1Y3RvcihxdWVyeSxiaW5kaW5ncyl7dGV4dEVuY29kZXIyPz89bmV3IFRleHRFbmNvZGVyLHRoaXMuX3F1ZXJ5PXRleHRFbmNvZGVyMi5lbmNvZGUocXVlcnkpLHRoaXMuX2JpbmRpbmdzPXBhcnRpYWxseUVuY29kZU9iamVjdChiaW5kaW5ncz8/e30se3JlcGxhY2VyOnJlcGxhY2VyLmVuY29kZX0pLHRoaXMubGVuZ3RoPU9iamVjdC5rZXlzKHRoaXMuX2JpbmRpbmdzKS5sZW5ndGh9Z2V0IHF1ZXJ5KCl7bGV0IHc9bmV3IFdyaXRlcih0aGlzLl9xdWVyeS5ieXRlTGVuZ3RoKzkpO3JldHVybiB3LndyaXRlTWFqb3IoMyx0aGlzLl9xdWVyeS5ieXRlTGVuZ3RoKSx3LndyaXRlVWludDhBcnJheSh0aGlzLl9xdWVyeSksbmV3IEVuY29kZWQody5vdXRwdXQoITEpKX1nZXQgYmluZGluZ3MoKXtyZXR1cm4gdGhpcy5fYmluZGluZ3N9YnVpbGQoZmlsbHMpe3JldHVybiBlbmNvZGUoW3RoaXMucXVlcnksdGhpcy5iaW5kaW5nc10se2ZpbGxzfSl9YXBwZW5kKHF1ZXJ5X3JhdywuLi52YWx1ZXMpe2xldCBiYXNlPXRoaXMubGVuZ3RoO3RoaXMubGVuZ3RoKz12YWx1ZXMubGVuZ3RoO2xldCByZXVzZWQ9MCxnYXBzPW5ldyBNYXAsbWFwcGVkX2JpbmRpbmdzPXZhbHVlcy5tYXAoKHYsaSk9PntpZih2IGluc3RhbmNlb2YgR2FwKXtsZXQgaW5kZXg9Z2Fwcy5nZXQodik7aWYoaW5kZXghPT12b2lkIDApcmV0dXJuIHJldXNlZCsrLFtgYmluZF9fXyR7aW5kZXh9YCx2XTtnYXBzLnNldCh2LGktcmV1c2VkKX1yZXR1cm5bYGJpbmRfX18ke2Jhc2UraS1yZXVzZWR9YCx2XX0pO2ZvcihsZXRbayx2XW9mIG1hcHBlZF9iaW5kaW5ncyl0aGlzLl9iaW5kaW5nc1trXT1lbmNvZGUodix7cmVwbGFjZXI6cmVwbGFjZXIuZW5jb2RlLHBhcnRpYWw6ITB9KTtsZXQgcXVlcnk9cXVlcnlfcmF3LmZsYXRNYXAoKHNlZ21lbnQsaSk9PntsZXQgdmFyaWFibGU9bWFwcGVkX2JpbmRpbmdzW2ldPy5bMF07cmV0dXJuW3NlZ21lbnQsLi4udmFyaWFibGU/W2AkJHt2YXJpYWJsZX1gXTpbXV19KS5qb2luKFwiXCIpO3RleHRFbmNvZGVyMj8/PW5ldyBUZXh0RW5jb2RlcjtsZXQgY3VycmVudD1uZXcgVWludDhBcnJheSh0aGlzLl9xdWVyeSksYWRkZWQ9dGV4dEVuY29kZXIyLmVuY29kZShxdWVyeSk7cmV0dXJuIHRoaXMuX3F1ZXJ5PW5ldyBVaW50OEFycmF5KGN1cnJlbnQuYnl0ZUxlbmd0aCthZGRlZC5ieXRlTGVuZ3RoKSx0aGlzLl9xdWVyeS5zZXQoY3VycmVudCksdGhpcy5fcXVlcnkuc2V0KGFkZGVkLGN1cnJlbnQuYnl0ZUxlbmd0aCksdGhpc319O2Z1bmN0aW9uIHN1cnJlYWxxbChxdWVyeV9yYXcsLi4udmFsdWVzKXtsZXQgcmV1c2VkPTAsZ2Fwcz1uZXcgTWFwLG1hcHBlZF9iaW5kaW5ncz12YWx1ZXMubWFwKCh2LGkpPT57aWYodiBpbnN0YW5jZW9mIEdhcCl7bGV0IGluZGV4PWdhcHMuZ2V0KHYpO2lmKGluZGV4IT09dm9pZCAwKXJldHVybiByZXVzZWQrKyxbYGJpbmRfX18ke2luZGV4fWAsdl07Z2Fwcy5zZXQodixpLXJldXNlZCl9cmV0dXJuW2BiaW5kX19fJHtpLXJldXNlZH1gLHZdfSksYmluZGluZ3M9bWFwcGVkX2JpbmRpbmdzLnJlZHVjZSgocHJldixbayx2XSk9PihwcmV2W2tdPXYscHJldikse30pLHF1ZXJ5PXF1ZXJ5X3Jhdy5mbGF0TWFwKChzZWdtZW50LGkpPT57bGV0IHZhcmlhYmxlPW1hcHBlZF9iaW5kaW5nc1tpXT8uWzBdO3JldHVybltzZWdtZW50LC4uLnZhcmlhYmxlP1tgJCR7dmFyaWFibGV9YF06W11dfSkuam9pbihcIlwiKTtyZXR1cm4gbmV3IFByZXBhcmVkUXVlcnkocXVlcnksYmluZGluZ3MpfWZ1bmN0aW9uIGNvbnZlcnRBdXRoKHBhcmFtcyl7bGV0IHJlc3VsdD17fSxjb252ZXJ0U3RyaW5nPShhLGIsb3B0aW9uYWwpPT57aWYoYSBpbiBwYXJhbXMpcmVzdWx0W2JdPWAke3BhcmFtc1thXX1gLGRlbGV0ZSByZXN1bHRbYV07ZWxzZSBpZihvcHRpb25hbCE9PSEwKXRocm93IG5ldyBTdXJyZWFsRGJFcnJvcihgS2V5ICR7YX0gaXMgbWlzc2luZyBmcm9tIHRoZSBhdXRoZW50aWNhdGlvbiBwYXJhbWV0ZXJzYCl9O3JldHVyblwic2NvcGVcImluIHBhcmFtcz8ocmVzdWx0PXsuLi5wYXJhbXN9LGNvbnZlcnRTdHJpbmcoXCJzY29wZVwiLFwic2NcIiksY29udmVydFN0cmluZyhcIm5hbWVzcGFjZVwiLFwibnNcIiksY29udmVydFN0cmluZyhcImRhdGFiYXNlXCIsXCJkYlwiKSk6XCJ2YXJpYWJsZXNcImluIHBhcmFtcz8ocmVzdWx0PXsuLi5wYXJhbXMudmFyaWFibGVzfSxjb252ZXJ0U3RyaW5nKFwiYWNjZXNzXCIsXCJhY1wiKSxjb252ZXJ0U3RyaW5nKFwibmFtZXNwYWNlXCIsXCJuc1wiKSxjb252ZXJ0U3RyaW5nKFwiZGF0YWJhc2VcIixcImRiXCIpKTooY29udmVydFN0cmluZyhcImFjY2Vzc1wiLFwiYWNcIiwhMCksY29udmVydFN0cmluZyhcImRhdGFiYXNlXCIsXCJkYlwiLCEwKSxjb252ZXJ0U3RyaW5nKFwibmFtZXNwYWNlXCIsXCJuc1wiLCEoXCJkYXRhYmFzZVwiaW4gcGFyYW1zKSksY29udmVydFN0cmluZyhcInVzZXJuYW1lXCIsXCJ1c2VyXCIpLGNvbnZlcnRTdHJpbmcoXCJwYXNzd29yZFwiLFwicGFzc1wiKSkscmVzdWx0fXZhciBsaXZlQWN0aW9ucz1bXCJDUkVBVEVcIixcIlVQREFURVwiLFwiREVMRVRFXCJdO2Z1bmN0aW9uIGlzTGl2ZVJlc3VsdCh2KXtyZXR1cm4hKHR5cGVvZiB2IT1cIm9iamVjdFwifHx2PT09bnVsbHx8IShcImlkXCJpbiB2JiZcImFjdGlvblwiaW4gdiYmXCJyZXN1bHRcImluIHYpfHwhKHYuaWQgaW5zdGFuY2VvZiBVdWlkKXx8IWxpdmVBY3Rpb25zLmluY2x1ZGVzKHYuYWN0aW9uKXx8dHlwZW9mIHYucmVzdWx0IT1cIm9iamVjdFwifHx2LnJlc3VsdD09PW51bGwpfXZhciBERUZBVUxUX1JFQ09OTkVDVF9PUFRJT05TPXtlbmFibGVkOiEwLGF0dGVtcHRzOjUscmV0cnlEZWxheToxZTMscmV0cnlEZWxheU1heDo2ZTQscmV0cnlEZWxheU11bHRpcGxpZXI6MixyZXRyeURlbGF5Sml0dGVyOi4xfTtmdW5jdGlvbiBqc29uaWZ5KGlucHV0KXtpZih0eXBlb2YgaW5wdXQ9PVwib2JqZWN0XCIpe2lmKGlucHV0PT09bnVsbClyZXR1cm4gbnVsbDtpZihpbnB1dCBpbnN0YW5jZW9mIERhdGV8fGlucHV0IGluc3RhbmNlb2YgVXVpZHx8aW5wdXQgaW5zdGFuY2VvZiBEZWNpbWFsfHxpbnB1dCBpbnN0YW5jZW9mIER1cmF0aW9ufHxpbnB1dCBpbnN0YW5jZW9mIEZ1dHVyZXx8aW5wdXQgaW5zdGFuY2VvZiBSYW5nZXx8aW5wdXQgaW5zdGFuY2VvZiBTdHJpbmdSZWNvcmRJZHx8aW5wdXQgaW5zdGFuY2VvZiBSZWNvcmRJZFJhbmdlfHxpbnB1dCBpbnN0YW5jZW9mIFJlY29yZElkfHxpbnB1dCBpbnN0YW5jZW9mIEdlb21ldHJ5fHxpbnB1dCBpbnN0YW5jZW9mIFRhYmxlKXJldHVybiBpbnB1dC50b0pTT04oKTtzd2l0Y2goT2JqZWN0LmdldFByb3RvdHlwZU9mKGlucHV0KSl7Y2FzZSBPYmplY3QucHJvdG90eXBlOntsZXQgbWFwcGVkPU9iamVjdC5lbnRyaWVzKGlucHV0KS5tYXAoKFtrLHZdKT0+W2ssanNvbmlmeSh2KV0pLmZpbHRlcigoW18sdl0pPT52IT09dm9pZCAwKTtyZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKG1hcHBlZCl9Y2FzZSBNYXAucHJvdG90eXBlOntsZXQgbWFwcGVkPUFycmF5LmZyb20oaW5wdXQpLm1hcCgoW2ssdl0pPT5bayxqc29uaWZ5KHYpXSkuZmlsdGVyKChbXyx2XSk9PnYhPT12b2lkIDApO3JldHVybiBuZXcgTWFwKG1hcHBlZCl9Y2FzZSBBcnJheS5wcm90b3R5cGU6cmV0dXJuIGlucHV0Lm1hcChqc29uaWZ5KTtjYXNlIFNldC5wcm90b3R5cGU6cmV0dXJuIG5ldyBTZXQoWy4uLmlucHV0XS5tYXAoanNvbmlmeSkpfX1yZXR1cm4gaW5wdXR9dmFyIGRlZmF1bHRWZXJzaW9uQ2hlY2tUaW1lb3V0PTVlMyxzdXBwb3J0ZWRTdXJyZWFsRGJWZXJzaW9uTWluPVwiMS40LjJcIixzdXBwb3J0ZWRTdXJyZWFsRGJWZXJzaW9uVW50aWw9XCIzLjAuMFwiLHN1cHBvcnRlZFN1cnJlYWxEYlZlcnNpb25SYW5nZT1gPj0gJHtzdXBwb3J0ZWRTdXJyZWFsRGJWZXJzaW9uTWlufSA8ICR7c3VwcG9ydGVkU3VycmVhbERiVmVyc2lvblVudGlsfWA7ZnVuY3Rpb24gdmVyc2lvbkNoZWNrKHZlcnNpb24sbWluPXN1cHBvcnRlZFN1cnJlYWxEYlZlcnNpb25NaW4sdW50aWw9c3VwcG9ydGVkU3VycmVhbERiVmVyc2lvblVudGlsKXtpZighaXNWZXJzaW9uU3VwcG9ydGVkKHZlcnNpb24sbWluLHVudGlsKSl0aHJvdyBuZXcgVW5zdXBwb3J0ZWRWZXJzaW9uKHZlcnNpb24sYD49ICR7bWlufSA8ICR7dW50aWx9YCk7cmV0dXJuITB9ZnVuY3Rpb24gaXNWZXJzaW9uU3VwcG9ydGVkKHZlcnNpb24sbWluPXN1cHBvcnRlZFN1cnJlYWxEYlZlcnNpb25NaW4sdW50aWw9c3VwcG9ydGVkU3VycmVhbERiVmVyc2lvblVudGlsKXtyZXR1cm4gbWluLmxvY2FsZUNvbXBhcmUodmVyc2lvbix2b2lkIDAse251bWVyaWM6ITB9KTw9MCYmdW50aWwubG9jYWxlQ29tcGFyZSh2ZXJzaW9uLHZvaWQgMCx7bnVtZXJpYzohMH0pPT09MX1hc3luYyBmdW5jdGlvbiByZXRyaWV2ZVJlbW90ZVZlcnNpb24odXJsLHRpbWVvdXQpe2xldCBwcm90b2NvbD17XCJ3czpcIjpcImh0dHA6XCIsXCJ3c3M6XCI6XCJodHRwczpcIixcImh0dHA6XCI6XCJodHRwOlwiLFwiaHR0cHM6XCI6XCJodHRwczpcIn1bdXJsLnByb3RvY29sXTtpZihwcm90b2NvbCl7bGV0IGJhc2VwYXRoPXVybC5wYXRobmFtZS5zbGljZSgwLC00KTt1cmw9bmV3IFVSTCh1cmwpLHVybC5wYXRobmFtZT1gJHtiYXNlcGF0aH0vdmVyc2lvbmAsdXJsLnByb3RvY29sPXByb3RvY29sO2xldCBjb250cm9sbGVyPW5ldyBBYm9ydENvbnRyb2xsZXIsaWQyPXNldFRpbWVvdXQoKCk9PmNvbnRyb2xsZXIuYWJvcnQoKSx0aW1lb3V0Pz9kZWZhdWx0VmVyc2lvbkNoZWNrVGltZW91dCksdmVyc2lvblByZWZpeD1cInN1cnJlYWxkYi1cIjtyZXR1cm4gYXdhaXQgZmV0Y2godXJsLHtzaWduYWw6Y29udHJvbGxlci5zaWduYWx9KS50aGVuKHJlcz0+cmVzLnRleHQoKSkudGhlbih2ZXJzaW9uMj0+dmVyc2lvbjIuc2xpY2UodmVyc2lvblByZWZpeC5sZW5ndGgpKS5jYXRjaChlPT57dGhyb3cgbmV3IFZlcnNpb25SZXRyaWV2YWxGYWlsdXJlKGUpfSkuZmluYWxseSgoKT0+e2NsZWFyVGltZW91dChpZDIpfSl9dGhyb3cgbmV3IFZlcnNpb25SZXRyaWV2YWxGYWlsdXJlfXZhciBpZD0wO2Z1bmN0aW9uIGdldEluY3JlbWVudGFsSUQoKXtyZXR1cm4gaWQ9KGlkKzEpJU51bWJlci5NQVhfU0FGRV9JTlRFR0VSLGlkLnRvU3RyaW5nKCl9ZnVuY3Rpb24gcyhzdHJpbmcsLi4udmFsdWVzKXtyZXR1cm4gc3RyaW5nLnJlZHVjZSgocHJldixjdXJyLGkpPT5gJHtwcmV2fSR7Y3Vycn0ke3ZhbHVlc1tpXT8/XCJcIn1gLFwiXCIpfWZ1bmN0aW9uIGQoc3RyaW5nLC4uLnZhbHVlcyl7cmV0dXJuIG5ldyBEYXRlKHMoc3RyaW5nLHZhbHVlcykpfWZ1bmN0aW9uIHIoc3RyaW5nLC4uLnZhbHVlcyl7cmV0dXJuIG5ldyBTdHJpbmdSZWNvcmRJZChzKHN0cmluZyx2YWx1ZXMpKX1mdW5jdGlvbiB1KHN0cmluZywuLi52YWx1ZXMpe3JldHVybiBuZXcgVXVpZChzKHN0cmluZyx2YWx1ZXMpKX12YXIgUmV0cnlNZXNzYWdlPVN5bWJvbChcIlJldHJ5TWVzc2FnZVwiKSxDb25uZWN0aW9uU3RhdHVzPShDb25uZWN0aW9uU3RhdHVzMj0+KENvbm5lY3Rpb25TdGF0dXMyLkRpc2Nvbm5lY3RlZD1cImRpc2Nvbm5lY3RlZFwiLENvbm5lY3Rpb25TdGF0dXMyLkNvbm5lY3Rpbmc9XCJjb25uZWN0aW5nXCIsQ29ubmVjdGlvblN0YXR1czIuUmVjb25uZWN0aW5nPVwicmVjb25uZWN0aW5nXCIsQ29ubmVjdGlvblN0YXR1czIuQ29ubmVjdGVkPVwiY29ubmVjdGVkXCIsQ29ubmVjdGlvblN0YXR1czIuRXJyb3I9XCJlcnJvclwiLENvbm5lY3Rpb25TdGF0dXMyKSkoQ29ubmVjdGlvblN0YXR1c3x8e30pLEVuZ2luZUNvbnRleHQ9Y2xhc3N7ZW1pdHRlcjtlbmNvZGVDYm9yO2RlY29kZUNib3I7cmVjb25uZWN0O3ByZXBhcmU7Y29uc3RydWN0b3Ioe2VtaXR0ZXIsZW5jb2RlQ2JvcjplbmNvZGVDYm9yMixkZWNvZGVDYm9yOmRlY29kZUNib3IyLHJlY29ubmVjdCxwcmVwYXJlfSl7dGhpcy5lbWl0dGVyPWVtaXR0ZXIsdGhpcy5lbmNvZGVDYm9yPWVuY29kZUNib3IyLHRoaXMuZGVjb2RlQ2Jvcj1kZWNvZGVDYm9yMix0aGlzLnJlY29ubmVjdD1yZWNvbm5lY3QsdGhpcy5wcmVwYXJlPXByZXBhcmV9fSxBYnN0cmFjdEVuZ2luZT1jbGFzc3tjb250ZXh0O3JlYWR5O3N0YXR1cz1cImRpc2Nvbm5lY3RlZFwiO2Nvbm5lY3Rpb249e3VybDp2b2lkIDAsbmFtZXNwYWNlOnZvaWQgMCxkYXRhYmFzZTp2b2lkIDAsdG9rZW46dm9pZCAwfTtjb25zdHJ1Y3Rvcihjb250ZXh0KXt0aGlzLmNvbnRleHQ9Y29udGV4dH1nZXQgZW1pdHRlcigpe3JldHVybiB0aGlzLmNvbnRleHQuZW1pdHRlcn1nZXQgZW5jb2RlQ2Jvcigpe3JldHVybiB0aGlzLmNvbnRleHQuZW5jb2RlQ2Jvcn1nZXQgZGVjb2RlQ2Jvcigpe3JldHVybiB0aGlzLmNvbnRleHQuZGVjb2RlQ2Jvcn19O2Z1bmN0aW9uIHByb2Nlc3NBdXRoVmFycyh2YXJzLGZhbGxiYWNrKXtpZihcInNjb3BlXCJpbiB2YXJzfHxcImFjY2Vzc1wiaW4gdmFycyYmXCJ2YXJpYWJsZXNcImluIHZhcnMmJnZhcnMudmFyaWFibGVzKXtpZighdmFycy5uYW1lc3BhY2Upe2lmKCFmYWxsYmFjaz8ubmFtZXNwYWNlKXRocm93IG5ldyBOb05hbWVzcGFjZVNwZWNpZmllZDt2YXJzLm5hbWVzcGFjZT1mYWxsYmFjay5uYW1lc3BhY2V9aWYoIXZhcnMuZGF0YWJhc2Upe2lmKCFmYWxsYmFjaz8uZGF0YWJhc2UpdGhyb3cgbmV3IE5vRGF0YWJhc2VTcGVjaWZpZWQ7dmFycy5kYXRhYmFzZT1mYWxsYmFjay5kYXRhYmFzZX19cmV0dXJuIHZhcnN9dmFyIEF1dGhDb250cm9sbGVyPWNsYXNze2FzeW5jIHNpZ251cCh2YXJzKXtpZighdGhpcy5jb25uZWN0aW9uKXRocm93IG5ldyBOb0FjdGl2ZVNvY2tldDtsZXQgcGFyc2VkPXByb2Nlc3NBdXRoVmFycyh2YXJzLHRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uKSxjb252ZXJ0ZWQ9Y29udmVydEF1dGgocGFyc2VkKSxyZXM9YXdhaXQgdGhpcy5ycGMoXCJzaWdudXBcIixbY29udmVydGVkXSk7aWYocmVzLmVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvci5tZXNzYWdlKTtpZighcmVzLnJlc3VsdCl0aHJvdyBuZXcgTm9Ub2tlblJldHVybmVkO3JldHVybiByZXMucmVzdWx0fWFzeW5jIHNpZ25pbih2YXJzKXtpZighdGhpcy5jb25uZWN0aW9uKXRocm93IG5ldyBOb0FjdGl2ZVNvY2tldDtsZXQgcGFyc2VkPXByb2Nlc3NBdXRoVmFycyh2YXJzLHRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uKSxjb252ZXJ0ZWQ9Y29udmVydEF1dGgocGFyc2VkKSxyZXM9YXdhaXQgdGhpcy5ycGMoXCJzaWduaW5cIixbY29udmVydGVkXSk7aWYocmVzLmVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvci5tZXNzYWdlKTtpZighcmVzLnJlc3VsdCl0aHJvdyBuZXcgTm9Ub2tlblJldHVybmVkO3JldHVybiByZXMucmVzdWx0fWFzeW5jIGF1dGhlbnRpY2F0ZSh0b2tlbil7bGV0IHJlcz1hd2FpdCB0aGlzLnJwYyhcImF1dGhlbnRpY2F0ZVwiLFt0b2tlbl0pO2lmKHJlcy5lcnJvcil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihyZXMuZXJyb3IubWVzc2FnZSk7cmV0dXJuITB9YXN5bmMgaW52YWxpZGF0ZSgpe2xldCByZXM9YXdhaXQgdGhpcy5ycGMoXCJpbnZhbGlkYXRlXCIpO2lmKHJlcy5lcnJvcil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihyZXMuZXJyb3IubWVzc2FnZSk7cmV0dXJuITB9fSxFbmdpbmVBdXRoPWNsYXNzIGV4dGVuZHMgQXV0aENvbnRyb2xsZXJ7Y29uc3RydWN0b3IoY29ubmVjdGlvbil7c3VwZXIoKTt0aGlzLmNvbm5lY3Rpb249Y29ubmVjdGlvbn1ycGMobWV0aG9kLHBhcmFtcyl7aWYoIXRoaXMuY29ubmVjdGlvbil0aHJvdyBuZXcgTm9BY3RpdmVTb2NrZXQ7cmV0dXJuIHRoaXMuY29ubmVjdGlvbi5ycGMoe21ldGhvZCxwYXJhbXN9LCEwKX19O3ZhciBBYnN0cmFjdFJlbW90ZUVuZ2luZT1jbGFzcyBleHRlbmRzIEFic3RyYWN0RW5naW5le2FzeW5jIHJlcV9wb3N0KGJvZHksdXJsLGhlYWRlcnNfKXtsZXQgaGVhZGVycz17XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2Nib3JcIixBY2NlcHQ6XCJhcHBsaWNhdGlvbi9jYm9yXCIsLi4uaGVhZGVyc199O3RoaXMuY29ubmVjdGlvbi5uYW1lc3BhY2UmJihoZWFkZXJzW1wiU3VycmVhbC1OU1wiXT10aGlzLmNvbm5lY3Rpb24ubmFtZXNwYWNlKSx0aGlzLmNvbm5lY3Rpb24uZGF0YWJhc2UmJihoZWFkZXJzW1wiU3VycmVhbC1EQlwiXT10aGlzLmNvbm5lY3Rpb24uZGF0YWJhc2UpLHRoaXMuY29ubmVjdGlvbi50b2tlbiYmKGhlYWRlcnMuQXV0aG9yaXphdGlvbj1gQmVhcmVyICR7dGhpcy5jb25uZWN0aW9uLnRva2VufWApO2xldCByYXc9YXdhaXQgZmV0Y2goYCR7dXJsPz90aGlzLmNvbm5lY3Rpb24udXJsfWAse21ldGhvZDpcIlBPU1RcIixoZWFkZXJzLGJvZHk6dGhpcy5lbmNvZGVDYm9yKGJvZHkpfSksYnVmZmVyPWF3YWl0IHJhdy5hcnJheUJ1ZmZlcigpO2lmKHJhdy5zdGF0dXM9PT0yMDApcmV0dXJuIGJ1ZmZlcjtsZXQgZGVjPW5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO3Rocm93IG5ldyBIdHRwQ29ubmVjdGlvbkVycm9yKGRlYy5kZWNvZGUoYnVmZmVyKSxyYXcuc3RhdHVzLHJhdy5zdGF0dXNUZXh0LGJ1ZmZlcil9fTt2YXIgQUxXQVlTX0FMTE9XPW5ldyBTZXQoW1wic2lnbmluXCIsXCJzaWdudXBcIixcImF1dGhlbnRpY2F0ZVwiLFwiaW52YWxpZGF0ZVwiLFwidmVyc2lvblwiLFwidXNlXCIsXCJsZXRcIixcInVuc2V0XCIsXCJxdWVyeVwiXSksSHR0cEVuZ2luZT1jbGFzcyBleHRlbmRzIEFic3RyYWN0UmVtb3RlRW5naW5le2Nvbm5lY3Rpb249e3VybDp2b2lkIDAsbmFtZXNwYWNlOnZvaWQgMCxkYXRhYmFzZTp2b2lkIDAsdG9rZW46dm9pZCAwLHZhcmlhYmxlczp7fX07c2V0U3RhdHVzKHN0YXR1cywuLi5hcmdzKXt0aGlzLnN0YXR1cz1zdGF0dXMsdGhpcy5lbWl0dGVyLmVtaXQoc3RhdHVzLGFyZ3MpfXZlcnNpb24odXJsLHRpbWVvdXQpe3JldHVybiByZXRyaWV2ZVJlbW90ZVZlcnNpb24odXJsLHRpbWVvdXQpfWFzeW5jIGNvbm5lY3QodXJsKXtyZXR1cm4gdGhpcy5zZXRTdGF0dXMoXCJjb25uZWN0aW5nXCIpLHRoaXMuY29ubmVjdGlvbi51cmw9dXJsLGF3YWl0IHRoaXMuY29udGV4dC5wcmVwYXJlPy4obmV3IEVuZ2luZUF1dGgodGhpcykpLHRoaXMuc2V0U3RhdHVzKFwiY29ubmVjdGVkXCIpLHRoaXMucmVhZHk9bmV3IFByb21pc2UocjI9PnIyKCkpLHRoaXMucmVhZHl9ZGlzY29ubmVjdCgpe3JldHVybiB0aGlzLmNvbm5lY3Rpb249e3VybDp2b2lkIDAsbmFtZXNwYWNlOnZvaWQgMCxkYXRhYmFzZTp2b2lkIDAsdG9rZW46dm9pZCAwLHZhcmlhYmxlczp7fX0sdGhpcy5yZWFkeT12b2lkIDAsdGhpcy5zZXRTdGF0dXMoXCJkaXNjb25uZWN0ZWRcIiksbmV3IFByb21pc2UocjI9PnIyKCkpfWFzeW5jIHJwYyhyZXF1ZXN0LGZvcmNlKXtpZihmb3JjZXx8YXdhaXQgdGhpcy5yZWFkeSwhdGhpcy5jb25uZWN0aW9uLnVybCl0aHJvdyBuZXcgQ29ubmVjdGlvblVuYXZhaWxhYmxlO2lmKCghdGhpcy5jb25uZWN0aW9uLm5hbWVzcGFjZXx8IXRoaXMuY29ubmVjdGlvbi5kYXRhYmFzZSkmJiFBTFdBWVNfQUxMT1cuaGFzKHJlcXVlc3QubWV0aG9kKSl0aHJvdyBuZXcgTWlzc2luZ05hbWVzcGFjZURhdGFiYXNlO2lmKHJlcXVlc3QubWV0aG9kPT09XCJ1c2VcIil7bGV0W25zLGRiXT1yZXF1ZXN0LnBhcmFtcztyZXR1cm4gbnM9PT1udWxsJiYodGhpcy5jb25uZWN0aW9uLm5hbWVzcGFjZT12b2lkIDApLGRiPT09bnVsbCYmKHRoaXMuY29ubmVjdGlvbi5kYXRhYmFzZT12b2lkIDApLG5zJiYodGhpcy5jb25uZWN0aW9uLm5hbWVzcGFjZT1ucyksZGImJih0aGlzLmNvbm5lY3Rpb24uZGF0YWJhc2U9ZGIpLHtyZXN1bHQ6ITB9fWlmKHJlcXVlc3QubWV0aG9kPT09XCJsZXRcIil7bGV0W2tleSx2YWx1ZV09cmVxdWVzdC5wYXJhbXM7cmV0dXJuIHRoaXMuY29ubmVjdGlvbi52YXJpYWJsZXNba2V5XT12YWx1ZSx7cmVzdWx0OiEwfX1pZihyZXF1ZXN0Lm1ldGhvZD09PVwidW5zZXRcIil7bGV0W2tleV09cmVxdWVzdC5wYXJhbXM7cmV0dXJuIGRlbGV0ZSB0aGlzLmNvbm5lY3Rpb24udmFyaWFibGVzW2tleV0se3Jlc3VsdDohMH19cmVxdWVzdC5tZXRob2Q9PT1cInF1ZXJ5XCImJihyZXF1ZXN0LnBhcmFtcz1bcmVxdWVzdC5wYXJhbXM/LlswXSx7Li4udGhpcy5jb25uZWN0aW9uLnZhcmlhYmxlcywuLi5yZXF1ZXN0LnBhcmFtcz8uWzFdPz97fX1dKTtsZXQgaWQyPWdldEluY3JlbWVudGFsSUQoKSxidWZmZXI9YXdhaXQgdGhpcy5yZXFfcG9zdCh7aWQ6aWQyLC4uLnJlcXVlc3R9KSxyZXNwb25zZT10aGlzLmRlY29kZUNib3IoYnVmZmVyKTtpZihcInJlc3VsdFwiaW4gcmVzcG9uc2Upc3dpdGNoKHJlcXVlc3QubWV0aG9kKXtjYXNlXCJzaWduaW5cIjpjYXNlXCJzaWdudXBcIjp7dGhpcy5jb25uZWN0aW9uLnRva2VuPXJlc3BvbnNlLnJlc3VsdDticmVha31jYXNlXCJhdXRoZW50aWNhdGVcIjp7bGV0W3Rva2VuXT1yZXF1ZXN0LnBhcmFtczt0aGlzLmNvbm5lY3Rpb24udG9rZW49dG9rZW47YnJlYWt9Y2FzZVwiaW52YWxpZGF0ZVwiOnt0aGlzLmNvbm5lY3Rpb24udG9rZW49dm9pZCAwO2JyZWFrfX1yZXR1cm4gdGhpcy5lbWl0dGVyLmVtaXQoYHJwYy0ke2lkMn1gLFtyZXNwb25zZV0pLHJlc3BvbnNlfWdldCBjb25uZWN0ZWQoKXtyZXR1cm4hIXRoaXMuY29ubmVjdGlvbi51cmx9YXN5bmMgZXhwb3J0KG9wdGlvbnMpe2lmKCF0aGlzLmNvbm5lY3Rpb24udXJsKXRocm93IG5ldyBDb25uZWN0aW9uVW5hdmFpbGFibGU7bGV0IHVybD1uZXcgVVJMKHRoaXMuY29ubmVjdGlvbi51cmwpLGJhc2VwYXRoPXVybC5wYXRobmFtZS5zbGljZSgwLC00KTt1cmwucGF0aG5hbWU9YCR7YmFzZXBhdGh9L2V4cG9ydGA7bGV0IGJ1ZmZlcj1hd2FpdCB0aGlzLnJlcV9wb3N0KG9wdGlvbnM/P3t9LHVybCx7QWNjZXB0OlwicGxhaW4vdGV4dFwifSk7cmV0dXJuIG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLmRlY29kZShidWZmZXIpfWFzeW5jIGltcG9ydChkYXRhKXtpZighdGhpcy5jb25uZWN0aW9uLnVybCl0aHJvdyBuZXcgQ29ubmVjdGlvblVuYXZhaWxhYmxlO2xldCB1cmw9bmV3IFVSTCh0aGlzLmNvbm5lY3Rpb24udXJsKSxiYXNlcGF0aD11cmwucGF0aG5hbWUuc2xpY2UoMCwtNCk7dXJsLnBhdGhuYW1lPWAke2Jhc2VwYXRofS9pbXBvcnRgLGF3YWl0IHRoaXMucmVxX3Bvc3QoZGF0YSx1cmwse0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIn0pfX07aW1wb3J0e1dlYlNvY2tldH1mcm9tXCJpc293c1wiO2Z1bmN0aW9uIG5ld0NvbXBsZXRhYmxlKCl7bGV0IG91dD17Y29tcGxldGVkOiExfTtyZXR1cm4gb3V0LnByb21pc2U9bmV3IFByb21pc2UoKHJlc29sdmVfLHJlamVjdF8pPT57b3V0LnJlc29sdmU9YXJnPT57b3V0LmNvbXBsZXRlZD0hMCxyZXNvbHZlXyhhcmcpfSxvdXQucmVqZWN0PXJlYXNvbj0+e291dC5jb21wbGV0ZWQ9ITAscmVqZWN0XyhyZWFzb24pfX0pLG91dH12YXIgV2Vic29ja2V0RW5naW5lPWNsYXNzIGV4dGVuZHMgQWJzdHJhY3RSZW1vdGVFbmdpbmV7cGluZ2VyO3NvY2tldDtkaXNjb25uZWN0ZWQ7Y29uc3RydWN0b3IoY3R4KXtzdXBlcihjdHgpLHRoaXMuZGlzY29ubmVjdGVkPW5ld0NvbXBsZXRhYmxlKCl9c2V0U3RhdHVzKHN0YXR1cywuLi5hcmdzKXt0aGlzLmNvbm5lY3Rpb24udXJsJiZzdGF0dXM9PT1cImRpc2Nvbm5lY3RlZFwifHxzdGF0dXM9PT1cImVycm9yXCI/KHRoaXMuZGlzY29ubmVjdGVkLnJlc29sdmUoKSx0aGlzLmRpc2Nvbm5lY3RlZD1uZXdDb21wbGV0YWJsZSgpKToodGhpcy5zdGF0dXM9c3RhdHVzLHRoaXMuZW1pdHRlci5lbWl0KHN0YXR1cyxhcmdzKSl9YXN5bmMgcmVxdWlyZVN0YXR1cyhzdGF0dXMpe3JldHVybiB0aGlzLnN0YXR1cyE9PXN0YXR1cyYmYXdhaXQgdGhpcy5lbWl0dGVyLnN1YnNjcmliZU9uY2Uoc3RhdHVzKSwhMH12ZXJzaW9uKHVybCx0aW1lb3V0KXtyZXR1cm4gcmV0cmlldmVSZW1vdGVWZXJzaW9uKHVybCx0aW1lb3V0KX1hc3luYyBjb25uZWN0KHVybCl7dGhpcy5jb25uZWN0aW9uLnVybD11cmwsKGFzeW5jKCk9PntsZXQgaW5pdGlhbD0hMCxjb250cm9scztmb3IoO3RoaXMuY29ubmVjdGlvbi51cmw7KWlmKGluaXRpYWwpaW5pdGlhbD0hMSx0aGlzLnNldFN0YXR1cyhcImNvbm5lY3RpbmdcIiksdGhpcy5yZWFkeT10aGlzLmNyZWF0ZVNvY2tldCgpLGF3YWl0IHRoaXMuZGlzY29ubmVjdGVkLnByb21pc2U7ZWxzZXtpZighdGhpcy5jb250ZXh0LnJlY29ubmVjdC5lbmFibGVkKWJyZWFrO2lmKCFjb250cm9scyl7bGV0e3Byb21pc2UscmVzb2x2ZTpyZXNvbHZlMixyZWplY3Q6cmVqZWN0Mn09bmV3Q29tcGxldGFibGUoKTt0aGlzLnJlYWR5PXByb21pc2UsY29udHJvbHM9W3Jlc29sdmUyLHJlamVjdDJdfWxldFtyZXNvbHZlLHJlamVjdF09Y29udHJvbHM7aWYoIXRoaXMuY29udGV4dC5yZWNvbm5lY3QuYWxsb3dlZCl7dGhpcy5jb25uZWN0aW9uPXt1cmw6dm9pZCAwLG5hbWVzcGFjZTp2b2lkIDAsZGF0YWJhc2U6dm9pZCAwLHRva2VuOnZvaWQgMH0sdGhpcy5zb2NrZXQ9dm9pZCAwLHJlamVjdChuZXcgUmVjb25uZWN0RmFpbGVkKSx0aGlzLmVtaXR0ZXIuZW1pdChcImVycm9yXCIsW25ldyBSZWNvbm5lY3RGYWlsZWRdKSx0aGlzLnNldFN0YXR1cyhcImRpc2Nvbm5lY3RlZFwiKTticmVha310aGlzLnNldFN0YXR1cyhcInJlY29ubmVjdGluZ1wiKSxhd2FpdCB0aGlzLmNvbnRleHQucmVjb25uZWN0Lml0ZXJhdGUoKTt0cnl7YXdhaXQgdGhpcy5jcmVhdGVTb2NrZXQoKX1jYXRjaHtjb250aW51ZX10cnl7aWYodGhpcy5jb25uZWN0aW9uLm5hbWVzcGFjZXx8dGhpcy5jb25uZWN0aW9uLmRhdGFiYXNlKXtsZXQgcmVzPWF3YWl0IHRoaXMucnBjKHttZXRob2Q6XCJ1c2VcIixwYXJhbXM6W3RoaXMuY29ubmVjdGlvbi5uYW1lc3BhY2UsdGhpcy5jb25uZWN0aW9uLmRhdGFiYXNlXX0sITApO2lmKHJlcy5lcnJvcil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihyZXMuZXJyb3IubWVzc2FnZSl9aWYodGhpcy5jb25uZWN0aW9uLnRva2VuKXtsZXQgcmVzPWF3YWl0IHRoaXMucnBjKHttZXRob2Q6XCJhdXRoZW50aWNhdGVcIixwYXJhbXM6W3RoaXMuY29ubmVjdGlvbi50b2tlbl19LCEwKTtpZihyZXMuZXJyb3IpdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IocmVzLmVycm9yLm1lc3NhZ2UpfX1jYXRjaChlKXt0aGlzLmNvbm5lY3Rpb249e3VybDp2b2lkIDAsbmFtZXNwYWNlOnZvaWQgMCxkYXRhYmFzZTp2b2lkIDAsdG9rZW46dm9pZCAwfSx0aGlzLnNvY2tldD12b2lkIDAscmVqZWN0KGUpLHRoaXMuZW1pdHRlci5lbWl0KFwiZXJyb3JcIixbZV0pLHRoaXMuc2V0U3RhdHVzKFwiZGlzY29ubmVjdGVkXCIpO2JyZWFrfXRoaXMuY29udGV4dC5yZWNvbm5lY3QucmVzZXQoKSxyZXNvbHZlKCksdGhpcy5lbWl0dGVyLnNjYW5MaXN0ZW5lcnMoaz0+ay5zdGFydHNXaXRoKFwicnBjLVwiKSkubWFwKGs9PnRoaXMuZW1pdHRlci5lbWl0KGssW1JldHJ5TWVzc2FnZV0pKSx0aGlzLnN0YXR1cz09PVwiY29ubmVjdGVkXCImJmF3YWl0IHRoaXMuZGlzY29ubmVjdGVkLnByb21pc2V9fSkoKSxhd2FpdCB0aGlzLnJlYWR5fWFzeW5jIGNyZWF0ZVNvY2tldCgpe2xldHtwcm9taXNlLHJlc29sdmUscmVqZWN0fT1uZXdDb21wbGV0YWJsZSgpO2lmKCF0aGlzLmNvbm5lY3Rpb24udXJsKXRocm93IG5ldyBOb1VSTFByb3ZpZGVkO2xldCBzb2NrZXQ9bmV3IFdlYlNvY2tldCh0aGlzLmNvbm5lY3Rpb24udXJsLnRvU3RyaW5nKCksXCJjYm9yXCIpO3NvY2tldC5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLGFzeW5jKCk9Pnt0aGlzLnNvY2tldD1zb2NrZXQsYXdhaXQgdGhpcy5jb250ZXh0LnByZXBhcmU/LihuZXcgRW5naW5lQXV0aCh0aGlzKSksdGhpcy5zZXRTdGF0dXMoXCJjb25uZWN0ZWRcIiksdGhpcy5waW5nZXI/LnN0b3AoKSx0aGlzLnBpbmdlcj1uZXcgUGluZ2VyKDNlNCksdGhpcy5waW5nZXIuc3RhcnQoKCk9Pnt0cnl7dGhpcy5ycGMoe21ldGhvZDpcInBpbmdcIn0pfWNhdGNoe319KSxyZXNvbHZlKCl9KSxzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZT0+e2xldCBlcnJvcj1uZXcgVW5leHBlY3RlZENvbm5lY3Rpb25FcnJvcihcImRldGFpbFwiaW4gZSYmZS5kZXRhaWw/ZS5kZXRhaWw6XCJtZXNzYWdlXCJpbiBlJiZlLm1lc3NhZ2U/ZS5tZXNzYWdlOlwiZXJyb3JcImluIGUmJmUuZXJyb3I/ZS5lcnJvcjpcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWRcIik7dGhpcy5zZXRTdGF0dXMoXCJlcnJvclwiLGVycm9yKSxyZWplY3QoZXJyb3IpfSksc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLCgpPT57dGhpcy5zZXRTdGF0dXMoXCJkaXNjb25uZWN0ZWRcIiksdGhpcy5waW5nZXI/LnN0b3AoKX0pLHNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGFzeW5jKHtkYXRhfSk9Pnt0cnl7bGV0IGRlY29kZWQ9dGhpcy5kZWNvZGVDYm9yKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj9kYXRhOmRhdGEgaW5zdGFuY2VvZiBCbG9iP2F3YWl0IGRhdGEuYXJyYXlCdWZmZXIoKTpkYXRhLmJ1ZmZlci5zbGljZShkYXRhLmJ5dGVPZmZzZXQsZGF0YS5ieXRlT2Zmc2V0K2RhdGEuYnl0ZUxlbmd0aCkpO2lmKHR5cGVvZiBkZWNvZGVkPT1cIm9iamVjdFwiJiZkZWNvZGVkIT1udWxsJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGVjb2RlZCk9PT1PYmplY3QucHJvdG90eXBlKXRoaXMuaGFuZGxlUnBjUmVzcG9uc2UoZGVjb2RlZCk7ZWxzZSB0aHJvdyBuZXcgVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlKGRlY29kZWQpfWNhdGNoKGRldGFpbCl7c29ja2V0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiZXJyb3JcIix7ZGV0YWlsfSkpfX0pLGF3YWl0IHByb21pc2V9YXN5bmMgZGlzY29ubmVjdCgpe3RoaXMuY29ubmVjdGlvbj17dXJsOnZvaWQgMCxuYW1lc3BhY2U6dm9pZCAwLGRhdGFiYXNlOnZvaWQgMCx0b2tlbjp2b2lkIDB9LGF3YWl0IHRoaXMucmVhZHk/LmNhdGNoKCgpPT57fSksdGhpcy5zb2NrZXQ/LmNsb3NlKCksdGhpcy5yZWFkeT12b2lkIDAsdGhpcy5zb2NrZXQ9dm9pZCAwLHRoaXMuZGlzY29ubmVjdGVkLnJlc29sdmUoKSxhd2FpdCBQcm9taXNlLmFueShbdGhpcy5yZXF1aXJlU3RhdHVzKFwiZGlzY29ubmVjdGVkXCIpLHRoaXMucmVxdWlyZVN0YXR1cyhcImVycm9yXCIpXSl9YXN5bmMgcnBjKHJlcXVlc3QsZm9yY2Upe2lmKGZvcmNlfHxhd2FpdCB0aGlzLnJlYWR5LCF0aGlzLnNvY2tldCl0aHJvdyBuZXcgQ29ubmVjdGlvblVuYXZhaWxhYmxlO2xldCByZXM7Zm9yKDshcmVzOyl7bGV0IGlkMj1nZXRJbmNyZW1lbnRhbElEKCkscmVzcG9uc2U9dGhpcy5lbWl0dGVyLnN1YnNjcmliZU9uY2UoYHJwYy0ke2lkMn1gKTtpZih0aGlzLnNvY2tldC5zZW5kKHRoaXMuZW5jb2RlQ2Jvcih7aWQ6aWQyLC4uLnJlcXVlc3R9KSksZm9yY2UmJnRoaXMuc29ja2V0LnJlYWR5U3RhdGU9PT1XZWJTb2NrZXQuQ0xPU0VEKXRocm93IG5ldyBFbmdpbmVEaXNjb25uZWN0ZWQ7bGV0W3Jhd109YXdhaXQgcmVzcG9uc2U7aWYocmF3IGluc3RhbmNlb2YgRW5naW5lRGlzY29ubmVjdGVkKXRocm93IHJhdztyYXchPT1SZXRyeU1lc3NhZ2UmJihyZXM9cmF3KX1pZihcInJlc3VsdFwiaW4gcmVzKXN3aXRjaChyZXF1ZXN0Lm1ldGhvZCl7Y2FzZVwidXNlXCI6e2xldFtucyxkYl09cmVxdWVzdC5wYXJhbXM7bnM9PT1udWxsJiYodGhpcy5jb25uZWN0aW9uLm5hbWVzcGFjZT12b2lkIDApLGRiPT09bnVsbCYmKHRoaXMuY29ubmVjdGlvbi5kYXRhYmFzZT12b2lkIDApLG5zJiYodGhpcy5jb25uZWN0aW9uLm5hbWVzcGFjZT1ucyksZGImJih0aGlzLmNvbm5lY3Rpb24uZGF0YWJhc2U9ZGIpO2JyZWFrfWNhc2VcInNpZ25pblwiOmNhc2VcInNpZ251cFwiOnt0aGlzLmNvbm5lY3Rpb24udG9rZW49cmVzLnJlc3VsdDticmVha31jYXNlXCJhdXRoZW50aWNhdGVcIjp7bGV0W3Rva2VuXT1yZXF1ZXN0LnBhcmFtczt0aGlzLmNvbm5lY3Rpb24udG9rZW49dG9rZW47YnJlYWt9Y2FzZVwiaW52YWxpZGF0ZVwiOnt0aGlzLmNvbm5lY3Rpb24udG9rZW49dm9pZCAwO2JyZWFrfX1yZXR1cm4gcmVzfWhhbmRsZVJwY1Jlc3BvbnNlKHtpZDppZDIsLi4ucmVzfSl7aWYoaWQyKXRoaXMuZW1pdHRlci5lbWl0KGBycGMtJHtpZDJ9YCxbcmVzXSk7ZWxzZSBpZihyZXMuZXJyb3IpdGhpcy5zZXRTdGF0dXMoXCJlcnJvclwiLG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvcikpO2Vsc2UgaWYoaXNMaXZlUmVzdWx0KHJlcy5yZXN1bHQpKXtsZXR7aWQ6aWQzLGFjdGlvbixyZXN1bHR9PXJlcy5yZXN1bHQ7dGhpcy5lbWl0dGVyLmVtaXQoYGxpdmUtJHtpZDN9YCxbYWN0aW9uLHJlc3VsdF0sITApfWVsc2UgdGhpcy5zZXRTdGF0dXMoXCJlcnJvclwiLG5ldyBVbmV4cGVjdGVkU2VydmVyUmVzcG9uc2Uoe2lkOmlkMiwuLi5yZXN9KSl9Z2V0IGNvbm5lY3RlZCgpe3JldHVybiEhdGhpcy5zb2NrZXR9YXN5bmMgZXhwb3J0KG9wdGlvbnMpe2lmKCF0aGlzLmNvbm5lY3Rpb24udXJsKXRocm93IG5ldyBDb25uZWN0aW9uVW5hdmFpbGFibGU7bGV0IHVybD1uZXcgVVJMKHRoaXMuY29ubmVjdGlvbi51cmwpLGJhc2VwYXRoPXVybC5wYXRobmFtZS5zbGljZSgwLC00KTt1cmwucHJvdG9jb2w9dXJsLnByb3RvY29sLnJlcGxhY2UoXCJ3c1wiLFwiaHR0cFwiKSx1cmwucGF0aG5hbWU9YCR7YmFzZXBhdGh9L2V4cG9ydGA7bGV0IGJ1ZmZlcj1hd2FpdCB0aGlzLnJlcV9wb3N0KG9wdGlvbnM/P3t9LHVybCx7QWNjZXB0OlwicGxhaW4vdGV4dFwifSk7cmV0dXJuIG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLmRlY29kZShidWZmZXIpfWFzeW5jIGltcG9ydChkYXRhKXtpZighdGhpcy5jb25uZWN0aW9uLnVybCl0aHJvdyBuZXcgQ29ubmVjdGlvblVuYXZhaWxhYmxlO2xldCB1cmw9bmV3IFVSTCh0aGlzLmNvbm5lY3Rpb24udXJsKSxiYXNlcGF0aD11cmwucGF0aG5hbWUuc2xpY2UoMCwtNCk7dXJsLnByb3RvY29sPXVybC5wcm90b2NvbC5yZXBsYWNlKFwid3NcIixcImh0dHBcIiksdXJsLnBhdGhuYW1lPWAke2Jhc2VwYXRofS9pbXBvcnRgLGF3YWl0IHRoaXMucmVxX3Bvc3QoZGF0YSx1cmwse0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIn0pfX0sUGluZ2VyPWNsYXNze3BpbmdlcjtpbnRlcnZhbDtjb25zdHJ1Y3RvcihpbnRlcnZhbD0zZTQpe3RoaXMuaW50ZXJ2YWw9aW50ZXJ2YWx9c3RhcnQoY2FsbGJhY2spe3RoaXMucGluZ2VyPXNldEludGVydmFsKGNhbGxiYWNrLHRoaXMuaW50ZXJ2YWwpfXN0b3AoKXtjbGVhckludGVydmFsKHRoaXMucGluZ2VyKX19O2Z1bmN0aW9uIHJhbmQobWluLG1heCl7cmV0dXJuIE1hdGgucmFuZG9tKCkqKG1heC1taW4pK21pbn12YXIgUmVjb25uZWN0Q29udGV4dD1jbGFzc3tfYXR0ZW1wdHM9MDtvcHRpb25zO3N1cnJlYWw7Y29uc3RydWN0b3IoaW5wdXQsc3VycmVhbCl7dGhpcy5zdXJyZWFsPXN1cnJlYWwsaW5wdXQ/aW5wdXQ9PT0hMD90aGlzLm9wdGlvbnM9REVGQVVMVF9SRUNPTk5FQ1RfT1BUSU9OUzp0aGlzLm9wdGlvbnM9ey4uLkRFRkFVTFRfUkVDT05ORUNUX09QVElPTlMsLi4uaW5wdXR9OnRoaXMub3B0aW9ucz17Li4uREVGQVVMVF9SRUNPTk5FQ1RfT1BUSU9OUyxlbmFibGVkOiExfX1nZXQgYXR0ZW1wdHMoKXtyZXR1cm4gdGhpcy5fYXR0ZW1wdHN9Z2V0IGVuYWJsZWQoKXtyZXR1cm4gdGhpcy5vcHRpb25zLmVuYWJsZWR9Z2V0IGFsbG93ZWQoKXtyZXR1cm4hKCF0aGlzLm9wdGlvbnMuZW5hYmxlZHx8dGhpcy5vcHRpb25zLmF0dGVtcHRzIT09LTEmJnRoaXMuX2F0dGVtcHRzPj10aGlzLm9wdGlvbnMuYXR0ZW1wdHMpfXJlc2V0KCl7dGhpcy5fYXR0ZW1wdHM9MH1hc3luYyBpdGVyYXRlKCl7aWYoIXRoaXMuYWxsb3dlZCl0aHJvdyBuZXcgUmVjb25uZWN0SXRlcmF0aW9uRXJyb3I7dGhpcy5fYXR0ZW1wdHMrKztsZXQgbXVsdGlwbGllcj10aGlzLm9wdGlvbnMucmV0cnlEZWxheU11bHRpcGxpZXIqKnRoaXMuYXR0ZW1wdHMsYWRqdXN0ZWREZWxheT10aGlzLm9wdGlvbnMucmV0cnlEZWxheSptdWx0aXBsaWVyLGppdHRlck1vZGlmaWVyPXJhbmQoLXRoaXMub3B0aW9ucy5yZXRyeURlbGF5Sml0dGVyLHRoaXMub3B0aW9ucy5yZXRyeURlbGF5Sml0dGVyKSxuZXh0RGVsYXk9TWF0aC5taW4oYWRqdXN0ZWREZWxheSooMStqaXR0ZXJNb2RpZmllciksdGhpcy5vcHRpb25zLnJldHJ5RGVsYXlNYXgpO2F3YWl0IG5ldyBQcm9taXNlKHIyPT5zZXRUaW1lb3V0KHIyLG5leHREZWxheSkpfX07dmFyIFN1cnJlYWw9Y2xhc3MgZXh0ZW5kcyBBdXRoQ29udHJvbGxlcntjb25uZWN0aW9uO2VtaXR0ZXI7ZW5naW5lcz17d3M6V2Vic29ja2V0RW5naW5lLHdzczpXZWJzb2NrZXRFbmdpbmUsaHR0cDpIdHRwRW5naW5lLGh0dHBzOkh0dHBFbmdpbmV9O19yZWFkeTtjb25zdHJ1Y3Rvcih7ZW5naW5lc309e30pe3N1cGVyKCksdGhpcy5lbWl0dGVyPW5ldyBFbWl0dGVyLGVuZ2luZXMmJih0aGlzLmVuZ2luZXM9ey4uLnRoaXMuZW5naW5lcywuLi5lbmdpbmVzfSl9YXN5bmMgY29ubmVjdCh1cmwsb3B0cz17fSl7cmV0dXJuIHRoaXMuX3JlYWR5PXRoaXMuY29ubmVjdElubmVyKHVybCxvcHRzKSxhd2FpdCB0aGlzLl9yZWFkeSwhMH1hc3luYyBjb25uZWN0SW5uZXIodXJsLG9wdHM9e30pe2xldCBlbmRwb2ludD1wYXJzZVVybCh1cmwpLGVuZ2luZU5hbWU9ZW5kcG9pbnQucHJvdG9jb2wuc2xpY2UoMCwtMSksZW5naW5lPXRoaXMuZW5naW5lc1tlbmdpbmVOYW1lXTtpZighZW5naW5lKXRocm93IG5ldyBVbnN1cHBvcnRlZEVuZ2luZShlbmdpbmVOYW1lKTtsZXR7cHJlcGFyZSxhdXRoLG5hbWVzcGFjZSxkYXRhYmFzZSxyZWNvbm5lY3R9PW9wdHM7YXdhaXQgdGhpcy5jbG9zZSgpO2xldCBjb250ZXh0PW5ldyBFbmdpbmVDb250ZXh0KHtlbWl0dGVyOnRoaXMuZW1pdHRlcixlbmNvZGVDYm9yLGRlY29kZUNib3IscmVjb25uZWN0Om5ldyBSZWNvbm5lY3RDb250ZXh0KHJlY29ubmVjdCx0aGlzKSxwcmVwYXJlfSksY29ubmVjdGlvbj1uZXcgZW5naW5lKGNvbnRleHQpO2lmKG9wdHMudmVyc2lvbkNoZWNrIT09ITEpe2xldCB2ZXJzaW9uPWF3YWl0IGNvbm5lY3Rpb24udmVyc2lvbihlbmRwb2ludCxvcHRzLnZlcnNpb25DaGVja1RpbWVvdXQpO3ZlcnNpb25DaGVjayh2ZXJzaW9uKX10aGlzLmNvbm5lY3Rpb249Y29ubmVjdGlvbixhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoZW5kcG9pbnQpLChuYW1lc3BhY2V8fGRhdGFiYXNlKSYmYXdhaXQgdGhpcy51c2Uoe25hbWVzcGFjZSxkYXRhYmFzZX0pLHR5cGVvZiBhdXRoPT1cInN0cmluZ1wiP2F3YWl0IHRoaXMuYXV0aGVudGljYXRlKGF1dGgpOmF1dGgmJmF3YWl0IHRoaXMuc2lnbmluKGF1dGgpfWFzeW5jIGNsb3NlKCl7cmV0dXJuIHRoaXMuY2xlYW4oKSxhd2FpdCB0aGlzLmNvbm5lY3Rpb24/LmRpc2Nvbm5lY3QoKSwhMH1jbGVhbigpe2xldCBwZW5kaW5nPXRoaXMuZW1pdHRlci5zY2FuTGlzdGVuZXJzKGs9Pmsuc3RhcnRzV2l0aChcInJwYy1cIikpO3BlbmRpbmcubWFwKGs9PnRoaXMuZW1pdHRlci5lbWl0KGssW25ldyBFbmdpbmVEaXNjb25uZWN0ZWRdKSk7bGV0IGxpdmU9dGhpcy5lbWl0dGVyLnNjYW5MaXN0ZW5lcnMoaz0+ay5zdGFydHNXaXRoKFwibGl2ZS1cIikpO2xpdmUubWFwKGs9PnRoaXMuZW1pdHRlci5lbWl0KGssW1wiQ0xPU0VcIixcImRpc2Nvbm5lY3RlZFwiXSkpLHRoaXMuZW1pdHRlci5yZXNldCh7Y29sbGVjdGFibGU6ITAsbGlzdGVuZXJzOlsuLi5wZW5kaW5nLC4uLmxpdmVdfSl9Z2V0IHN0YXR1cygpe3JldHVybiB0aGlzLmNvbm5lY3Rpb24/LnN0YXR1cz8/XCJkaXNjb25uZWN0ZWRcIn1nZXQgcmVhZHkoKXtyZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuX3JlYWR5LHRoaXMuY29ubmVjdGlvbj8ucmVhZHldKS50aGVuKCgpPT57fSl9YXN5bmMgcGluZygpe2xldHtlcnJvcn09YXdhaXQgdGhpcy5ycGMoXCJwaW5nXCIpO2lmKGVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKGVycm9yLm1lc3NhZ2UpO3JldHVybiEwfWFzeW5jIHVzZSh7bmFtZXNwYWNlLGRhdGFiYXNlfSl7aWYoIXRoaXMuY29ubmVjdGlvbil0aHJvdyBuZXcgTm9BY3RpdmVTb2NrZXQ7aWYobmFtZXNwYWNlPT09bnVsbCYmZGF0YWJhc2UhPT1udWxsKXRocm93IG5ldyBTdXJyZWFsRGJFcnJvcihcIkNhbm5vdCB1bnNldCBuYW1lc3BhY2Ugd2l0aG91dCB1bnNldHRpbmcgZGF0YWJhc2VcIik7bGV0e2Vycm9yfT1hd2FpdCB0aGlzLnJwYyhcInVzZVwiLFtuYW1lc3BhY2UsZGF0YWJhc2VdKTtpZihlcnJvcil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihlcnJvci5tZXNzYWdlKTtyZXR1cm4hMH1hc3luYyBpbmZvKCl7YXdhaXQgdGhpcy5yZWFkeTtsZXQgcmVzPWF3YWl0IHRoaXMucnBjKFwiaW5mb1wiKTtpZihyZXMuZXJyb3IpdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IocmVzLmVycm9yLm1lc3NhZ2UpO3JldHVybiByZXMucmVzdWx0Pz92b2lkIDB9YXN5bmMgbGV0KHZhcmlhYmxlLHZhbHVlKXtsZXQgcmVzPWF3YWl0IHRoaXMucnBjKFwibGV0XCIsW3ZhcmlhYmxlLHZhbHVlXSk7aWYocmVzLmVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvci5tZXNzYWdlKTtyZXR1cm4hMH1hc3luYyB1bnNldCh2YXJpYWJsZSl7bGV0IHJlcz1hd2FpdCB0aGlzLnJwYyhcInVuc2V0XCIsW3ZhcmlhYmxlXSk7aWYocmVzLmVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvci5tZXNzYWdlKTtyZXR1cm4hMH1hc3luYyBsaXZlKHRhYmxlLGNhbGxiYWNrLGRpZmYpe2F3YWl0IHRoaXMucmVhZHk7bGV0IHJlcz1hd2FpdCB0aGlzLnJwYyhcImxpdmVcIixbdGFibGUsZGlmZl0pO2lmKHJlcy5lcnJvcil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihyZXMuZXJyb3IubWVzc2FnZSk7cmV0dXJuIGNhbGxiYWNrJiZ0aGlzLnN1YnNjcmliZUxpdmUocmVzLnJlc3VsdCxjYWxsYmFjaykscmVzLnJlc3VsdH1hc3luYyBzdWJzY3JpYmVMaXZlKHF1ZXJ5VXVpZCxjYWxsYmFjayl7aWYoYXdhaXQgdGhpcy5yZWFkeSwhdGhpcy5jb25uZWN0aW9uKXRocm93IG5ldyBOb0FjdGl2ZVNvY2tldDt0aGlzLmNvbm5lY3Rpb24uZW1pdHRlci5zdWJzY3JpYmUoYGxpdmUtJHtxdWVyeVV1aWR9YCxjYWxsYmFjaywhMCl9YXN5bmMgdW5TdWJzY3JpYmVMaXZlKHF1ZXJ5VXVpZCxjYWxsYmFjayl7aWYoYXdhaXQgdGhpcy5yZWFkeSwhdGhpcy5jb25uZWN0aW9uKXRocm93IG5ldyBOb0FjdGl2ZVNvY2tldDt0aGlzLmNvbm5lY3Rpb24uZW1pdHRlci51blN1YnNjcmliZShgbGl2ZS0ke3F1ZXJ5VXVpZH1gLGNhbGxiYWNrKX1hc3luYyBraWxsKHF1ZXJ5VXVpZCl7aWYoYXdhaXQgdGhpcy5yZWFkeSwhdGhpcy5jb25uZWN0aW9uKXRocm93IG5ldyBOb0FjdGl2ZVNvY2tldDtpZihBcnJheS5pc0FycmF5KHF1ZXJ5VXVpZCkpe2F3YWl0IFByb21pc2UuYWxsKHF1ZXJ5VXVpZC5tYXAodTI9PnRoaXMucnBjKFwia2lsbFwiLFt1Ml0pKSk7bGV0IHRvQmVLaWxsZWQ9cXVlcnlVdWlkLm1hcCh1Mj0+YGxpdmUtJHt1Mn1gKTt0b0JlS2lsbGVkLm1hcChrPT50aGlzLmVtaXR0ZXIuZW1pdChrLFtcIkNMT1NFXCIsXCJraWxsZWRcIl0pKSx0aGlzLmNvbm5lY3Rpb24uZW1pdHRlci5yZXNldCh7Y29sbGVjdGFibGU6dG9CZUtpbGxlZCxsaXN0ZW5lcnM6dG9CZUtpbGxlZH0pfWVsc2UgYXdhaXQgdGhpcy5ycGMoXCJraWxsXCIsW3F1ZXJ5VXVpZF0pLHRoaXMuZW1pdHRlci5lbWl0KGBsaXZlLSR7cXVlcnlVdWlkfWAsW1wiQ0xPU0VcIixcImtpbGxlZFwiXSksdGhpcy5jb25uZWN0aW9uLmVtaXR0ZXIucmVzZXQoe2NvbGxlY3RhYmxlOmBsaXZlLSR7cXVlcnlVdWlkfWAsbGlzdGVuZXJzOmBsaXZlLSR7cXVlcnlVdWlkfWB9KX1hc3luYyBxdWVyeSguLi5hcmdzKXtyZXR1cm4oYXdhaXQgdGhpcy5xdWVyeVJhdyguLi5hcmdzKSkubWFwKCh7c3RhdHVzLHJlc3VsdH0pPT57aWYoc3RhdHVzPT09XCJFUlJcIil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihyZXN1bHQpO3JldHVybiByZXN1bHR9KX1hc3luYyBxdWVyeVJhdyguLi5bcSxiXSl7bGV0IHBhcmFtcz1xIGluc3RhbmNlb2YgUHJlcGFyZWRRdWVyeT9bcS5xdWVyeSxwYXJ0aWFsbHlFbmNvZGVPYmplY3QocS5iaW5kaW5ncyx7ZmlsbHM6YixyZXBsYWNlcjpyZXBsYWNlci5lbmNvZGV9KV06W3EsYl07YXdhaXQgdGhpcy5yZWFkeTtsZXQgcmVzPWF3YWl0IHRoaXMucnBjKFwicXVlcnlcIixwYXJhbXMpO2lmKHJlcy5lcnJvcil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihyZXMuZXJyb3IubWVzc2FnZSk7cmV0dXJuIHJlcy5yZXN1bHR9YXN5bmMgcXVlcnlfcmF3KC4uLmFyZ3Mpe3JldHVybiB0aGlzLnF1ZXJ5UmF3KC4uLmFyZ3MpfWFzeW5jIHNlbGVjdCh0aGluZyl7YXdhaXQgdGhpcy5yZWFkeTtsZXQgcmVzPWF3YWl0IHRoaXMucnBjKFwic2VsZWN0XCIsW3RoaW5nXSk7aWYocmVzLmVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvci5tZXNzYWdlKTtyZXR1cm4gb3V0cHV0KHRoaW5nLHJlcy5yZXN1bHQpfWFzeW5jIGNyZWF0ZSh0aGluZyxkYXRhKXthd2FpdCB0aGlzLnJlYWR5O2xldCByZXM9YXdhaXQgdGhpcy5ycGMoXCJjcmVhdGVcIixbdGhpbmcsZGF0YV0pO2lmKHJlcy5lcnJvcil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihyZXMuZXJyb3IubWVzc2FnZSk7cmV0dXJuIG91dHB1dCh0aGluZyxyZXMucmVzdWx0KX1hc3luYyBpbnNlcnQoYXJnMSxhcmcyKXthd2FpdCB0aGlzLnJlYWR5O2xldFt0YWJsZSxkYXRhXT10eXBlb2YgYXJnMT09XCJzdHJpbmdcInx8YXJnMSBpbnN0YW5jZW9mIFRhYmxlP1thcmcxLGFyZzJdOlt2b2lkIDAsYXJnMV0scmVzPWF3YWl0IHRoaXMucnBjKFwiaW5zZXJ0XCIsW3RhYmxlLGRhdGFdKTtpZihyZXMuZXJyb3IpdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IocmVzLmVycm9yLm1lc3NhZ2UpO3JldHVybiByZXMucmVzdWx0fWFzeW5jIGluc2VydFJlbGF0aW9uKGFyZzEsYXJnMil7YXdhaXQgdGhpcy5yZWFkeTtsZXRbdGFibGUsZGF0YV09dHlwZW9mIGFyZzE9PVwic3RyaW5nXCJ8fGFyZzEgaW5zdGFuY2VvZiBUYWJsZT9bYXJnMSxhcmcyXTpbdm9pZCAwLGFyZzFdLHJlcz1hd2FpdCB0aGlzLnJwYyhcImluc2VydF9yZWxhdGlvblwiLFt0YWJsZSxkYXRhXSk7aWYocmVzLmVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvci5tZXNzYWdlKTtyZXR1cm4gcmVzLnJlc3VsdH1hc3luYyBpbnNlcnRfcmVsYXRpb24oYXJnMSxhcmcyKXtyZXR1cm4gYXJnMSBpbnN0YW5jZW9mIFRhYmxlfHx0eXBlb2YgYXJnMT09XCJzdHJpbmdcIj90aGlzLmluc2VydFJlbGF0aW9uKGFyZzEsYXJnMik6dGhpcy5pbnNlcnRSZWxhdGlvbihhcmcxKX1hc3luYyB1cGRhdGUodGhpbmcsZGF0YSl7YXdhaXQgdGhpcy5yZWFkeTtsZXQgcmVzPWF3YWl0IHRoaXMucnBjKFwidXBkYXRlXCIsW3RoaW5nLGRhdGFdKTtpZihyZXMuZXJyb3IpdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IocmVzLmVycm9yLm1lc3NhZ2UpO3JldHVybiBvdXRwdXQodGhpbmcscmVzLnJlc3VsdCl9YXN5bmMgdXBzZXJ0KHRoaW5nLGRhdGEpe2F3YWl0IHRoaXMucmVhZHk7bGV0IHJlcz1hd2FpdCB0aGlzLnJwYyhcInVwc2VydFwiLFt0aGluZyxkYXRhXSk7aWYocmVzLmVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvci5tZXNzYWdlKTtyZXR1cm4gb3V0cHV0KHRoaW5nLHJlcy5yZXN1bHQpfWFzeW5jIG1lcmdlKHRoaW5nLGRhdGEpe2F3YWl0IHRoaXMucmVhZHk7bGV0IHJlcz1hd2FpdCB0aGlzLnJwYyhcIm1lcmdlXCIsW3RoaW5nLGRhdGFdKTtpZihyZXMuZXJyb3IpdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IocmVzLmVycm9yLm1lc3NhZ2UpO3JldHVybiBvdXRwdXQodGhpbmcscmVzLnJlc3VsdCl9YXN5bmMgcGF0Y2godGhpbmcsZGF0YSxkaWZmKXthd2FpdCB0aGlzLnJlYWR5O2xldCByZXM9YXdhaXQgdGhpcy5ycGMoXCJwYXRjaFwiLFt0aGluZyxkYXRhLGRpZmZdKTtpZihyZXMuZXJyb3IpdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IocmVzLmVycm9yLm1lc3NhZ2UpO3JldHVybiBkaWZmP3Jlcy5yZXN1bHQ6b3V0cHV0KHRoaW5nLHJlcy5yZXN1bHQpfWFzeW5jIGRlbGV0ZSh0aGluZyl7YXdhaXQgdGhpcy5yZWFkeTtsZXQgcmVzPWF3YWl0IHRoaXMucnBjKFwiZGVsZXRlXCIsW3RoaW5nXSk7aWYocmVzLmVycm9yKXRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlcy5lcnJvci5tZXNzYWdlKTtyZXR1cm4gb3V0cHV0KHRoaW5nLHJlcy5yZXN1bHQpfWFzeW5jIHZlcnNpb24oKXthd2FpdCB0aGlzLnJlYWR5O2xldCByZXM9YXdhaXQgdGhpcy5ycGMoXCJ2ZXJzaW9uXCIpO2lmKHJlcy5lcnJvcil0aHJvdyBuZXcgUmVzcG9uc2VFcnJvcihyZXMuZXJyb3IubWVzc2FnZSk7cmV0dXJuIHJlcy5yZXN1bHR9YXN5bmMgcnVuKG5hbWUsYXJnMixhcmczKXthd2FpdCB0aGlzLnJlYWR5O2xldFt2ZXJzaW9uLGFyZ3NdPUFycmF5LmlzQXJyYXkoYXJnMik/W3ZvaWQgMCxhcmcyXTpbYXJnMixhcmczXSxyZXM9YXdhaXQgdGhpcy5ycGMoXCJydW5cIixbbmFtZSx2ZXJzaW9uLGFyZ3NdKTtpZihyZXMuZXJyb3IpdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IocmVzLmVycm9yLm1lc3NhZ2UpO3JldHVybiByZXMucmVzdWx0fWFzeW5jIHJlbGF0ZShmcm9tLHRoaW5nLHRvLGRhdGEpe2F3YWl0IHRoaXMucmVhZHk7bGV0IHJlcz1hd2FpdCB0aGlzLnJwYyhcInJlbGF0ZVwiLFtmcm9tLHRoaW5nLHRvLGRhdGFdKTtpZihyZXMuZXJyb3IpdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IocmVzLmVycm9yLm1lc3NhZ2UpO3JldHVybiBvdXRwdXQodGhpbmcscmVzLnJlc3VsdCl9cnBjKG1ldGhvZCxwYXJhbXMpe2lmKCF0aGlzLmNvbm5lY3Rpb24pdGhyb3cgbmV3IE5vQWN0aXZlU29ja2V0O3JldHVybiB0aGlzLmNvbm5lY3Rpb24ucnBjKHttZXRob2QscGFyYW1zfSl9YXN5bmMgZXhwb3J0KG9wdGlvbnMpe2lmKGF3YWl0IHRoaXMucmVhZHksIXRoaXMuY29ubmVjdGlvbil0aHJvdyBuZXcgTm9BY3RpdmVTb2NrZXQ7cmV0dXJuIHRoaXMuY29ubmVjdGlvbi5leHBvcnQob3B0aW9ucyl9YXN5bmMgaW1wb3J0KGlucHV0KXtpZihhd2FpdCB0aGlzLnJlYWR5LCF0aGlzLmNvbm5lY3Rpb24pdGhyb3cgbmV3IE5vQWN0aXZlU29ja2V0O3JldHVybiB0aGlzLmNvbm5lY3Rpb24uaW1wb3J0KGlucHV0KX19O2Z1bmN0aW9uIG91dHB1dChzdWJqZWN0LGlucHV0KXtyZXR1cm4gc3ViamVjdCBpbnN0YW5jZW9mIFJlY29yZElkfHxzdWJqZWN0IGluc3RhbmNlb2YgU3RyaW5nUmVjb3JkSWQ/QXJyYXkuaXNBcnJheShpbnB1dCk/aW5wdXRbMF06aW5wdXQ6QXJyYXkuaXNBcnJheShpbnB1dCk/aW5wdXQ6W2lucHV0XX1mdW5jdGlvbiBwYXJzZVVybCh2YWx1ZSl7bGV0IHVybD1uZXcgVVJMKHZhbHVlKTtyZXR1cm4gdXJsLnBhdGhuYW1lLmVuZHNXaXRoKFwiL3JwY1wiKXx8KHVybC5wYXRobmFtZS5lbmRzV2l0aChcIi9cIil8fCh1cmwucGF0aG5hbWUrPVwiL1wiKSx1cmwucGF0aG5hbWUrPVwicnBjXCIpLHVybH1leHBvcnR7QWJzdHJhY3RFbmdpbmUsQXV0aENvbnRyb2xsZXIsQm91bmRFeGNsdWRlZCxCb3VuZEluY2x1ZGVkLENib3JCcmVhayxDYm9yRXJyb3IsQ2JvckZpbGxNaXNzaW5nLENib3JJbnZhbGlkTWFqb3JFcnJvcixDYm9yTnVtYmVyRXJyb3IsQ2JvclBhcnRpYWxEaXNhYmxlZCxDYm9yUmFuZ2VFcnJvcixDb25uZWN0aW9uU3RhdHVzLENvbm5lY3Rpb25VbmF2YWlsYWJsZSxERUZBVUxUX1JFQ09OTkVDVF9PUFRJT05TLERlY2ltYWwsRHVyYXRpb24sRW1pdHRlcixFbmdpbmVBdXRoLEVuZ2luZURpc2Nvbm5lY3RlZCxGZWF0dXJlVW5hdmFpbGFibGVGb3JFbmdpbmUsRnV0dXJlLEdhcCxHZW9tZXRyeSxHZW9tZXRyeUNvbGxlY3Rpb24sR2VvbWV0cnlMaW5lLEdlb21ldHJ5TXVsdGlMaW5lLEdlb21ldHJ5TXVsdGlQb2ludCxHZW9tZXRyeU11bHRpUG9seWdvbixHZW9tZXRyeVBvaW50LEdlb21ldHJ5UG9seWdvbixIdHRwQ29ubmVjdGlvbkVycm9yLEludmFsaWRVUkxQcm92aWRlZCxNaXNzaW5nTmFtZXNwYWNlRGF0YWJhc2UsTm9BY3RpdmVTb2NrZXQsTm9Db25uZWN0aW9uRGV0YWlscyxOb0RhdGFiYXNlU3BlY2lmaWVkLE5vTmFtZXNwYWNlU3BlY2lmaWVkLE5vVG9rZW5SZXR1cm5lZCxOb1VSTFByb3ZpZGVkLFByZXBhcmVkUXVlcnksUmFuZ2UsUmVjb25uZWN0RmFpbGVkLFJlY29ubmVjdEl0ZXJhdGlvbkVycm9yLFJlY29yZElkLFJlY29yZElkUmFuZ2UsUmVzcG9uc2VFcnJvcixTdHJpbmdSZWNvcmRJZCxTdXJyZWFsLFN1cnJlYWxEYkVycm9yLFRhYmxlLFVuZXhwZWN0ZWRDb25uZWN0aW9uRXJyb3IsVW5leHBlY3RlZFJlc3BvbnNlLFVuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZSxVbnN1cHBvcnRlZEVuZ2luZSxVbnN1cHBvcnRlZFZlcnNpb24sVXVpZCxWZXJzaW9uUmV0cmlldmFsRmFpbHVyZSxjYm9yX2V4cG9ydHMgYXMgY2Jvcixjb252ZXJ0QXV0aCxkLGRlY29kZUNib3IsU3VycmVhbCBhcyBkZWZhdWx0LGRlZmF1bHRWZXJzaW9uQ2hlY2tUaW1lb3V0LGVuY29kZUNib3IsZXF1YWxzLGVzY2FwZUlkZW50LGVzY2FwZU51bWJlcixlc2NhcGVfaWRlbnQsZ2V0SW5jcmVtZW50YWxJRCxpc0xpdmVSZXN1bHQsaXNWZXJzaW9uU3VwcG9ydGVkLGpzb25pZnksbGl2ZUFjdGlvbnMscixyZXRyaWV2ZVJlbW90ZVZlcnNpb24scyxzdXBwb3J0ZWRTdXJyZWFsRGJWZXJzaW9uTWluLHN1cHBvcnRlZFN1cnJlYWxEYlZlcnNpb25SYW5nZSxzdXBwb3J0ZWRTdXJyZWFsRGJWZXJzaW9uVW50aWwsc3VycmVhbHFsIGFzIHN1cnFsLHN1cnJlYWxxbCx0b1N1cnJlYWxxbFN0cmluZyx1LHZlcnNpb25DaGVja307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/surrealdb/dist/index.mjs\n");

/***/ })

};
;